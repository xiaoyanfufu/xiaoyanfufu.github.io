(()=>{var oe=r=>typeof r=="object"&&r!=null&&r.nodeType===1,ne=(r,a)=>(!a||r!=="hidden")&&r!=="visible"&&r!=="clip",Z=(r,a)=>{if(r.clientHeight<r.scrollHeight||r.clientWidth<r.scrollWidth){let g=getComputedStyle(r,null);return ne(g.overflowY,a)||ne(g.overflowX,a)||(y=>{let h=(d=>{if(!d.ownerDocument||!d.ownerDocument.defaultView)return null;try{return d.ownerDocument.defaultView.frameElement}catch(b){return null}})(y);return!!h&&(h.clientHeight<y.scrollHeight||h.clientWidth<y.scrollWidth)})(r)}return!1},U=(r,a,g,y,h,d,b,w)=>d<r&&b>a||d>r&&b<a?0:d<=r&&w<=g||b>=a&&w>=g?d-r-y:b>a&&w<g||d<r&&w>g?b-a+h:0,se=r=>{let a=r.parentElement;return a==null?r.getRootNode().host||null:a},_=(r,a)=>{var g,y,h,d;if(typeof document>"u")return[];let{scrollMode:b,block:w,inline:E,boundary:H,skipOverflowHiddenElements:$}=a,X=typeof H=="function"?H:f=>f!==H;if(!oe(r))throw new TypeError("Invalid target");let D=document.scrollingElement||document.documentElement,k=[],p=r;for(;oe(p)&&X(p);){if(p=se(p),p===D){k.push(p);break}p!=null&&p===document.body&&Z(p)&&!Z(document.documentElement)||p!=null&&Z(p,$)&&k.push(p)}let x=(y=(g=window.visualViewport)==null?void 0:g.width)!=null?y:innerWidth,B=(d=(h=window.visualViewport)==null?void 0:h.height)!=null?d:innerHeight,{scrollX:S,scrollY:I}=window,{height:T,width:e,top:n,right:t,bottom:i,left:c}=r.getBoundingClientRect(),{top:m,right:C,bottom:M,left:L}=(f=>{let o=window.getComputedStyle(f);return{top:parseFloat(o.scrollMarginTop)||0,right:parseFloat(o.scrollMarginRight)||0,bottom:parseFloat(o.scrollMarginBottom)||0,left:parseFloat(o.scrollMarginLeft)||0}})(r),l=w==="start"||w==="nearest"?n-m:w==="end"?i+M:n+T/2-m+M,s=E==="center"?c+e/2-L+C:E==="end"?t+C:c-L,u=[];for(let f=0;f<k.length;f++){let o=k[f],{height:v,width:W,top:F,right:G,bottom:J,left:O}=o.getBoundingClientRect();if(b==="if-needed"&&n>=0&&c>=0&&i<=B&&t<=x&&n>=F&&i<=J&&c>=O&&t<=G)return u;let q=getComputedStyle(o),R=parseInt(q.borderLeftWidth,10),Y=parseInt(q.borderTopWidth,10),j=parseInt(q.borderRightWidth,10),P=parseInt(q.borderBottomWidth,10),A=0,N=0,V="offsetWidth"in o?o.offsetWidth-o.clientWidth-R-j:0,z="offsetHeight"in o?o.offsetHeight-o.clientHeight-Y-P:0,K="offsetWidth"in o?o.offsetWidth===0?0:W/o.offsetWidth:0,Q="offsetHeight"in o?o.offsetHeight===0?0:v/o.offsetHeight:0;if(D===o)A=w==="start"?l:w==="end"?l-B:w==="nearest"?U(I,I+B,B,Y,P,I+l,I+l+T,T):l-B/2,N=E==="start"?s:E==="center"?s-x/2:E==="end"?s-x:U(S,S+x,x,R,j,S+s,S+s+e,e),A=Math.max(0,A+I),N=Math.max(0,N+S);else{A=w==="start"?l-F-Y:w==="end"?l-J+P+z:w==="nearest"?U(F,J,v,Y,P+z,l,l+T,T):l-(F+v/2)+z/2,N=E==="start"?s-O-R:E==="center"?s-(O+W/2)+V/2:E==="end"?s-G+j+V:U(O,G,W,R,j+V,s,s+e,e);let{scrollLeft:ee,scrollTop:te}=o;A=Q===0?0:Math.max(0,Math.min(te+A/Q,o.scrollHeight-v/Q+z)),N=K===0?0:Math.max(0,Math.min(ee+N/K,o.scrollWidth-W/K+V)),l+=te-A,s+=ee-N}u.push({el:o,top:A,left:N})}return u};var re=r=>r===!1?{block:"end",inline:"nearest"}:(a=>a===Object(a)&&Object.keys(a).length!==0)(r)?r:{block:"start",inline:"nearest"};function ie(r,a){if(!r.isConnected||!(h=>{let d=h;for(;d&&d.parentNode;){if(d.parentNode===document)return!0;d=d.parentNode instanceof ShadowRoot?d.parentNode.host:d.parentNode}return!1})(r))return;let g=(h=>{let d=window.getComputedStyle(h);return{top:parseFloat(d.scrollMarginTop)||0,right:parseFloat(d.scrollMarginRight)||0,bottom:parseFloat(d.scrollMarginBottom)||0,left:parseFloat(d.scrollMarginLeft)||0}})(r);if((h=>typeof h=="object"&&typeof h.behavior=="function")(a))return a.behavior(_(r,a));let y=typeof a=="boolean"||a==null?void 0:a.behavior;for(let{el:h,top:d,left:b}of _(r,re(a))){let w=d-g.top+g.bottom,E=b-g.left+g.right;h.scroll({top:w,left:E,behavior:y})}}(()=>{let r=(e,n)=>{if(n){let t=n.innerText;navigator.clipboard.writeText(t);let i=e.innerHTML;e.innerHTML='<i class="fa fa-check-circle"></i>&nbsp;\u6210\u529F~',setTimeout(()=>{e.innerHTML=i},3e3)}},a=async()=>{var n;let e=(((n=window.kr)==null?void 0:n.siteRoot)||"/")+"config.json";return await fetch(e).then(t=>t.json())},g=()=>{let e=!1,n=()=>{window.requestAnimationFrame(()=>{window.scrollY>200?e||(document.body.classList.add("scroll-down"),e=!0):e&&(document.body.classList.remove("scroll-down"),e=!1)})};document.getElementById("gotop-box").addEventListener("click",t=>(window.scrollTo({top:0,behavior:"smooth"}),!1)),n(),window.addEventListener("scroll",n)},y=()=>{let e=document.getElementById("kratos-menu-wrap").cloneNode(!0);e.setAttribute("id","offcanvas-menu"),e.querySelectorAll("ul").forEach(t=>{t.removeAttribute("id")});let n=document.getElementById("kratos-nav-toggle-wrapper");document.getElementById("kratos-nav-toggle").addEventListener("click",()=>{n.classList.contains("toon")?(n.classList.remove("toon"),e.classList.remove("show")):(n.classList.add("toon"),e.classList.add("show"))}),e.addEventListener("click",t=>{t.target.tagName.toLowerCase()==="a"&&t.target.getAttribute("href")&&(n.classList.remove("toon"),e.classList.remove("show"))}),window.addEventListener("resize",t=>{window.innerWidth>768&&n.classList.contains("toon")&&(n.classList.remove("toon"),e.classList.remove("show"))}),document.getElementById("kratos-page").prepend(e)},h=()=>{document.querySelectorAll(".collapse-box-control").forEach(e=>{var n;(n=e.querySelector(".collapse-box-header"))==null||n.addEventListener("click",t=>{e.classList.toggle("active")})})},d=e=>{if(e.enable){let n=document.getElementsByClassName("kratos-page-content");n.length>0&&new Viewer(n[0],{filter:t=>!(typeof t.closest=="function"&&t.closest(".kr-linklist")!==null)})}},b,w=e=>{b=e.template.replaceAll("$NEWLINE","\n").replaceAll("$AUTHOR",document.querySelector("meta[name='author']").getAttribute("content")).replaceAll("$TITLE",document.title).replaceAll("$LINK",window.location.href)},E=e=>{e.enable&&(document.body.oncopy=n=>{if(b){let t=window.getSelection().toString();t.length>e.threshold&&(n.preventDefault(),n.clipboardData&&n.clipboardData.setData("text/plain",t+b))}})},H=(e,n=!0)=>{let t,i=e/1e3,c=Math.floor(i/60/60/24),m=Math.floor(i/60/60-24*c),C=Math.floor(i/60-24*60*c-60*m),M=Math.floor(i-24*60*60*c-60*60*m-60*C),L=c.toString(),l=m.toString(),s=C.toString(),u=M.toString();return n?(L&&L.length===1&&(L="0"+L),l&&l.length===1&&(l="0"+l),s&&s.length===1&&(s="0"+s),u&&u.length===1&&(u="0"+u),t=L+"\u5929"+l+"\u5C0F\u65F6"+s+"\u5206"+u+"\u79D2"):c<540?c<60?t=L+"\u5929":t=Math.floor(c/30).toString()+"\u4E2A\u6708":t=Math.floor(c/365).toString()+"\u5E74",t},$=e=>{let n=new Date(e.since),t=document.getElementById("kr-since");setInterval(()=>{t.innerText=H(Date.now()-n)},1e3)},X=()=>{document.querySelectorAll("figure.highlight").forEach((t,i)=>{let c=t.getElementsByTagName("table")[0].getElementsByTagName("tbody")[0].getElementsByTagName("tr")[0].getElementsByClassName("code")[0],m=document.createElement("button");m.className="copy-code",m.innerHTML='<i class="fa fa-copy"></i>&nbsp;\u590D\u5236',m.onclick=r.bind(null,m,c),t.appendChild(m)}),document.querySelectorAll("pre:has(code)").forEach((t,i)=>{let c=t.querySelector("code"),m=document.createElement("button");m.className="copy-code",m.innerHTML='<i class="fa fa-copy"></i>&nbsp;\u590D\u5236',m.onclick=r.bind(null,m,c),t.appendChild(m)})},D=()=>{let e=typeof window<"u",n=e&&!("onscroll"in window)||typeof navigator<"u"&&/(gle|ing|ro|msn)bot|crawl|spider|yand|duckgo/i.test(navigator.userAgent),t=e&&"IntersectionObserver"in window,i=document.querySelector(".kr-comments.lazy-load"),c=()=>{window.loadCommentsEventHandler&&window.cancelIdleCallback(window.loadCommentsEventHandler),typeof window.loadComments=="function"&&(window.loadCommentsEventHandler=window.requestIdleCallback(window.loadComments),window.loadComments=null)};if(e&&!n&&t&&i){let m=new IntersectionObserver(C=>{C[0].isIntersecting&&(c(),m.disconnect())},{threshold:0});m.observe(i)}else c();window.addEventListener("pjax:before",()=>{window.loadComments&&(window.loadComments=null)},{once:!0})},k=()=>{let e=document.getElementById("expire-alert");if(e){let n=e.querySelector("time"),t=new Date(parseInt(n.getAttribute("datetime"))),c=Date.now()-t,m=e.getAttribute("data-after-days");c>parseInt(m)*24*3600*1e3&&(n.innerText=H(c,!1),e.classList.remove("hidden"))}},p=(e,n)=>{let t=0;return function(){let i=this,c=arguments;clearTimeout(t),t=setTimeout(function(){e.apply(i,c)},n||0)}},x=()=>{let e=document.getElementById("krw-toc"),n=()=>{let t=e.getElementsByClassName("toc-item"),i=[];try{Array.from(t).forEach(l=>{let s=l.querySelector(".toc-link"),u=decodeURI(s.getAttribute("href"));if(u.substring(0,1)!="#")throw new Error("TOC \u5C0F\u6807\u9898\u94FE\u63A5\u65E0\u6548\uFF0C\u683C\u5F0F\u65E0\u9650");let f=document.getElementById(u.substring(1));if(!f)throw new Error("TOC \u5C0F\u6807\u9898\u94FE\u63A5\u65E0\u6548\uFF0C\u672A\u627E\u5230\u76F8\u5173\u5F15\u7528");f.setAttribute("data-toc-id",i.length),i.push({at:f,el:l})})}catch(l){console.log("\u9519\u8BEF\uFF1A",l.message),Array.from(t).forEach(s=>{s.classList.add("show")});return}let c=-1,m=l=>{if(c!==l){if(c!==-1&&i[c]){i[c].el.classList.remove("active"),i[c].el.classList.remove("show");let s=i[c].el;for(;!s.classList.contains("toc");)s.classList.contains("toc-item")&&s.classList.remove("show"),s=s.parentNode}if(l!==-1&&i[l]){i[l].el.classList.add("active"),i[l].el.classList.add("show");let s=i[l].el;for(;!s.classList.contains("toc");)s.classList.contains("toc-item")&&s.classList.add("show"),s=s.parentNode;setTimeout(()=>{var f;let u=(f=i[l])==null?void 0:f.el;u&&ie(u,{behavior:"smooth",block:"nearest",inline:"nearest",boundary:e})},300)}c=l}};if("IntersectionObserver"in window){let l=p((u,f)=>{f===window.scrollY?window.requestAnimationFrame(()=>{m(u)}):l(u,window.scrollY)},100),s=new IntersectionObserver(u=>{let f=null;u.forEach(o=>{let v=Number.parseInt(o.target.getAttribute("data-toc-id"),10);!o.isIntersecting&&o.boundingClientRect.top<=o.rootBounds.top?f=v:o.isIntersecting&&o.boundingClientRect.bottom<o.rootBounds.top+o.rootBounds.height/2&&o.intersectionRatio===1&&(f=v-1)}),f!==null&&l(f,window.scrollY)},{rootMargin:"-62px 0px 0px 0px",threshold:1});i.forEach(u=>{s.observe(u.at)}),window.addEventListener("pjax:before",()=>{s.disconnect(),i.length=0},{once:!0})}else{let l=()=>{i.forEach(o=>{o.h=o.at.getBoundingClientRect().top+window.scrollY-61})};l();let s=()=>{let o;!Number.isInteger(c)||c<0||c>i.length-1?o=0:o=c;let v=window.scrollY;if(v>=i[o].h)if(v>=i[i.length-1].h)o=i.length-1;else for(;v>=i[o+1].h;)o++;else for(;v<i[o].h&&(o--,!(o<0)););return o},u=p(()=>{window.requestAnimationFrame(()=>{m(s())})},100),f=p(()=>{l(),window.requestAnimationFrame(()=>{m(s())})},100);window.addEventListener("resize",f),window.addEventListener("scroll",u),window.addEventListener("pjax:before",()=>{window.removeEventListener("resize",f),window.removeEventListener("scroll",u),i.length=0},{once:!0})}let C=document.getElementsByClassName("toc-progress-bar")[0],M=document.querySelector(".kratos-page-content"),L=()=>{if(M){let l=window.scrollY||document.documentElement.scrollTop,s=M.clientHeight,u=document.documentElement.clientHeight,f=M.offsetTop,o=s>u?s-u:document.documentElement.scrollHeight-u,v=Math.max(0,Math.min((l-f)/o,1)),W=Math.round(v*100);C.style.width=(v*100).toString()+"%",C.setAttribute("aria-valuenow",W)}};window.addEventListener("scroll",()=>{window.requestAnimationFrame(L)}),L()};e&&(e.offsetParent!==null?n():"IntersectionObserver"in window&&new IntersectionObserver(n,{threshold:0,once:!0}).observe(e))},B=e=>{if(!e.enable)return;let n=window.innerHeight,t=!1,i=()=>{window.requestAnimationFrame(()=>{n<window.scrollY?t||(document.body.classList.add("nav-up"),t=!0):n>window.scrollY&&t&&(document.body.classList.remove("nav-up"),t=!1),n=window.scrollY})};window.addEventListener("wheel",i)},S=()=>{x(),X(),h(),D(),k()},I=e=>{w(e.copyrightNoticeForCopy),d(e.viewerjs)},T=()=>{document.removeEventListener("DOMContentLoaded",T,!1),window.removeEventListener("load",T,!1),a().then(e=>{E(e.copyrightNoticeForCopy),$(e.uptime),B(e.topNavScrollToggle),I(e),window.addEventListener("pjax:complete",()=>{I(e)})}),g(),y(),S(),window.addEventListener("pjax:complete",()=>{S()})};document.readyState==="complete"?setTimeout(T):(document.addEventListener("DOMContentLoaded",T,!1),window.addEventListener("load",T,!1))})();})();

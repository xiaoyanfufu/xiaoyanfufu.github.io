(()=>{var oe=r=>typeof r=="object"&&r!=null&&r.nodeType===1,ne=(r,a)=>(!a||r!=="hidden")&&r!=="visible"&&r!=="clip",Z=(r,a)=>{if(r.clientHeight<r.scrollHeight||r.clientWidth<r.scrollWidth){let g=getComputedStyle(r,null);return ne(g.overflowY,a)||ne(g.overflowX,a)||(y=>{let h=(d=>{if(!d.ownerDocument||!d.ownerDocument.defaultView)return null;try{return d.ownerDocument.defaultView.frameElement}catch(b){return null}})(y);return!!h&&(h.clientHeight<y.scrollHeight||h.clientWidth<y.scrollWidth)})(r)}return!1},U=(r,a,g,y,h,d,b,w)=>d<r&&b>a||d>r&&b<a?0:d<=r&&w<=g||b>=a&&w>=g?d-r-y:b>a&&w<g||d<r&&w>g?b-a+h:0,se=r=>{let a=r.parentElement;return a==null?r.getRootNode().host||null:a},_=(r,a)=>{var g,y,h,d;if(typeof document>"u")return[];let{scrollMode:b,block:w,inline:E,boundary:H,skipOverflowHiddenElements:$}=a,X=typeof H=="function"?H:f=>f!==H;if(!oe(r))throw new TypeError("Invalid target");let D=document.scrollingElement||document.documentElement,k=[],p=r;for(;oe(p)&&X(p);){if(p=se(p),p===D){k.push(p);break}p!=null&&p===document.body&&Z(p)&&!Z(document.documentElement)||p!=null&&Z(p,$)&&k.push(p)}let x=(y=(g=window.visualViewport)==null?void 0:g.width)!=null?y:innerWidth,B=(d=(h=window.visualViewport)==null?void 0:h.height)!=null?d:innerHeight,{scrollX:S,scrollY:I}=window,{height:T,width:e,top:o,right:n,bottom:i,left:c}=r.getBoundingClientRect(),{top:u,right:C,bottom:M,left:L}=(f=>{let t=window.getComputedStyle(f);return{top:parseFloat(t.scrollMarginTop)||0,right:parseFloat(t.scrollMarginRight)||0,bottom:parseFloat(t.scrollMarginBottom)||0,left:parseFloat(t.scrollMarginLeft)||0}})(r),l=w==="start"||w==="nearest"?o-u:w==="end"?i+M:o+T/2-u+M,s=E==="center"?c+e/2-L+C:E==="end"?n+C:c-L,m=[];for(let f=0;f<k.length;f++){let t=k[f],{height:v,width:W,top:F,right:G,bottom:J,left:O}=t.getBoundingClientRect();if(b==="if-needed"&&o>=0&&c>=0&&i<=B&&n<=x&&o>=F&&i<=J&&c>=O&&n<=G)return m;let q=getComputedStyle(t),R=parseInt(q.borderLeftWidth,10),Y=parseInt(q.borderTopWidth,10),j=parseInt(q.borderRightWidth,10),P=parseInt(q.borderBottomWidth,10),A=0,N=0,V="offsetWidth"in t?t.offsetWidth-t.clientWidth-R-j:0,z="offsetHeight"in t?t.offsetHeight-t.clientHeight-Y-P:0,K="offsetWidth"in t?t.offsetWidth===0?0:W/t.offsetWidth:0,Q="offsetHeight"in t?t.offsetHeight===0?0:v/t.offsetHeight:0;if(D===t)A=w==="start"?l:w==="end"?l-B:w==="nearest"?U(I,I+B,B,Y,P,I+l,I+l+T,T):l-B/2,N=E==="start"?s:E==="center"?s-x/2:E==="end"?s-x:U(S,S+x,x,R,j,S+s,S+s+e,e),A=Math.max(0,A+I),N=Math.max(0,N+S);else{A=w==="start"?l-F-Y:w==="end"?l-J+P+z:w==="nearest"?U(F,J,v,Y,P+z,l,l+T,T):l-(F+v/2)+z/2,N=E==="start"?s-O-R:E==="center"?s-(O+W/2)+V/2:E==="end"?s-G+j+V:U(O,G,W,R,j+V,s,s+e,e);let{scrollLeft:ee,scrollTop:te}=t;A=Q===0?0:Math.max(0,Math.min(te+A/Q,t.scrollHeight-v/Q+z)),N=K===0?0:Math.max(0,Math.min(ee+N/K,t.scrollWidth-W/K+V)),l+=te-A,s+=ee-N}m.push({el:t,top:A,left:N})}return m};var re=r=>r===!1?{block:"end",inline:"nearest"}:(a=>a===Object(a)&&Object.keys(a).length!==0)(r)?r:{block:"start",inline:"nearest"};function ie(r,a){if(!r.isConnected||!(h=>{let d=h;for(;d&&d.parentNode;){if(d.parentNode===document)return!0;d=d.parentNode instanceof ShadowRoot?d.parentNode.host:d.parentNode}return!1})(r))return;let g=(h=>{let d=window.getComputedStyle(h);return{top:parseFloat(d.scrollMarginTop)||0,right:parseFloat(d.scrollMarginRight)||0,bottom:parseFloat(d.scrollMarginBottom)||0,left:parseFloat(d.scrollMarginLeft)||0}})(r);if((h=>typeof h=="object"&&typeof h.behavior=="function")(a))return a.behavior(_(r,a));let y=typeof a=="boolean"||a==null?void 0:a.behavior;for(let{el:h,top:d,left:b}of _(r,re(a))){let w=d-g.top+g.bottom,E=b-g.left+g.right;h.scroll({top:w,left:E,behavior:y})}}(()=>{let r=(e,o)=>{if(o){let n=o.innerText;navigator.clipboard.writeText(n);let i=e.innerHTML;e.innerHTML='<i class="fa fa-check-circle"></i>&nbsp;\u6210\u529F~',setTimeout(()=>{e.innerHTML=i},3e3)}},a=async()=>{var o;let e=(((o=window.kr)==null?void 0:o.siteRoot)||"/")+"config.json";return await fetch(e).then(n=>n.json())},g=()=>{let e=!1,o=()=>{window.requestAnimationFrame(()=>{window.scrollY>200?e||(document.body.classList.add("scroll-down"),e=!0):e&&(document.body.classList.remove("scroll-down"),e=!1)})};document.getElementById("gotop-box").addEventListener("click",n=>(window.scrollTo({top:0,behavior:"smooth"}),!1)),o(),window.addEventListener("scroll",o)},y=()=>{let e=document.getElementById("kratos-menu-wrap").cloneNode(!0);e.setAttribute("id","offcanvas-menu"),e.querySelectorAll("ul").forEach(n=>{n.removeAttribute("id")});let o=document.getElementById("kratos-nav-toggle-wrapper");document.getElementById("kratos-nav-toggle").addEventListener("click",()=>{o.classList.contains("toon")?(o.classList.remove("toon"),e.classList.remove("show")):(o.classList.add("toon"),e.classList.add("show"))}),e.addEventListener("click",n=>{n.target.tagName.toLowerCase()==="a"&&n.target.getAttribute("href")&&(o.classList.remove("toon"),e.classList.remove("show"))}),window.addEventListener("resize",n=>{window.innerWidth>768&&o.classList.contains("toon")&&(o.classList.remove("toon"),e.classList.remove("show"))}),document.getElementById("kratos-page").prepend(e)},h=()=>{document.querySelectorAll(".collapse-box-control").forEach(e=>{var o;(o=e.querySelector(".collapse-box-header"))==null||o.addEventListener("click",n=>{e.classList.toggle("active")})})},d=e=>{if(e.enable){let o=document.getElementsByClassName("kratos-page-content");o.length>0&&new Viewer(o[0])}},b,w=e=>{b=e.template.replaceAll("$NEWLINE","\n").replaceAll("$AUTHOR",document.querySelector("meta[name='author']").getAttribute("content")).replaceAll("$TITLE",document.title).replaceAll("$LINK",window.location.href)},E=e=>{e.enable&&(document.body.oncopy=o=>{if(b){let n=window.getSelection().toString();n.length>e.threshold&&(o.preventDefault(),o.clipboardData&&o.clipboardData.setData("text/plain",n+b))}})},H=(e,o=!0)=>{let n,i=e/1e3,c=Math.floor(i/60/60/24),u=Math.floor(i/60/60-24*c),C=Math.floor(i/60-24*60*c-60*u),M=Math.floor(i-24*60*60*c-60*60*u-60*C),L=c.toString(),l=u.toString(),s=C.toString(),m=M.toString();return o?(L&&L.length===1&&(L="0"+L),l&&l.length===1&&(l="0"+l),s&&s.length===1&&(s="0"+s),m&&m.length===1&&(m="0"+m),n=L+"\u5929"+l+"\u5C0F\u65F6"+s+"\u5206"+m+"\u79D2"):c<540?c<60?n=L+"\u5929":n=Math.floor(c/30).toString()+"\u4E2A\u6708":n=Math.floor(c/365).toString()+"\u5E74",n},$=e=>{let o=new Date(e.since),n=document.getElementById("kr-since");setInterval(()=>{n.innerText=H(Date.now()-o)},1e3)},X=()=>{document.querySelectorAll("figure.highlight").forEach((n,i)=>{let c=n.getElementsByTagName("table")[0].getElementsByTagName("tbody")[0].getElementsByTagName("tr")[0].getElementsByClassName("code")[0],u=document.createElement("button");u.className="copy-code",u.innerHTML='<i class="fa fa-copy"></i>&nbsp;\u590D\u5236',u.onclick=r.bind(null,u,c),n.appendChild(u)}),document.querySelectorAll("pre:has(code)").forEach((n,i)=>{let c=n.querySelector("code"),u=document.createElement("button");u.className="copy-code",u.innerHTML='<i class="fa fa-copy"></i>&nbsp;\u590D\u5236',u.onclick=r.bind(null,u,c),n.appendChild(u)})},D=()=>{let e=typeof window<"u",o=e&&!("onscroll"in window)||typeof navigator<"u"&&/(gle|ing|ro|msn)bot|crawl|spider|yand|duckgo/i.test(navigator.userAgent),n=e&&"IntersectionObserver"in window,i=document.querySelector(".kr-comments.lazy-load"),c=()=>{window.loadCommentsEventHandler&&window.cancelIdleCallback(window.loadCommentsEventHandler),typeof window.loadComments=="function"&&(window.loadCommentsEventHandler=window.requestIdleCallback(window.loadComments),window.loadComments=null)};if(e&&!o&&n&&i){let u=new IntersectionObserver(C=>{C[0].isIntersecting&&(c(),u.disconnect())},{threshold:0});u.observe(i)}else c();window.addEventListener("pjax:before",()=>{window.loadComments&&(window.loadComments=null)},{once:!0})},k=()=>{let e=document.getElementById("expire-alert");if(e){let o=e.querySelector("time"),n=new Date(parseInt(o.getAttribute("datetime"))),c=Date.now()-n,u=e.getAttribute("data-after-days");c>parseInt(u)*24*3600*1e3&&(o.innerText=H(c,!1),e.classList.remove("hidden"))}},p=(e,o)=>{let n=0;return function(){let i=this,c=arguments;clearTimeout(n),n=setTimeout(function(){e.apply(i,c)},o||0)}},x=()=>{let e=document.getElementById("krw-toc"),o=()=>{let n=e.getElementsByClassName("toc-item"),i=[];try{Array.from(n).forEach(l=>{let s=l.querySelector(".toc-link"),m=decodeURI(s.getAttribute("href"));if(m.substring(0,1)!="#")throw new Error("TOC \u5C0F\u6807\u9898\u94FE\u63A5\u65E0\u6548\uFF0C\u683C\u5F0F\u65E0\u9650");let f=document.getElementById(m.substring(1));if(!f)throw new Error("TOC \u5C0F\u6807\u9898\u94FE\u63A5\u65E0\u6548\uFF0C\u672A\u627E\u5230\u76F8\u5173\u5F15\u7528");f.setAttribute("data-toc-id",i.length),i.push({at:f,el:l})})}catch(l){console.log("\u9519\u8BEF\uFF1A",l.message),Array.from(n).forEach(s=>{s.classList.add("show")});return}let c=-1,u=l=>{if(c!==l){if(c!==-1&&i[c]){i[c].el.classList.remove("active"),i[c].el.classList.remove("show");let s=i[c].el;for(;!s.classList.contains("toc");)s.classList.contains("toc-item")&&s.classList.remove("show"),s=s.parentNode}if(l!==-1&&i[l]){i[l].el.classList.add("active"),i[l].el.classList.add("show");let s=i[l].el;for(;!s.classList.contains("toc");)s.classList.contains("toc-item")&&s.classList.add("show"),s=s.parentNode;setTimeout(()=>{var f;let m=(f=i[l])==null?void 0:f.el;m&&ie(m,{behavior:"smooth",block:"nearest",inline:"nearest",boundary:e})},300)}c=l}};if("IntersectionObserver"in window){let l=p((m,f)=>{f===window.scrollY?window.requestAnimationFrame(()=>{u(m)}):l(m,window.scrollY)},100),s=new IntersectionObserver(m=>{let f=null;m.forEach(t=>{let v=Number.parseInt(t.target.getAttribute("data-toc-id"),10);!t.isIntersecting&&t.boundingClientRect.top<=t.rootBounds.top?f=v:t.isIntersecting&&t.boundingClientRect.bottom<t.rootBounds.top+t.rootBounds.height/2&&t.intersectionRatio===1&&(f=v-1)}),f!==null&&l(f,window.scrollY)},{rootMargin:"-62px 0px 0px 0px",threshold:1});i.forEach(m=>{s.observe(m.at)}),window.addEventListener("pjax:before",()=>{s.disconnect(),i.length=0},{once:!0})}else{let l=()=>{i.forEach(t=>{t.h=t.at.getBoundingClientRect().top+window.scrollY-61})};l();let s=()=>{let t;!Number.isInteger(c)||c<0||c>i.length-1?t=0:t=c;let v=window.scrollY;if(v>=i[t].h)if(v>=i[i.length-1].h)t=i.length-1;else for(;v>=i[t+1].h;)t++;else for(;v<i[t].h&&(t--,!(t<0)););return t},m=p(()=>{window.requestAnimationFrame(()=>{u(s())})},100),f=p(()=>{l(),window.requestAnimationFrame(()=>{u(s())})},100);window.addEventListener("resize",f),window.addEventListener("scroll",m),window.addEventListener("pjax:before",()=>{window.removeEventListener("resize",f),window.removeEventListener("scroll",m),i.length=0},{once:!0})}let C=document.getElementsByClassName("toc-progress-bar")[0],M=document.querySelector(".kratos-page-content"),L=()=>{if(M){let l=window.scrollY||document.documentElement.scrollTop,s=M.clientHeight,m=document.documentElement.clientHeight,f=M.offsetTop,t=s>m?s-m:document.documentElement.scrollHeight-m,v=Math.max(0,Math.min((l-f)/t,1)),W=Math.round(v*100);C.style.width=(v*100).toString()+"%",C.setAttribute("aria-valuenow",W)}};window.addEventListener("scroll",()=>{window.requestAnimationFrame(L)}),L()};e&&(e.offsetParent!==null?o():"IntersectionObserver"in window&&new IntersectionObserver(o,{threshold:0,once:!0}).observe(e))},B=e=>{if(!e.enable)return;let o=window.innerHeight,n=!1,i=()=>{window.requestAnimationFrame(()=>{o<window.scrollY?n||(document.body.classList.add("nav-up"),n=!0):o>window.scrollY&&n&&(document.body.classList.remove("nav-up"),n=!1),o=window.scrollY})};window.addEventListener("wheel",i)},S=()=>{x(),X(),h(),D(),k()},I=e=>{w(e.copyrightNoticeForCopy),d(e.viewerjs)},T=()=>{document.removeEventListener("DOMContentLoaded",T,!1),window.removeEventListener("load",T,!1),a().then(e=>{E(e.copyrightNoticeForCopy),$(e.uptime),B(e.topNavScrollToggle),I(e),window.addEventListener("pjax:complete",()=>{I(e)})}),g(),y(),S(),window.addEventListener("pjax:complete",()=>{S()})};document.readyState==="complete"?setTimeout(T):(document.addEventListener("DOMContentLoaded",T,!1),window.addEventListener("load",T,!1))})();})();

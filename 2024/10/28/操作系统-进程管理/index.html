<!DOCTYPE html><html lang="zn-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>操作系统-进程管理 | XIAOYAN</title><meta name="keywords" content="锁,操作系统基础,进程管理"><meta name="author" content="xiaoyan"><meta name="copyright" content="xiaoyan"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="操作系统-进程管理"><meta name="application-name" content="操作系统-进程管理"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="操作系统-进程管理"><meta property="og:url" content="http://example.com/2024/10/28/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/index.html"><meta property="og:site_name" content="XIAOYAN"><meta property="og:description" content="操作系统基础操作系统概述操作系统定义与功能 操作系统（Operating System, OS）是计算机系统中至关重要的软件层，其主要职责是管理计算机硬件与软件资源，为应用程序提供统一的接口和服务。操作系统作为计算机的基石，确保了计算机系统的有效运行和资源的高效利用。 操作系统主要功能 硬件管理：操"><meta property="og:locale" content="zn-CN"><meta property="og:image" content="https://xiaoyanfufu-io.oss-cn-guangzhou.aliyuncs.com/blog/202410282316960.png"><meta property="article:author" content="xiaoyan"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://xiaoyanfufu-io.oss-cn-guangzhou.aliyuncs.com/blog/202410282316960.png"><meta name="description" content="操作系统基础操作系统概述操作系统定义与功能 操作系统（Operating System, OS）是计算机系统中至关重要的软件层，其主要职责是管理计算机硬件与软件资源，为应用程序提供统一的接口和服务。操作系统作为计算机的基石，确保了计算机系统的有效运行和资源的高效利用。 操作系统主要功能 硬件管理：操"><link rel="shortcut icon" href="/images/favicon.ico"><link rel="canonical" href="http://example.com/2024/10/28/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2024/07/27/125766904/ba62475f396df9de3316a08ed9e65d86_5680958632268053399..png"},
  postHeadAiDescription: undefined,
  diytitle: undefined,
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: undefined,
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: xiaoyan","link":"链接: ","source":"来源: XIAOYAN","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'XIAOYAN',
  title: '操作系统-进程管理',
  postAI: '',
  pageFillDescription: '操作系统基础, 操作系统概述, 操作系统主要功能, 用户态和内核态, 用户态与内核态的概念, 用户态与内核态的必要性, 系统调用, 什么是系统调用, 系统调用过程, 进程与线程, 什么是进程和线程, 进程和线程的区别, 为什么有进程了还需要线程, 为什么要有多线程, 提升系统整体使用效率, 应对互联网发展带来的高并发, 线程间同步方式, PCB（Process Control Block）, PCB是什么, PCB包含的信息, 进程的状态, 状态转换, 进程通信方式, 进程的调度算法, 1. 先来先服务（FCFS）, 2. 短作业优先（SJF）, 3. 时间片轮转（RR）, 4. 优先级调度（Priority）, 5. 多级反馈队列（MFQ）, 僵尸进程与孤儿进程, 僵尸进程, 孤儿进程, 如何检测僵尸进程, 死锁, 什么是死锁？, 死锁的必要条件, 死锁解决方案, 1. 预防死锁（Deadlock Prevention）, 2. 避免死锁（Deadlock Avoidance）, 3. 检测死锁（Deadlock Detection）, 4. 解除死锁（Deadlock Recovery）操作系统基础操作系统概述操作系统定义与功能操作系统是计算机系统中至关重要的软件层其主要职责是管理计算机硬件与软件资源为应用程序提供统一的接口和服务操作系统作为计算机的基石确保了计算机系统的有效运行和资源的高效利用操作系统主要功能硬件管理操作系统负责管理计算机的硬件资源包括但不限于中央处理器内存输入输出设备等通过硬件管理操作系统能够合理分配和调度这些资源以满足不同应用程序的需求软件资源管理操作系统不仅管理硬件资源还负责管理软件资源如文件系统进程和线程等通过有效的资源管理操作系统确保了多个应用程序能够同时运行且互不干扰抽象与屏蔽复杂性操作系统通过提供抽象层屏蔽了底层硬件的复杂性使得应用程序开发者无需深入了解硬件细节即可进行开发这种抽象层包括文件系统设备驱动程序等内核内核是操作系统的核心部分负责执行最基本的任务如内存管理进程调度文件系统管理以及硬件设备的管理内核是操作系统与硬件之间的桥梁确保了硬件资源的高效利用和应用程序的顺利执行内核与的区别内核内核是操作系统的一部分属于软件层面它主要负责管理计算机硬件与软件资源提供系统调用接口使得应用程序能够访问硬件资源中央处理器是计算机的硬件核心负责执行指令和进行算术逻辑运算是硬件资源的一部分其功能由操作系统通过内核进行管理和调度用户态和内核态用户态与内核态的概念在操作系统中进程的运行环境可以根据其访问系统资源的权限分为两种级别用户态和内核态用户态在用户态下运行的进程仅能访问其自身的用户空间数据权限较低当应用程序需要执行某些需要更高权限的操作如文件读写网络通信进程管理等必须通过系统调用向操作系统发起请求从而进入内核态内核态内核态赋予进程几乎完全的系统资源访问权限允许其执行底层操作如直接访问硬件管理内存调度进程等当操作系统接收到来自用户态进程的系统调用请求时会将该进程切换到内核态执行相应的内核代码完成后再次切换回用户态内核态的权限级别远高于用户态因此能够执行更为底层的系统操作然而进入内核态涉及复杂的上下文切换和权限检查开销较大因此应尽量减少内核态的切换次数以提升系统性能和稳定性用户态与内核态的必要性用户态与内核态的划分是操作系统安全性和稳定性的基石其核心原因在于指令集中的特权指令特权指令某些指令具有潜在的危险性如直接操作硬件修改内存映射中断处理等这些指令若被普通用户程序随意执行可能导致系统崩溃或数据损坏因此操作系统将这些指令的执行权限限制在内核态确保只有内核代码能够执行这些特权指令资源隔离与保护如果所有进程都运行在内核态那么每个进程都将拥有对系统资源的完全访问权限这将导致资源竞争和潜在的冲突严重影响系统的性能和效率通过将进程分为用户态和内核态操作系统能够有效隔离不同进程的资源访问防止恶意或意外的操作对系统造成损害系统调用什么是系统调用在现代操作系统中用户程序通常运行在用户态而操作系统内核运行在内核态当用户程序需要执行某些特权操作如访问硬件资源管理进程操作文件系统等时由于用户态的权限限制无法直接执行这些操作此时程序需要通过系统调用向操作系统内核发起请求由内核代为执行这些特权操作系统调用是用户程序与操作系统内核之间的接口它提供了一种机制使得用户程序能够安全受控地访问内核提供的各种服务根据其功能系统调用大致可以分为以下几类文件管理包括文件的读取写入创建删除重命名权限管理等操作设备管理涉及对硬件设备的请求释放配置等操作如设备的读写设备的初始化等进程管理包括进程的创建终止调度同步通信等操作如等内存管理涉及内存的分配回收映射保护等操作如等系统调用与普通函数库调用在形式上相似但本质上存在显著差异普通函数库调用是在用户态下执行的调用的是预先编译好的本地函数而系统调用则是通过特定的指令如架构中的或指令触发将控制权转移到内核态由内核执行相应的操作系统调用过程系统调用的执行过程涉及用户态与内核态之间的切换具体步骤如下用户态发起系统调用当用户程序需要执行特权操作时它会通过特定的指令如发起系统调用此时程序会传递系统调用号以及必要的参数这些参数通常通过寄存器传递中断系统调用指令触发一个中断导致从用户态切换到内核态中断发生后当前用户程序的执行被挂起的控制权被转移到操作系统内核内核态处理系统调用内核接收到系统调用请求后根据系统调用号查找相应的内核函数通常位于系统调用表中并执行该函数内核函数负责处理用户程序请求的操作如访问文件管理设备调度进程等返回用户态内核完成系统调用后会通过特定的指令如或将控制权返回给用户程序此时从内核态切换回用户态用户程序继续执行并从系统调用返回点恢复执行结果返回系统调用的结果如文件读取的数据进程创建的状态等通常通过寄存器或内存返回给用户程序用户程序根据返回值判断系统调用是否成功并进行相应的处理系统调用的过程涉及用户态与内核态之间的多次切换这种切换带来了一定的开销但同时也确保了操作系统的安全性和稳定性通过系统调用用户程序能够在受控的环境下访问内核资源避免了直接操作硬件可能带来的风险进程与线程什么是进程和线程进程进程是计算机程序正在运行的一个实例是操作系统进行资源分配和调度的基本单位例如打开并运行的微信应用程序就是一个进程每个进程都有独立的内存空间文件描述符网络连接等资源线程线程是进程内的一个执行单元也被称为轻量级进程一个进程可以包含多个线程这些线程共享进程的资源如内存空间文件句柄网络连接等但每个线程有自己的独立栈和寄存器状态例如在运行的微信应用程序中可能有一个线程专门负责推送用户发出的信息另一个线程负责接收和处理用户输入进程和线程的区别资源分配进程是操作系统中最小的资源分配单位每个进程拥有独立的内存空间和系统资源而线程是进程内的最小执行单位共享同一进程的资源如内存中的堆和元数据空间但每个线程有自己的私有栈和寄存器状态切换开销由于线程更加轻量线程之间的上下文切换开销较小且较快相比之下进程之间的上下文切换开销较大因为需要保存和恢复更多的状态信息如页表文件描述符等独立性进程之间是相互独立的一个进程的崩溃通常不会影响其他进程而线程则不一定因为同一进程下的线程共享资源一个线程的错误可能会影响其他线程甚至导致整个进程崩溃为什么有进程了还需要线程切换开销进程切换的开销较大而线程切换的开销较小通过使用线程可以在同一进程内并发执行多个任务减少上下文切换的开销并发执行多线程可以并发执行任务增加的利用率例如一个进程可以同时处理用户输入网络通信和后台任务而无需等待某个任务完成后再处理下一个任务资源共享同一进程下的线程可以共享进程的资源如内存空间文件句柄等这使得线程间的通信更加高效无需进行系统调用减少了开销响应性通过使用多线程应用程序可以更好地响应用户操作例如一个线程可以处理用户界面更新另一个线程可以处理后台计算任务从而提高用户体验为什么要有多线程多线程技术在现代计算机系统中扮演着至关重要的角色其主要优势体现在以下几个方面提升系统整体使用效率轻量级和低开销线程是进程内的执行单元相比于进程线程更加轻量化创建和销毁的开销较小线程之间的上下文切换开销也远小于进程间的切换这使得系统能够更高效地管理和调度多个任务资源共享同一进程下的多个线程共享进程的资源如内存空间文件句柄网络连接等这种资源共享机制减少了资源复制的开销提高了资源利用率并发处理在单核时代多线程可以通过时间片轮转机制实现并发执行避免因单一线程阻塞而导致整个进程停滞例如当一个线程进行操作时可以切换到其他线程继续执行从而提高的利用率多核利用在多核时代多线程能够充分利用多核处理器的并行计算能力通过将任务分配到不同的线程系统可以在多个核心上并行执行任务显著提升整体性能应对互联网发展带来的高并发高并发处理随着互联网的快速发展现代应用系统需要处理大量的并发请求例如在电商平台的双购物节期间系统需要应对数百万级别的并发访问多线程并发编程能够显著提高系统的并发处理能力确保在高负载情况下系统仍能稳定运行响应性和用户体验多线程技术使得应用程序能够更好地响应用户操作例如一个线程可以处理用户界面更新另一个线程可以处理后台计算任务从而提高用户体验分布式系统在分布式系统中多线程技术可以用于实现负载均衡和任务分发通过将任务分配到不同的线程或进程系统可以更高效地利用分布式资源提高整体系统的吞吐量和可靠性线程间同步方式线程同步是指在多线程环境中确保多个线程能够有序地访问共享资源避免出现资源冲突和竞态条件线程同步机制是多线程编程中的关键技术常见的同步方式包括互斥锁读写锁信号量屏障和事件等互斥锁互斥锁是最基本的同步机制之一用于确保在同一时间段内只有一个线程能够访问共享资源当一个线程获取到互斥锁后其他试图获取该锁的线程将被阻塞直到锁被释放在中可以使用关键字或接口来实现互斥锁适用于需要独占访问共享资源的场景如临界区保护读写锁读写锁允许多个线程同时读取共享资源但只允许一个线程写入共享资源读写锁适用于读操作远多于写操作的场景可以提高并发性能在中可以使用类来实现读写锁适用于读多写少的场景如缓存系统配置管理等信号量信号量是一种计数器用于控制同时访问共享资源的线程数量信号量可以允许多个线程同时访问共享资源但需要限制最大并发数在中可以使用类来实现信号量适用于需要限制并发访问数量的场景如连接池管理资源池管理等屏障屏障是一种同步原语用于确保一组线程在某个点上同步当一个线程到达屏障点时它会被阻塞直到所有线程都到达屏障点然后所有线程继续执行在中可以使用类来实现屏障适用于需要多个线程协同工作的场景如并行计算数据分片处理等事件事件是一种通知机制用于在多线程之间传递信号实现线程间的同步事件可以用于通知一个或多个线程某个条件已经满足从而触发相应的操作在中可以使用或等类来实现事件通知机制适用于需要线程间协作和通知的场景如任务调度事件驱动编程等是什么即进程控制块是操作系统中用于管理和跟踪进程的核心数据结构每个进程在操作系统中都有一个唯一的用于存储与该进程相关的所有信息是操作系统进行进程调度和管理的基础它记录了进程的当前状态资源需求调度信息等关键数据当操作系统创建一个新的进程时会为该进程分配一个唯一的进程并为该进程创建一个随着进程的执行中的内容会不断更新操作系统根据这些信息来管理和调度进程包含的信息通常包含以下几类信息进程描述信息进程唯一标识进程的整数进程名称通常是可执行文件的名称用户标识进程所属的用户组标识进程所属的用户组进程调度信息进程状态标识进程当前的状态如运行态就绪态阻塞态等优先级进程的调度优先级用于决定进程在调度队列中的位置阻塞原因如果进程处于阻塞状态记录阻塞的原因如等待操作完成等待信号量等调度队列指针指向进程所在调度队列的指针用于进程调度资源需求状态内存需求进程所需的内存空间大小及分配情况时间进程已经使用的时间以及剩余的时间片设备资源进程所需的设备资源如文件描述符网络连接等状态机的处理状态寄存器状态进程在切换时需要保存的寄存器值如通用寄存器浮点寄存器等程序计数器记录进程当前执行的指令地址程序状态字记录进程的当前状态信息如条件码中断允许位等用户栈指针指向进程的用户栈顶地址内核栈指针指向进程的内核栈顶地址其他信息信号处理信息记录进程对信号的处理方式如忽略捕获默认处理等文件描述符表记录进程打开的文件描述符及其相关信息共享内存段记录进程与其他进程共享的内存段信息线程信息如果操作系统支持多线程中可能还包括线程的相关信息是操作系统中用于管理和调度进程的关键数据结构它包含了进程的所有重要信息如进程描述信息调度信息资源需求状态状态机的处理状态等操作系统通过来跟踪和管理进程的生命周期确保进程能够正确地执行和调度的设计和实现直接影响操作系统的性能和稳定性是操作系统内核的重要组成部分进程的状态进程状态是指进程在其生命周期中所处的不同阶段与线程状态类似进程状态可以分为以下五种主要状态创建状态当一个进程被创建时它首先进入创建状态在这个阶段操作系统为进程分配必要的资源如内存空间文件描述符等并初始化进程控制块此时进程尚未准备好执行仍处于初始化阶段就绪状态当进程完成初始化并准备好执行时它进入就绪状态在就绪状态下进程已经获得了除之外的所有必要资源等待操作系统调度器分配时间片一旦调度器选择该进程执行它将进入运行状态运行状态当进程被调度器选中并分配到时间片时它进入运行状态在运行状态下进程正在执行其任务正在处理该进程的指令如果进程的时间片用完或需要等待某些资源如操作它将退出运行状态进入其他状态阻塞状态当进程需要等待某些事件如操作完成信号量释放等时它进入阻塞状态在阻塞状态下进程暂时停止执行直到等待的事件发生一旦事件发生进程将重新进入就绪状态等待再次被调度执行结束状态当进程完成其任务或因某些原因如异常用户终止需要退出时它进入结束状态在结束状态下进程正在从系统中消失操作系统会回收分配给该进程的资源并销毁其进程的结束状态可以是正常退出如任务完成或异常退出如崩溃被终止状态转换进程状态之间的转换通常由操作系统内核管理和控制具体转换如下创建状态就绪状态进程初始化完成后进入就绪状态等待调度就绪状态运行状态调度器选择就绪状态的进程执行进程进入运行状态运行状态就绪状态当进程的时间片用完或被抢占时进程回到就绪状态运行状态阻塞状态当进程需要等待某些事件时进入阻塞状态阻塞状态就绪状态等待的事件发生后进程回到就绪状态运行状态结束状态进程完成任务或被终止进入结束状态进程通信是指在操作系统中不同进程之间进行数据交换和信息传递的机制进程通信是多进程编程中的关键技术常见的通信方式包括管道有名管道信号消息队列共享内存信号量和套接字等进程通信方式管道匿名管道管道是一种半双工的通信方式用于具有亲属关系的进程如父子进程或兄弟进程之间的通信管道数据存放在内存中遵循先进先出原则特点半双工通信数据单向流动只能在具有亲属关系的进程间使用应用场景适用于简单的父子进程间通信有名管道有名管道解决了匿名管道只能在具有亲属关系的进程间通信的限制允许任意两个进程进行通信有名管道通常存放在文件系统中具有唯一的名称特点全双工通信数据双向流动可以在任意两个进程间使用应用场景适用于需要跨进程通信的场景信号信号是一种异步通信机制用于通知进程某个事件已经发生信号通常用于处理异常情况或通知进程某些状态变化特点异步通信信号处理复杂信号传递的信息量有限应用场景适用于进程间的事件通知和异常处理消息队列消息队列是一种消息的链表存放在操作系统的内核中消息队列具有特定的消息格式并以特定的消息队列标识符标识消息队列遵循先进先出原则但与管道不同的是消息队列可以传递结构化的消息特点支持结构化消息传递消息队列存放在内核中生命周期较长应用场景适用于需要传递复杂消息的进程间通信共享内存共享内存允许多个进程访问同一块内存区域进程可以直接读写共享内存中的数据从而实现高效的数据交换共享内存需要引入锁机制来避免数据竞争特点高效的数据交换需要锁机制来避免数据竞争应用场景适用于需要频繁交换大量数据的进程间通信信号量信号量是一种计数器用于控制多个进程对共享资源的访问信号量通常用于实现进程间的同步确保在同一时刻只有一个或多个进程访问共享资源特点用于进程同步和资源控制控制同时访问共享资源的最大进程数应用场景适用于需要控制资源访问的进程间通信套接字套接字是一种网络通信机制用于在不同主机之间进行进程间通信套接字支持多种协议如可以实现端到端的通信特点支持跨主机的进程间通信支持多种协议应用场景适用于分布式系统中的进程间通信进程的调度算法进程调度算法是操作系统中用于决定哪个进程将获得时间片的关键机制不同的调度算法有不同的特点和适用场景常见的调度算法包括先来先服务短作业优先时间片轮转优先级调度和多级反馈队列等先来先服务先来先服务是一种简单的调度算法按照进程进入就绪队列的顺序进行调度最先进入就绪队列的进程将最先获得资源直到该进程执行完成或因某些事件阻塞放弃占用特点简单易实现非抢占式调度可能导致长作业长时间占用造成饥饿现象应用场景适用于作业执行时间差异不大的场景短作业优先短作业优先是一种优先调度预计执行时间最短的进程的算法从就绪队列中取出预计花费时间最短的任务为其分配资源直到任务执行完成或因某些事件阻塞放弃占用特点平均等待时间最短非抢占式调度可能导致长作业长时间等待造成饥饿现象应用场景适用于作业执行时间差异较大的场景时间片轮转时间片轮转是一种公平的调度算法为每个进程分配固定的时间片即允许进程运行的时间当时间片用完后进程被抢占并放回就绪队列的末尾等待下一次调度特点公平调度抢占式调度时间片大小影响调度性能应用场景适用于需要公平分配资源的场景优先级调度优先级调度为每个进程分配一个优先级优先级高的进程优先获得资源具有相同优先级的进程按照的方式执行特点支持优先级调度可能导致低优先级进程长时间等待造成饥饿现象应用场景适用于需要区分任务优先级的场景多级反馈队列多级反馈队列是一种复杂的调度算法结合了优先级调度和时间片轮转的特点系统维护多个就绪队列每个队列具有不同的优先级新加入的任务放在最高优先级的就绪队列当分配的时间片耗完但任务仍未完成时将该任务放入次优先级队列依次降级直到任务完成特点支持优先级和时间片轮转动态调整任务优先级减少饥饿现象应用场景适用于需要动态调整任务优先级的场景僵尸进程与孤儿进程在系统中进程通过系统调用创建子进程子进程是父进程的副本拥有独立的进程控制块子进程与父进程相互独立即使父进程终止子进程仍然可以继续运行僵尸进程当子进程调用系统调用结束自己的生命时内核会释放子进程占用的资源但子进程的仍然保留在系统中这些信息只有在父进程调用或系统调用时才会被释放以便父进程了解子进程的退出状态僵尸进程是指子进程已经终止但父进程没有调用或系统调用来获取子进程的退出状态导致子进程的没有及时释放僵尸进程虽然不再运行但其仍然占用系统资源可能导致资源泄漏孤儿进程孤儿进程是指父进程已经终止但子进程仍然在运行的进程由于父进程已经终止子进程无法通过父进程调用或系统调用导致其无法被回收操作系统会检测到孤儿进程并将其父进程设置为进程进程为由进程负责回收孤儿进程的如何检测僵尸进程在系统中可以使用以下方法检测僵尸进程使用命令打开终端并输入命令在命令的输出中列下标记为的进程即为僵尸进程使用命令打开终端并输入命令在命令的输出中列下标记为的进程即为僵尸进程使用命令结合打开终端并输入命令该命令会列出所有状态为的进程即僵尸进程死锁什么是死锁死锁是指在多线程或多进程环境中两个或多个线程或进程因为资源被占用而陷入相互循环等待的状态导致所有相关线程或进程都无法继续执行死锁是一种常见的并发问题可能导致系统停滞影响系统的稳定性和性能死锁的必要条件死锁的发生必须同时满足以下四个必要条件互斥至少有一个资源必须处于非共享模式即一次只能被一个线程或进程占用如果另一个线程或进程请求该资源它必须等待资源被释放非抢占性资源不能被强制剥夺只能由持有资源的线程或进程主动释放其他线程或进程不能强行抢占资源持有等待线程或进程在请求其他资源时必须持有至少一个资源即线程或进程在等待其他资源的同时不会释放已持有的资源循环等待存在一组线程或进程每个线程或进程都在等待下一个线程或进程持有的资源形成一个闭环死锁解决方案死锁问题与其四个必要条件是充要关系即只要破坏四个条件中的任意一个条件就可以解除死锁状态常见的死锁解决方案可以概括为预防避免检测和解除预防死锁预防死锁是通过破坏死锁的必要条件来避免死锁的发生具体方法包括破坏互斥条件允许资源共享但这通常不现实因为某些资源天生就是独占的破坏非抢占条件允许资源被强制剥夺但这可能导致资源状态不一致通常不推荐破坏持有等待条件要求线程或进程在请求资源时必须释放所有已持有的资源但这可能导致资源利用率降低破坏循环等待条件对资源进行排序要求线程或进程按照固定顺序请求资源避免形成循环等待避免死锁避免死锁是通过动态分配资源确保系统始终处于安全状态避免进入死锁状态常见的避免死锁算法包括银行家算法在分配资源前预先检查分配是否会导致系统进入不安全状态只有在安全状态下才进行资源分配检测死锁检测死锁是通过周期性地检查系统状态判断是否存在死锁常见的检测方法包括资源分配图通过构建资源分配图检查是否存在环路判断是否存在死锁等待图通过构建等待图检查是否存在环路判断是否存在死锁解除死锁解除死锁是通过强制终止某些线程或进程或剥夺某些资源打破死锁状态常见的解除死锁方法包括进程终止强制终止一个或多个陷入死锁的线程或进程释放其占用的资源资源抢占选择一个线程或进程强制剥夺其占用的资源分配给其他线程或进程',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-11-04 11:40:02',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="/images/star.png"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">XIAOYAN</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/?id=12613265870&amp;server=netease"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/AOP/" style="font-size: 1.05rem;">AOP<sup>1</sup></a><a href="/tags/Bean/" style="font-size: 1.05rem;">Bean<sup>1</sup></a><a href="/tags/DDD/" style="font-size: 1.05rem;">DDD<sup>1</sup></a><a href="/tags/IoC/" style="font-size: 1.05rem;">IoC<sup>1</sup></a><a href="/tags/Java8%E6%96%B0%E7%89%B9%E6%80%A7/" style="font-size: 1.05rem;">Java8新特性<sup>1</sup></a><a href="/tags/Java%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/" style="font-size: 1.05rem;">Java基本概念<sup>1</sup></a><a href="/tags/List/" style="font-size: 1.05rem;">List<sup>1</sup></a><a href="/tags/Map/" style="font-size: 1.05rem;">Map<sup>2</sup></a><a href="/tags/MyBatis/" style="font-size: 1.05rem;">MyBatis<sup>1</sup></a><a href="/tags/MySQL%E5%9F%BA%E7%A1%80/" style="font-size: 1.05rem;">MySQL基础<sup>1</sup></a><a href="/tags/Object/" style="font-size: 1.05rem;">Object<sup>1</sup></a><a href="/tags/SQL%E8%B0%83%E4%BC%98/" style="font-size: 1.05rem;">SQL调优<sup>1</sup></a><a href="/tags/Set/" style="font-size: 1.05rem;">Set<sup>1</sup></a><a href="/tags/SpringBoot/" style="font-size: 1.05rem;">SpringBoot<sup>1</sup></a><a href="/tags/SpringCloud/" style="font-size: 1.05rem;">SpringCloud<sup>1</sup></a><a href="/tags/%E4%BA%8B%E5%8A%A1/" style="font-size: 1.05rem;">事务<sup>2</sup></a><a href="/tags/%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B/" style="font-size: 1.05rem;">内存模型<sup>1</sup></a><a href="/tags/%E5%8F%8D%E5%B0%84/" style="font-size: 1.05rem;">反射<sup>1</sup></a><a href="/tags/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/" style="font-size: 1.05rem;">垃圾回收<sup>1</sup></a><a href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" style="font-size: 1.05rem;">多线程<sup>1</sup></a><a href="/tags/%E5%AF%B9%E8%B1%A1/" style="font-size: 1.05rem;">对象<sup>1</sup></a><a href="/tags/%E5%B9%B6%E5%8F%91%E5%AE%89%E5%85%A8/" style="font-size: 1.05rem;">并发安全<sup>1</sup></a><a href="/tags/%E5%BA%8F%E5%88%97%E5%8C%96/" style="font-size: 1.05rem;">序列化<sup>1</sup></a><a href="/tags/%E5%BC%82%E5%B8%B8/" style="font-size: 1.05rem;">异常<sup>1</sup></a><a href="/tags/%E6%8B%B7%E8%B4%9D/" style="font-size: 1.05rem;">拷贝<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" style="font-size: 1.05rem;">数据类型<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 1.05rem;">数据结构<sup>1</sup></a><a href="/tags/%E6%97%A5%E5%BF%97/" style="font-size: 1.05rem;">日志<sup>2</sup></a><a href="/tags/%E6%9F%A5%E8%AF%A2/" style="font-size: 1.05rem;">查询<sup>1</sup></a><a href="/tags/%E6%B3%9B%E5%9E%8B/" style="font-size: 1.05rem;">泛型<sup>1</sup></a><a href="/tags/%E6%B3%A8%E8%A7%A3/" style="font-size: 1.05rem;">注解<sup>1</sup></a><a href="/tags/%E7%AD%96%E7%95%A5/" style="font-size: 1.05rem;">策略<sup>1</sup></a><a href="/tags/%E7%B1%BB%E5%88%9D%E5%A7%8B%E5%8C%96/" style="font-size: 1.05rem;">类初始化<sup>1</sup></a><a href="/tags/%E7%B1%BB%E5%8A%A0%E8%BD%BD/" style="font-size: 1.05rem;">类加载<sup>1</sup></a><a href="/tags/%E7%B4%A2%E5%BC%95/" style="font-size: 1.05rem;">索引<sup>2</sup></a><a href="/tags/%E7%BA%BF%E7%A8%8B%E6%A8%A1%E5%9E%8B/" style="font-size: 1.05rem;">线程模型<sup>1</sup></a><a href="/tags/%E7%BA%BF%E7%A8%8B%E6%B1%A0/" style="font-size: 1.05rem;">线程池<sup>1</sup></a><a href="/tags/%E9%94%81/" style="font-size: 1.05rem;">锁<sup>2</sup></a><a href="/tags/%E9%9B%86%E7%BE%A4/" style="font-size: 1.05rem;">集群<sup>1</sup></a><a href="/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" style="font-size: 1.05rem;">面向对象<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/11/"><span class="card-archive-list-date">November 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/10/"><span class="card-archive-list-date">October 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">14</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/09/"><span class="card-archive-list-date">September 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">25</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/07/"><span class="card-archive-list-date">July 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">4</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" itemprop="url">计算机基础</a><i class="anzhiyufont anzhiyu-icon-angle-right post-meta-separator"></i><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" itemprop="url">操作系统</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/%E9%94%81/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>锁</span></a><a class="article-meta__tags" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>操作系统基础</span></a><a class="article-meta__tags" href="/tags/%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>进程管理</span></a></span></div></div><h1 class="post-title" itemprop="name headline">操作系统-进程管理</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2024-10-28T14:52:35.000Z" title="发表于 2024-10-28 22:52:35">2024-10-28</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2024-11-04T03:40:02.455Z" title="更新于 2024-11-04 11:40:02">2024-11-04</time></span></div><div class="meta-secondline"><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为桂林"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>桂林</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="https://xiaoyanfufu-io.oss-cn-guangzhou.aliyuncs.com/blog/202410282316960.png"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://example.com/2024/10/28/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/"><header><a class="post-meta-categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" itemprop="url">计算机基础</a><a class="post-meta-categories" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" itemprop="url">操作系统</a><a href="/tags/%E9%94%81/" tabindex="-1" itemprop="url">锁</a><a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80/" tabindex="-1" itemprop="url">操作系统基础</a><a href="/tags/%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/" tabindex="-1" itemprop="url">进程管理</a><h1 id="CrawlerTitle" itemprop="name headline">操作系统-进程管理</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">xiaoyan</span><time itemprop="dateCreated datePublished" datetime="2024-10-28T14:52:35.000Z" title="发表于 2024-10-28 22:52:35">2024-10-28</time><time itemprop="dateCreated datePublished" datetime="2024-11-04T03:40:02.455Z" title="更新于 2024-11-04 11:40:02">2024-11-04</time></header><h1 id="操作系统基础"><a href="#操作系统基础" class="headerlink" title="操作系统基础"></a>操作系统基础</h1><h2 id="操作系统概述"><a href="#操作系统概述" class="headerlink" title="操作系统概述"></a>操作系统概述</h2><p><strong>操作系统定义与功能</strong></p>
<p>操作系统（Operating System, OS）是计算机系统中至关重要的软件层，其主要职责是管理计算机硬件与软件资源，为应用程序提供统一的接口和服务。操作系统作为计算机的基石，确保了计算机系统的有效运行和资源的高效利用。</p>
<h2 id="操作系统主要功能"><a href="#操作系统主要功能" class="headerlink" title="操作系统主要功能"></a>操作系统主要功能</h2><ol>
<li><strong>硬件管理</strong>：操作系统负责管理计算机的硬件资源，包括但不限于中央处理器（CPU）、内存、输入输出设备等。通过硬件管理，操作系统能够合理分配和调度这些资源，以满足不同应用程序的需求。</li>
<li><strong>软件资源管理</strong>：操作系统不仅管理硬件资源，还负责管理软件资源，如文件系统、进程和线程等。通过有效的资源管理，操作系统确保了多个应用程序能够同时运行，且互不干扰。</li>
<li><strong>抽象与屏蔽复杂性</strong>：操作系统通过提供抽象层，屏蔽了底层硬件的复杂性，使得应用程序开发者无需深入了解硬件细节即可进行开发。这种抽象层包括文件系统、设备驱动程序等。</li>
<li><strong>内核（Kernel）</strong>：内核是操作系统的核心部分，负责执行最基本的任务，如内存管理、进程调度、文件系统管理以及硬件设备的管理。内核是操作系统与硬件之间的桥梁，确保了硬件资源的高效利用和应用程序的顺利执行。</li>
</ol>
<p><strong>内核与CPU的区别</strong></p>
<ul>
<li><strong>内核</strong>：内核是操作系统的一部分，属于软件层面。它主要负责管理计算机硬件与软件资源，提供系统调用接口，使得应用程序能够访问硬件资源。</li>
<li><strong>CPU</strong>：中央处理器（CPU）是计算机的硬件核心，负责执行指令和进行算术逻辑运算。CPU是硬件资源的一部分，其功能由操作系统通过内核进行管理和调度。</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaoyanfufu-io.oss-cn-guangzhou.aliyuncs.com/blog/202410282316960.png"></p>
<h2 id="用户态和内核态"><a href="#用户态和内核态" class="headerlink" title="用户态和内核态"></a>用户态和内核态</h2><h3 id="用户态与内核态的概念"><a href="#用户态与内核态的概念" class="headerlink" title="用户态与内核态的概念"></a>用户态与内核态的概念</h3><p>在操作系统中，进程的运行环境可以根据其访问系统资源的权限分为两种级别：用户态（User Mode）和内核态（Kernel Mode）。</p>
<ul>
<li><strong>用户态</strong>：在用户态下运行的进程仅能访问其自身的用户空间数据，权限较低。当应用程序需要执行某些需要更高权限的操作，如文件读写、网络通信、进程管理等，必须通过系统调用（System Call）向操作系统发起请求，从而进入内核态。</li>
<li><strong>内核态</strong>：内核态赋予进程几乎完全的系统资源访问权限，允许其执行底层操作，如直接访问硬件、管理内存、调度进程等。当操作系统接收到来自用户态进程的系统调用请求时，会将该进程切换到内核态，执行相应的内核代码，完成后再次切换回用户态。</li>
</ul>
<p>内核态的权限级别远高于用户态，因此能够执行更为底层的系统操作。然而，进入内核态涉及复杂的上下文切换和权限检查，开销较大。因此，应尽量减少内核态的切换次数，以提升系统性能和稳定性。</p>
<h3 id="用户态与内核态的必要性"><a href="#用户态与内核态的必要性" class="headerlink" title="用户态与内核态的必要性"></a>用户态与内核态的必要性</h3><p>用户态与内核态的划分是操作系统安全性和稳定性的基石。其核心原因在于CPU指令集中的特权指令（Privileged Instructions）。</p>
<ul>
<li><strong>特权指令</strong>：某些CPU指令具有潜在的危险性，如直接操作硬件、修改内存映射、中断处理等。这些指令若被普通用户程序随意执行，可能导致系统崩溃或数据损坏。因此，操作系统将这些指令的执行权限限制在内核态，确保只有内核代码能够执行这些特权指令。</li>
<li><strong>资源隔离与保护</strong>：如果所有进程都运行在内核态，那么每个进程都将拥有对系统资源的完全访问权限，这将导致资源竞争和潜在的冲突，严重影响系统的性能和效率。通过将进程分为用户态和内核态，操作系统能够有效隔离不同进程的资源访问，防止恶意或意外的操作对系统造成损害。</li>
</ul>
<h2 id="系统调用"><a href="#系统调用" class="headerlink" title="系统调用"></a>系统调用</h2><h3 id="什么是系统调用"><a href="#什么是系统调用" class="headerlink" title="什么是系统调用"></a>什么是系统调用</h3><p>在现代操作系统中，用户程序通常运行在用户态（User Mode），而操作系统内核运行在内核态（Kernel Mode）。当用户程序需要执行某些特权操作（如访问硬件资源、管理进程、操作文件系统等）时，由于用户态的权限限制，无法直接执行这些操作。此时，程序需要通过系统调用（System Call）向操作系统内核发起请求，由内核代为执行这些特权操作。</p>
<p>系统调用是用户程序与操作系统内核之间的接口，它提供了一种机制，使得用户程序能够安全、受控地访问内核提供的各种服务。根据其功能，系统调用大致可以分为以下几类：</p>
<ul>
<li><strong>文件管理</strong>：包括文件的读取、写入、创建、删除、重命名、权限管理等操作。</li>
<li><strong>设备管理</strong>：涉及对硬件设备的请求、释放、配置等操作，如I&#x2F;O设备的读写、设备的初始化等。</li>
<li><strong>进程管理</strong>：包括进程的创建、终止、调度、同步、通信等操作，如fork()、exec()、wait()、signal()等。</li>
<li><strong>内存管理</strong>：涉及内存的分配、回收、映射、保护等操作，如malloc()、free()、mmap()等。</li>
</ul>
<p>系统调用与普通函数库调用（Library Call）在形式上相似，但本质上存在显著差异。普通函数库调用是在用户态下执行的，调用的是预先编译好的本地函数，而系统调用则是通过特定的指令（如x86架构中的<code>int 0x80</code>或<code>syscall</code>指令）触发，将控制权转移到内核态，由内核执行相应的操作。</p>
<h3 id="系统调用过程"><a href="#系统调用过程" class="headerlink" title="系统调用过程"></a>系统调用过程</h3><p>系统调用的执行过程涉及用户态与内核态之间的切换，具体步骤如下：</p>
<ol>
<li><strong>用户态发起系统调用</strong>：当用户程序需要执行特权操作时，它会通过特定的指令（如<code>syscall</code>）发起系统调用。此时，程序会传递系统调用号（System Call Number）以及必要的参数，这些参数通常通过寄存器传递。</li>
<li><strong>中断（Trap）</strong>：系统调用指令触发一个中断（Trap），导致CPU从用户态切换到内核态。中断发生后，当前用户程序的执行被挂起，CPU的控制权被转移到操作系统内核。</li>
<li><strong>内核态处理系统调用</strong>：内核接收到系统调用请求后，根据系统调用号查找相应的内核函数（通常位于系统调用表中），并执行该函数。内核函数负责处理用户程序请求的操作，如访问文件、管理设备、调度进程等。</li>
<li><strong>返回用户态</strong>：内核完成系统调用后，会通过特定的指令（如<code>iret</code>或<code>sysret</code>）将控制权返回给用户程序。此时，CPU从内核态切换回用户态，用户程序继续执行，并从系统调用返回点恢复执行。</li>
<li><strong>结果返回</strong>：系统调用的结果（如文件读取的数据、进程创建的状态等）通常通过寄存器或内存返回给用户程序。用户程序根据返回值判断系统调用是否成功，并进行相应的处理。</li>
</ol>
<p>系统调用的过程涉及用户态与内核态之间的多次切换，这种切换带来了一定的开销，但同时也确保了操作系统的安全性和稳定性。通过系统调用，用户程序能够在受控的环境下访问内核资源，避免了直接操作硬件可能带来的风险。</p>
<h1 id="进程与线程"><a href="#进程与线程" class="headerlink" title="进程与线程"></a>进程与线程</h1><h2 id="什么是进程和线程"><a href="#什么是进程和线程" class="headerlink" title="什么是进程和线程"></a>什么是进程和线程</h2><ul>
<li><strong>进程</strong>：进程是计算机程序正在运行的一个实例，是操作系统进行资源分配和调度的基本单位。例如，打开并运行的微信应用程序就是一个进程。每个进程都有独立的内存空间、文件描述符、网络连接等资源。</li>
<li><strong>线程</strong>：线程是进程内的一个执行单元，也被称为轻量级进程。一个进程可以包含多个线程，这些线程共享进程的资源（如内存空间、文件句柄、网络连接等），但每个线程有自己的独立栈和寄存器状态。例如，在运行的微信应用程序中，可能有一个线程专门负责推送用户发出的信息，另一个线程负责接收和处理用户输入。</li>
</ul>
<h2 id="进程和线程的区别"><a href="#进程和线程的区别" class="headerlink" title="进程和线程的区别"></a>进程和线程的区别</h2><ul>
<li><strong>资源分配</strong>：进程是操作系统中最小的资源分配单位，每个进程拥有独立的内存空间和系统资源。而线程是进程内的最小执行单位，共享同一进程的资源，如内存中的堆和元数据空间，但每个线程有自己的私有栈和寄存器状态。</li>
<li><strong>切换开销</strong>：由于线程更加轻量，线程之间的上下文切换开销较小且较快。相比之下，进程之间的上下文切换开销较大，因为需要保存和恢复更多的状态信息，如页表、文件描述符等。</li>
<li><strong>独立性</strong>：进程之间是相互独立的，一个进程的崩溃通常不会影响其他进程。而线程则不一定，因为同一进程下的线程共享资源，一个线程的错误可能会影响其他线程，甚至导致整个进程崩溃。</li>
</ul>
<h2 id="为什么有进程了还需要线程"><a href="#为什么有进程了还需要线程" class="headerlink" title="为什么有进程了还需要线程"></a>为什么有进程了还需要线程</h2><ol>
<li><strong>切换开销</strong>：进程切换的开销较大，而线程切换的开销较小。通过使用线程，可以在同一进程内并发执行多个任务，减少上下文切换的开销。</li>
<li><strong>并发执行</strong>：多线程可以并发执行任务，增加CPU的利用率。例如，一个进程可以同时处理用户输入、网络通信和后台任务，而无需等待某个任务完成后再处理下一个任务。</li>
<li><strong>资源共享</strong>：同一进程下的线程可以共享进程的资源，如内存空间、文件句柄等。这使得线程间的通信更加高效，无需进行系统调用，减少了开销。</li>
<li><strong>响应性</strong>：通过使用多线程，应用程序可以更好地响应用户操作。例如，一个线程可以处理用户界面更新，另一个线程可以处理后台计算任务，从而提高用户体验。</li>
</ol>
<h2 id="为什么要有多线程"><a href="#为什么要有多线程" class="headerlink" title="为什么要有多线程"></a>为什么要有多线程</h2><p>多线程技术在现代计算机系统中扮演着至关重要的角色，其主要优势体现在以下几个方面：</p>
<h3 id="提升系统整体使用效率"><a href="#提升系统整体使用效率" class="headerlink" title="提升系统整体使用效率"></a>提升系统整体使用效率</h3><ol>
<li><strong>轻量级和低开销</strong>：线程是进程内的执行单元，相比于进程，线程更加轻量化，创建和销毁的开销较小。线程之间的上下文切换开销也远小于进程间的切换，这使得系统能够更高效地管理和调度多个任务。</li>
<li><strong>资源共享</strong>：同一进程下的多个线程共享进程的资源，如内存空间、文件句柄、网络连接等。这种资源共享机制减少了资源复制的开销，提高了资源利用率。</li>
<li><strong>并发处理</strong>：在单核CPU时代，多线程可以通过时间片轮转（Time-Slicing）机制实现并发执行，避免因单一线程阻塞而导致整个进程停滞。例如，当一个线程进行I&#x2F;O操作时，CPU可以切换到其他线程继续执行，从而提高CPU的利用率。</li>
<li><strong>多核利用</strong>：在多核CPU时代，多线程能够充分利用多核处理器的并行计算能力。通过将任务分配到不同的线程，系统可以在多个核心上并行执行任务，显著提升整体性能。</li>
</ol>
<h3 id="应对互联网发展带来的高并发"><a href="#应对互联网发展带来的高并发" class="headerlink" title="应对互联网发展带来的高并发"></a>应对互联网发展带来的高并发</h3><ol>
<li><strong>高并发处理</strong>：随着互联网的快速发展，现代应用系统需要处理大量的并发请求。例如，在电商平台的“双11”购物节期间，系统需要应对数百万级别的并发访问。多线程并发编程能够显著提高系统的并发处理能力，确保在高负载情况下系统仍能稳定运行。</li>
<li><strong>响应性和用户体验</strong>：多线程技术使得应用程序能够更好地响应用户操作。例如，一个线程可以处理用户界面更新，另一个线程可以处理后台计算任务，从而提高用户体验。</li>
<li><strong>分布式系统</strong>：在分布式系统中，多线程技术可以用于实现负载均衡和任务分发。通过将任务分配到不同的线程或进程，系统可以更高效地利用分布式资源，提高整体系统的吞吐量和可靠性。</li>
</ol>
<h2 id="线程间同步方式"><a href="#线程间同步方式" class="headerlink" title="线程间同步方式"></a>线程间同步方式</h2><p>线程同步是指在多线程环境中，确保多个线程能够有序地访问共享资源，避免出现资源冲突和竞态条件。线程同步机制是多线程编程中的关键技术，常见的同步方式包括互斥锁、读写锁、信号量、屏障和事件等。</p>
<p><strong>1.互斥锁（Mutex）</strong></p>
<p>互斥锁（Mutual Exclusion Lock）是最基本的同步机制之一，用于确保在同一时间段内只有一个线程能够访问共享资源。当一个线程获取到互斥锁后，其他试图获取该锁的线程将被阻塞，直到锁被释放。</p>
<p>在Java中，可以使用<code>synchronized</code>关键字或<code>Lock</code>接口来实现互斥锁。适用于需要独占访问共享资源的场景，如临界区保护。</p>
<p><strong>2.读写锁（ReadWrite Lock）</strong></p>
<p>读写锁允许多个线程同时读取共享资源，但只允许一个线程写入共享资源。读写锁适用于读操作远多于写操作的场景，可以提高并发性能。</p>
<p>在Java中，可以使用<code>ReentrantReadWriteLock</code>类来实现读写锁。适用于读多写少的场景，如缓存系统、配置管理等。</p>
<p><strong>3.信号量（Semaphore）</strong></p>
<p>信号量是一种计数器，用于控制同时访问共享资源的线程数量。信号量可以允许多个线程同时访问共享资源，但需要限制最大并发数。</p>
<p>在Java中，可以使用<code>Semaphore</code>类来实现信号量。适用于需要限制并发访问数量的场景，如连接池管理、资源池管理等。</p>
<p><strong>4.屏障（Barrier）</strong></p>
<p>屏障是一种同步原语，用于确保一组线程在某个点上同步。当一个线程到达屏障点时，它会被阻塞，直到所有线程都到达屏障点，然后所有线程继续执行。</p>
<p>在Java中，可以使用<code>CyclicBarrier</code>类来实现屏障。适用于需要多个线程协同工作的场景，如并行计算、数据分片处理等。</p>
<p><strong>5.事件（Event）</strong></p>
<p>事件是一种通知机制，用于在多线程之间传递信号，实现线程间的同步。事件可以用于通知一个或多个线程某个条件已经满足，从而触发相应的操作。</p>
<p>在Java中，可以使用<code>java.util.concurrent.CountDownLatch</code>或<code>java.util.concurrent.Phaser</code>等类来实现事件通知机制。适用于需要线程间协作和通知的场景，如任务调度、事件驱动编程等。</p>
<h2 id="PCB（Process-Control-Block）"><a href="#PCB（Process-Control-Block）" class="headerlink" title="PCB（Process Control Block）"></a>PCB（Process Control Block）</h2><h3 id="PCB是什么"><a href="#PCB是什么" class="headerlink" title="PCB是什么"></a>PCB是什么</h3><p>PCB（Process Control Block）即进程控制块，是操作系统中用于管理和跟踪进程的核心数据结构。每个进程在操作系统中都有一个唯一的PCB，用于存储与该进程相关的所有信息。PCB是操作系统进行进程调度和管理的基础，它记录了进程的当前状态、资源需求、调度信息等关键数据。</p>
<p>当操作系统创建一个新的进程时，会为该进程分配一个唯一的进程ID（PID），并为该进程创建一个PCB。随着进程的执行，PCB中的内容会不断更新，操作系统根据这些信息来管理和调度进程。</p>
<h3 id="PCB包含的信息"><a href="#PCB包含的信息" class="headerlink" title="PCB包含的信息"></a>PCB包含的信息</h3><p>PCB通常包含以下几类信息：</p>
<ol>
<li>进程描述信息</li>
</ol>
<ul>
<li><strong>进程ID（PID）</strong>：唯一标识进程的整数。</li>
<li><strong>进程名称</strong>：通常是可执行文件的名称。</li>
<li><strong>用户ID（UID）</strong>：标识进程所属的用户。</li>
<li><strong>组ID（GID）</strong>：标识进程所属的用户组。</li>
</ul>
<ol start="2">
<li>进程调度信息</li>
</ol>
<ul>
<li><strong>进程状态</strong>：标识进程当前的状态，如运行态（Running）、就绪态（Ready）、阻塞态（Blocked）等。</li>
<li><strong>优先级</strong>：进程的调度优先级，用于决定进程在调度队列中的位置。</li>
<li><strong>阻塞原因</strong>：如果进程处于阻塞状态，记录阻塞的原因，如等待I&#x2F;O操作完成、等待信号量等。</li>
<li><strong>调度队列指针</strong>：指向进程所在调度队列的指针，用于进程调度。</li>
</ul>
<ol start="3">
<li>资源需求状态</li>
</ol>
<ul>
<li><strong>内存需求</strong>：进程所需的内存空间大小及分配情况。</li>
<li><strong>CPU时间</strong>：进程已经使用的CPU时间以及剩余的CPU时间片。</li>
<li><strong>设备资源</strong>：进程所需的设备资源，如文件描述符、网络连接等。</li>
</ul>
<ol start="4">
<li>状态机的处理状态</li>
</ol>
<ul>
<li><strong>寄存器状态</strong>：进程在切换时需要保存的寄存器值，如通用寄存器、浮点寄存器等。</li>
<li><strong>程序计数器（PC）</strong>：记录进程当前执行的指令地址。</li>
<li><strong>程序状态字（PSW）</strong>：记录进程的当前状态信息，如条件码、中断允许位等。</li>
<li><strong>用户栈指针</strong>：指向进程的用户栈顶地址。</li>
<li><strong>内核栈指针</strong>：指向进程的内核栈顶地址。</li>
</ul>
<ol start="5">
<li>其他信息</li>
</ol>
<ul>
<li><strong>信号处理信息</strong>：记录进程对信号的处理方式，如忽略、捕获、默认处理等。</li>
<li><strong>文件描述符表</strong>：记录进程打开的文件描述符及其相关信息。</li>
<li><strong>共享内存段</strong>：记录进程与其他进程共享的内存段信息。</li>
<li><strong>线程信息</strong>：如果操作系统支持多线程，PCB中可能还包括线程的相关信息。</li>
</ul>
<p>PCB是操作系统中用于管理和调度进程的关键数据结构，它包含了进程的所有重要信息，如进程描述信息、调度信息、资源需求状态、状态机的处理状态等。操作系统通过PCB来跟踪和管理进程的生命周期，确保进程能够正确地执行和调度。PCB的设计和实现直接影响操作系统的性能和稳定性，是操作系统内核的重要组成部分。</p>
<h2 id="进程的状态"><a href="#进程的状态" class="headerlink" title="进程的状态"></a>进程的状态</h2><p>进程状态是指进程在其生命周期中所处的不同阶段。与线程状态类似，进程状态可以分为以下五种主要状态：</p>
<p><strong>1. 创建状态（New）</strong>：当一个进程被创建时，它首先进入创建状态。在这个阶段，操作系统为进程分配必要的资源，如内存空间、文件描述符等，并初始化进程控制块（PCB）。此时，进程尚未准备好执行，仍处于初始化阶段。</p>
<p><strong>2. 就绪状态（Ready）</strong>：当进程完成初始化并准备好执行时，它进入就绪状态。在就绪状态下，进程已经获得了除CPU之外的所有必要资源，等待操作系统调度器分配CPU时间片。一旦调度器选择该进程执行，它将进入运行状态。</p>
<p><strong>3. 运行状态（Running）</strong>：当进程被调度器选中并分配到CPU时间片时，它进入运行状态。在运行状态下，进程正在执行其任务，CPU正在处理该进程的指令。如果进程的时间片用完或需要等待某些资源（如I&#x2F;O操作），它将退出运行状态，进入其他状态。</p>
<p><strong>4. 阻塞状态（Blocked）</strong>：当进程需要等待某些事件（如I&#x2F;O操作完成、信号量释放等）时，它进入阻塞状态。在阻塞状态下，进程暂时停止执行，直到等待的事件发生。一旦事件发生，进程将重新进入就绪状态，等待再次被调度执行。</p>
<p><strong>5. 结束状态（Terminated）</strong>：当进程完成其任务或因某些原因（如异常、用户终止）需要退出时，它进入结束状态。在结束状态下，进程正在从系统中消失，操作系统会回收分配给该进程的资源，并销毁其PCB。进程的结束状态可以是正常退出（如任务完成）或异常退出（如崩溃、被终止）。</p>
<h3 id="状态转换"><a href="#状态转换" class="headerlink" title="状态转换"></a>状态转换</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://cdn.xiaolincoding.com//picgo/1715669823633-dcd21d9d-1bc9-44b0-b708-7afda68c2257.webp" alt="进程状态转换"></p>
<p>进程状态之间的转换通常由操作系统内核管理和控制，具体转换如下：</p>
<ul>
<li><strong>创建状态 -&gt; 就绪状态</strong>：进程初始化完成后，进入就绪状态，等待调度。</li>
<li><strong>就绪状态 -&gt; 运行状态</strong>：调度器选择就绪状态的进程执行，进程进入运行状态。</li>
<li><strong>运行状态 -&gt; 就绪状态</strong>：当进程的时间片用完或被抢占时，进程回到就绪状态。</li>
<li><strong>运行状态 -&gt; 阻塞状态</strong>：当进程需要等待某些事件时，进入阻塞状态。</li>
<li><strong>阻塞状态 -&gt; 就绪状态</strong>：等待的事件发生后，进程回到就绪状态。</li>
<li><strong>运行状态 -&gt; 结束状态</strong>：进程完成任务或被终止，进入结束状态。</li>
</ul>
<p>进程通信（Inter-Process Communication, IPC）是指在操作系统中，不同进程之间进行数据交换和信息传递的机制。进程通信是多进程编程中的关键技术，常见的通信方式包括管道、有名管道、信号、消息队列、共享内存、信号量和套接字等。</p>
<h2 id="进程通信方式"><a href="#进程通信方式" class="headerlink" title="进程通信方式"></a>进程通信方式</h2><p><strong>1. 管道（Pipe）&#x2F;匿名管道</strong></p>
<p>管道是一种半双工的通信方式，用于具有亲属关系的进程（如父子进程或兄弟进程）之间的通信。管道数据存放在内存中，遵循先进先出（FIFO）原则。</p>
<ul>
<li>特点：半双工通信，数据单向流动；只能在具有亲属关系的进程间使用。</li>
<li>应用场景：适用于简单的父子进程间通信。</li>
</ul>
<p><strong>2. 有名管道（Named Pipe）</strong></p>
<p>有名管道解决了匿名管道只能在具有亲属关系的进程间通信的限制，允许任意两个进程进行通信。有名管道通常存放在文件系统中，具有唯一的名称。</p>
<ul>
<li>特点：全双工通信，数据双向流动；可以在任意两个进程间使用。</li>
<li>应用场景：适用于需要跨进程通信的场景。</li>
</ul>
<p><strong>3. 信号（Signal）</strong></p>
<p>信号是一种异步通信机制，用于通知进程某个事件已经发生。信号通常用于处理异常情况或通知进程某些状态变化。</p>
<ul>
<li>特点：异步通信，信号处理复杂；信号传递的信息量有限。</li>
<li>应用场景：适用于进程间的事件通知和异常处理。</li>
</ul>
<p><strong>4. 消息队列（Message Queue）</strong></p>
<p>消息队列是一种消息的链表，存放在操作系统的内核中。消息队列具有特定的消息格式，并以特定的消息队列标识符标识。消息队列遵循先进先出原则，但与管道不同的是，消息队列可以传递结构化的消息。</p>
<ul>
<li>特点：支持结构化消息传递；消息队列存放在内核中，生命周期较长。</li>
<li>应用场景：适用于需要传递复杂消息的进程间通信。</li>
</ul>
<p><strong>5. 共享内存（Shared Memory）</strong></p>
<p>共享内存允许多个进程访问同一块内存区域，进程可以直接读写共享内存中的数据，从而实现高效的数据交换。共享内存需要引入锁机制来避免数据竞争。</p>
<ul>
<li>特点：高效的数据交换；需要锁机制来避免数据竞争。</li>
<li>应用场景：适用于需要频繁交换大量数据的进程间通信。</li>
</ul>
<p><strong>6. 信号量（Semaphore）</strong></p>
<p>信号量是一种计数器，用于控制多个进程对共享资源的访问。信号量通常用于实现进程间的同步，确保在同一时刻只有一个或多个进程访问共享资源。</p>
<ul>
<li>特点：用于进程同步和资源控制；控制同时访问共享资源的最大进程数。</li>
<li>应用场景：适用于需要控制资源访问的进程间通信。</li>
</ul>
<p><strong>7. 套接字（Socket）</strong></p>
<p>套接字是一种网络通信机制，用于在不同主机之间进行进程间通信。套接字支持多种协议（如TCP、UDP），可以实现端到端的通信。</p>
<ul>
<li>特点：支持跨主机的进程间通信；支持多种协议。</li>
<li>应用场景：适用于分布式系统中的进程间通信。</li>
</ul>
<h2 id="进程的调度算法"><a href="#进程的调度算法" class="headerlink" title="进程的调度算法"></a>进程的调度算法</h2><p>进程调度算法是操作系统中用于决定哪个进程将获得CPU时间片的关键机制。不同的调度算法有不同的特点和适用场景，常见的调度算法包括先来先服务（FCFS）、短作业优先（SJF）、时间片轮转（RR）、优先级调度（Priority）和多级反馈队列（MFQ）等。</p>
<h3 id="1-先来先服务（FCFS）"><a href="#1-先来先服务（FCFS）" class="headerlink" title="1. 先来先服务（FCFS）"></a>1. 先来先服务（FCFS）</h3><p>先来先服务（First-Come, First-Served, FCFS）是一种简单的调度算法，按照进程进入就绪队列的顺序进行调度。最先进入就绪队列的进程将最先获得CPU资源，直到该进程执行完成或因某些事件阻塞放弃CPU占用。</p>
<ul>
<li><strong>特点</strong>：简单易实现；非抢占式调度；可能导致长作业长时间占用CPU，造成“饥饿”现象。</li>
<li><strong>应用场景</strong>：适用于作业执行时间差异不大的场景。</li>
</ul>
<h3 id="2-短作业优先（SJF）"><a href="#2-短作业优先（SJF）" class="headerlink" title="2. 短作业优先（SJF）"></a>2. 短作业优先（SJF）</h3><p>短作业优先（Shortest Job First, SJF）是一种优先调度预计执行时间最短的进程的算法。从就绪队列中取出预计花费时间最短的任务，为其分配资源，直到任务执行完成或因某些事件阻塞放弃CPU占用。</p>
<ul>
<li><strong>特点</strong>：平均等待时间最短；非抢占式调度；可能导致长作业长时间等待，造成“饥饿”现象。</li>
<li><strong>应用场景</strong>：适用于作业执行时间差异较大的场景。</li>
</ul>
<h3 id="3-时间片轮转（RR）"><a href="#3-时间片轮转（RR）" class="headerlink" title="3. 时间片轮转（RR）"></a>3. 时间片轮转（RR）</h3><p>时间片轮转（Round Robin, RR）是一种公平的调度算法，为每个进程分配固定的时间片（Time Slice），即允许进程运行的时间。当时间片用完后，进程被抢占并放回就绪队列的末尾，等待下一次调度。</p>
<ul>
<li><strong>特点</strong>：公平调度；抢占式调度；时间片大小影响调度性能。</li>
<li><strong>应用场景</strong>：适用于需要公平分配CPU资源的场景。</li>
</ul>
<h3 id="4-优先级调度（Priority）"><a href="#4-优先级调度（Priority）" class="headerlink" title="4. 优先级调度（Priority）"></a>4. 优先级调度（Priority）</h3><p>优先级调度（Priority Scheduling）为每个进程分配一个优先级，优先级高的进程优先获得CPU资源。具有相同优先级的进程按照FCFS的方式执行。</p>
<ul>
<li><strong>特点</strong>：支持优先级调度；可能导致低优先级进程长时间等待，造成“饥饿”现象。</li>
<li><strong>应用场景</strong>：适用于需要区分任务优先级的场景。</li>
</ul>
<h3 id="5-多级反馈队列（MFQ）"><a href="#5-多级反馈队列（MFQ）" class="headerlink" title="5. 多级反馈队列（MFQ）"></a>5. 多级反馈队列（MFQ）</h3><p>多级反馈队列（Multi-Level Feedback Queue, MFQ）是一种复杂的调度算法，结合了优先级调度和时间片轮转的特点。系统维护多个就绪队列，每个队列具有不同的优先级。新加入的任务放在最高优先级的就绪队列，当分配的时间片耗完但任务仍未完成时，将该任务放入次优先级队列，依次降级，直到任务完成。</p>
<ul>
<li><strong>特点</strong>：支持优先级和时间片轮转；动态调整任务优先级；减少“饥饿”现象。</li>
<li><strong>应用场景</strong>：适用于需要动态调整任务优先级的场景。</li>
</ul>
<h2 id="僵尸进程与孤儿进程"><a href="#僵尸进程与孤儿进程" class="headerlink" title="僵尸进程与孤儿进程"></a>僵尸进程与孤儿进程</h2><p>在Unix&#x2F;Linux系统中，进程通过<code>fork()</code>系统调用创建子进程，子进程是父进程的副本，拥有独立的进程控制块（PCB）。子进程与父进程相互独立，即使父进程终止，子进程仍然可以继续运行。</p>
<h3 id="僵尸进程"><a href="#僵尸进程" class="headerlink" title="僵尸进程"></a>僵尸进程</h3><p>当子进程调用<code>exit()</code>系统调用结束自己的生命时，内核会释放子进程占用的资源，但子进程的PCB仍然保留在系统中。这些信息只有在父进程调用<code>wait()</code>或<code>waitpid()</code>系统调用时才会被释放，以便父进程了解子进程的退出状态。</p>
<p><strong>僵尸进程</strong>是指子进程已经终止，但父进程没有调用<code>wait()</code>或<code>waitpid()</code>系统调用来获取子进程的退出状态，导致子进程的PCB没有及时释放。僵尸进程虽然不再运行，但其PCB仍然占用系统资源，可能导致资源泄漏。</p>
<h3 id="孤儿进程"><a href="#孤儿进程" class="headerlink" title="孤儿进程"></a>孤儿进程</h3><p><strong>孤儿进程</strong>是指父进程已经终止，但子进程仍然在运行的进程。由于父进程已经终止，子进程无法通过父进程调用<code>wait()</code>或<code>waitpid()</code>系统调用，导致其PCB无法被回收。操作系统会检测到孤儿进程，并将其父进程设置为<code>init</code>进程（进程ID为1），由<code>init</code>进程负责回收孤儿进程的PCB。</p>
<h3 id="如何检测僵尸进程"><a href="#如何检测僵尸进程" class="headerlink" title="如何检测僵尸进程"></a>如何检测僵尸进程</h3><p>在Linux系统中，可以使用以下方法检测僵尸进程：</p>
<ol>
<li><strong>使用<code>top</code>命令</strong>：<ul>
<li>打开终端并输入<code>top</code>命令。</li>
<li>在<code>top</code>命令的输出中，<code>S</code>（Status）列下标记为”Z”的进程即为僵尸进程。</li>
</ul>
</li>
<li><strong>使用<code>ps</code>命令</strong>：<ul>
<li>打开终端并输入<code>ps aux</code>命令。</li>
<li>在<code>ps</code>命令的输出中，<code>STAT</code>列下标记为”Z”的进程即为僵尸进程。</li>
</ul>
</li>
<li>**使用<code>ps</code>命令结合<code>grep</code>**：<ul>
<li>打开终端并输入<code>ps aux | grep Z</code>命令。</li>
<li>该命令会列出所有状态为”Z”的进程，即僵尸进程。</li>
</ul>
</li>
</ol>
<h1 id="死锁"><a href="#死锁" class="headerlink" title="死锁"></a>死锁</h1><h2 id="什么是死锁？"><a href="#什么是死锁？" class="headerlink" title="什么是死锁？"></a>什么是死锁？</h2><p>死锁是指在多线程或多进程环境中，两个或多个线程（或进程）因为资源被占用而陷入相互循环等待的状态，导致所有相关线程（或进程）都无法继续执行。死锁是一种常见的并发问题，可能导致系统停滞，影响系统的稳定性和性能。</p>
<h2 id="死锁的必要条件"><a href="#死锁的必要条件" class="headerlink" title="死锁的必要条件"></a>死锁的必要条件</h2><p>死锁的发生必须同时满足以下四个必要条件：</p>
<ol>
<li><strong>互斥（Mutual Exclusion）</strong>：至少有一个资源必须处于非共享模式，即一次只能被一个线程（或进程）占用。如果另一个线程（或进程）请求该资源，它必须等待资源被释放。</li>
<li><strong>非抢占性（No Preemption）</strong>：资源不能被强制剥夺，只能由持有资源的线程（或进程）主动释放。其他线程（或进程）不能强行抢占资源。</li>
<li><strong>持有等待（Hold and Wait）</strong>：线程（或进程）在请求其他资源时，必须持有至少一个资源。即线程（或进程）在等待其他资源的同时，不会释放已持有的资源。</li>
<li><strong>循环等待（Circular Wait）</strong>：存在一组线程（或进程），每个线程（或进程）都在等待下一个线程（或进程）持有的资源，形成一个闭环。</li>
</ol>
<h2 id="死锁解决方案"><a href="#死锁解决方案" class="headerlink" title="死锁解决方案"></a>死锁解决方案</h2><p>死锁问题与其四个必要条件是充要关系，即只要破坏四个条件中的任意一个条件，就可以解除死锁状态。常见的死锁解决方案可以概括为预防、避免、检测和解除。</p>
<h3 id="1-预防死锁（Deadlock-Prevention）"><a href="#1-预防死锁（Deadlock-Prevention）" class="headerlink" title="1. 预防死锁（Deadlock Prevention）"></a>1. 预防死锁（Deadlock Prevention）</h3><p>预防死锁是通过破坏死锁的必要条件来避免死锁的发生。具体方法包括：</p>
<ul>
<li><strong>破坏互斥条件</strong>：允许资源共享，但这通常不现实，因为某些资源天生就是独占的。</li>
<li><strong>破坏非抢占条件</strong>：允许资源被强制剥夺，但这可能导致资源状态不一致，通常不推荐。</li>
<li><strong>破坏持有等待条件</strong>：要求线程（或进程）在请求资源时必须释放所有已持有的资源，但这可能导致资源利用率降低。</li>
<li><strong>破坏循环等待条件</strong>：对资源进行排序，要求线程（或进程）按照固定顺序请求资源，避免形成循环等待。</li>
</ul>
<h3 id="2-避免死锁（Deadlock-Avoidance）"><a href="#2-避免死锁（Deadlock-Avoidance）" class="headerlink" title="2. 避免死锁（Deadlock Avoidance）"></a>2. 避免死锁（Deadlock Avoidance）</h3><p>避免死锁是通过动态分配资源，确保系统始终处于安全状态，避免进入死锁状态。常见的避免死锁算法包括：</p>
<ul>
<li><strong>银行家算法（Banker’s Algorithm）</strong>：在分配资源前，预先检查分配是否会导致系统进入不安全状态，只有在安全状态下才进行资源分配。</li>
</ul>
<h3 id="3-检测死锁（Deadlock-Detection）"><a href="#3-检测死锁（Deadlock-Detection）" class="headerlink" title="3. 检测死锁（Deadlock Detection）"></a>3. 检测死锁（Deadlock Detection）</h3><p>检测死锁是通过周期性地检查系统状态，判断是否存在死锁。常见的检测方法包括：</p>
<ul>
<li><strong>资源分配图（Resource Allocation Graph）</strong>：通过构建资源分配图，检查是否存在环路，判断是否存在死锁。</li>
<li><strong>等待图（Wait-For Graph）</strong>：通过构建等待图，检查是否存在环路，判断是否存在死锁。</li>
</ul>
<h3 id="4-解除死锁（Deadlock-Recovery）"><a href="#4-解除死锁（Deadlock-Recovery）" class="headerlink" title="4. 解除死锁（Deadlock Recovery）"></a>4. 解除死锁（Deadlock Recovery）</h3><p>解除死锁是通过强制终止某些线程（或进程）或剥夺某些资源，打破死锁状态。常见的解除死锁方法包括：</p>
<ul>
<li><strong>进程终止</strong>：强制终止一个或多个陷入死锁的线程（或进程），释放其占用的资源。</li>
<li><strong>资源抢占</strong>：选择一个线程（或进程），强制剥夺其占用的资源，分配给其他线程（或进程）。</li>
</ul>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/images/user.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/images/user.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">xiaoyan</div><div class="post-copyright__author_desc">无限进步。</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="http://example.com/2024/10/28/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://example.com/2024/10/28/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/')">操作系统-进程管理</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://example.com/2024/10/28/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=操作系统-进程管理&amp;url=http://example.com/2024/10/28/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/&amp;pic=https://xiaoyanfufu-io.oss-cn-guangzhou.aliyuncs.com/blog/202410282316960.png" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">XIAOYAN</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__category-list"><a class="post-meta__box__categoryes" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/"><span class="categoryes-punctuation"> <i class="anzhiyufont anzhiyu-icon-inbox"></i></span>计算机基础<span class="categoryesPageCount">6</span></a><a class="post-meta__box__categoryes" href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"><span class="categoryes-punctuation"> <i class="anzhiyufont anzhiyu-icon-inbox"></i></span>操作系统<span class="categoryesPageCount">1</span></a></div><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/%E9%94%81/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>锁<span class="tagsPageCount">2</span></a><a class="post-meta__box__tags" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>操作系统基础<span class="tagsPageCount">1</span></a><a class="post-meta__box__tags" href="/tags/%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>进程管理<span class="tagsPageCount">1</span></a></div></div><div class="post_share"><div class="social-share" data-image="https://pic1.zhimg.com/v2-b76d79b11c3e8dd25f3c6abae8889a88_720w.jpg?source=172ae18b" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/10/27/%E5%88%86%E5%B8%83%E5%BC%8F-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaoyanfufu-io.oss-cn-guangzhou.aliyuncs.com/blog/202410281041645.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">分布式-分布式事务</div></div></a></div><div class="next-post pull-right"><a href="/2024/11/03/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96-%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB%E4%B8%8E%E5%86%B7%E7%83%AD%E5%88%86%E7%A6%BB/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaoyanfufu-io.oss-cn-guangzhou.aliyuncs.com/blog/202411041125092.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">数据库优化-读写分离与冷热分离</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/2024/09/15/MySQL-%E4%BA%8B%E5%8A%A1%E4%B8%8E%E6%97%A5%E5%BF%97/" title="MySQL-事务与日志"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/09/15/MySQL-%E4%BA%8B%E5%8A%A1%E4%B8%8E%E6%97%A5%E5%BF%97/cover.png" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2024-09-15</div><div class="title">MySQL-事务与日志</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/images/user.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__description">是一只时时翻垃圾吃的宅子。</div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">xiaoyan</h1><div class="author-info__desc">无限进步。</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/xiaoyanfufu" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/483597064" target="_blank" title="BiliBili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://bu.dusays.com/2023/05/13/645fa415e8694.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%9F%BA%E7%A1%80"><span class="toc-number">1.</span> <span class="toc-text">操作系统基础</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0"><span class="toc-number">1.1.</span> <span class="toc-text">操作系统概述</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E4%B8%BB%E8%A6%81%E5%8A%9F%E8%83%BD"><span class="toc-number">1.2.</span> <span class="toc-text">操作系统主要功能</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E6%80%81%E5%92%8C%E5%86%85%E6%A0%B8%E6%80%81"><span class="toc-number">1.3.</span> <span class="toc-text">用户态和内核态</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E6%80%81%E4%B8%8E%E5%86%85%E6%A0%B8%E6%80%81%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="toc-number">1.3.1.</span> <span class="toc-text">用户态与内核态的概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E6%80%81%E4%B8%8E%E5%86%85%E6%A0%B8%E6%80%81%E7%9A%84%E5%BF%85%E8%A6%81%E6%80%A7"><span class="toc-number">1.3.2.</span> <span class="toc-text">用户态与内核态的必要性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8"><span class="toc-number">1.4.</span> <span class="toc-text">系统调用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8"><span class="toc-number">1.4.1.</span> <span class="toc-text">什么是系统调用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8%E8%BF%87%E7%A8%8B"><span class="toc-number">1.4.2.</span> <span class="toc-text">系统调用过程</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E4%B8%8E%E7%BA%BF%E7%A8%8B"><span class="toc-number">2.</span> <span class="toc-text">进程与线程</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B"><span class="toc-number">2.1.</span> <span class="toc-text">什么是进程和线程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">2.2.</span> <span class="toc-text">进程和线程的区别</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E6%9C%89%E8%BF%9B%E7%A8%8B%E4%BA%86%E8%BF%98%E9%9C%80%E8%A6%81%E7%BA%BF%E7%A8%8B"><span class="toc-number">2.3.</span> <span class="toc-text">为什么有进程了还需要线程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E6%9C%89%E5%A4%9A%E7%BA%BF%E7%A8%8B"><span class="toc-number">2.4.</span> <span class="toc-text">为什么要有多线程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8F%90%E5%8D%87%E7%B3%BB%E7%BB%9F%E6%95%B4%E4%BD%93%E4%BD%BF%E7%94%A8%E6%95%88%E7%8E%87"><span class="toc-number">2.4.1.</span> <span class="toc-text">提升系统整体使用效率</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%94%E5%AF%B9%E4%BA%92%E8%81%94%E7%BD%91%E5%8F%91%E5%B1%95%E5%B8%A6%E6%9D%A5%E7%9A%84%E9%AB%98%E5%B9%B6%E5%8F%91"><span class="toc-number">2.4.2.</span> <span class="toc-text">应对互联网发展带来的高并发</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%BF%E7%A8%8B%E9%97%B4%E5%90%8C%E6%AD%A5%E6%96%B9%E5%BC%8F"><span class="toc-number">2.5.</span> <span class="toc-text">线程间同步方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#PCB%EF%BC%88Process-Control-Block%EF%BC%89"><span class="toc-number">2.6.</span> <span class="toc-text">PCB（Process Control Block）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#PCB%E6%98%AF%E4%BB%80%E4%B9%88"><span class="toc-number">2.6.1.</span> <span class="toc-text">PCB是什么</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PCB%E5%8C%85%E5%90%AB%E7%9A%84%E4%BF%A1%E6%81%AF"><span class="toc-number">2.6.2.</span> <span class="toc-text">PCB包含的信息</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E7%9A%84%E7%8A%B6%E6%80%81"><span class="toc-number">2.7.</span> <span class="toc-text">进程的状态</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8A%B6%E6%80%81%E8%BD%AC%E6%8D%A2"><span class="toc-number">2.7.1.</span> <span class="toc-text">状态转换</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1%E6%96%B9%E5%BC%8F"><span class="toc-number">2.8.</span> <span class="toc-text">进程通信方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E7%9A%84%E8%B0%83%E5%BA%A6%E7%AE%97%E6%B3%95"><span class="toc-number">2.9.</span> <span class="toc-text">进程的调度算法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%85%88%E6%9D%A5%E5%85%88%E6%9C%8D%E5%8A%A1%EF%BC%88FCFS%EF%BC%89"><span class="toc-number">2.9.1.</span> <span class="toc-text">1. 先来先服务（FCFS）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E7%9F%AD%E4%BD%9C%E4%B8%9A%E4%BC%98%E5%85%88%EF%BC%88SJF%EF%BC%89"><span class="toc-number">2.9.2.</span> <span class="toc-text">2. 短作业优先（SJF）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%97%B6%E9%97%B4%E7%89%87%E8%BD%AE%E8%BD%AC%EF%BC%88RR%EF%BC%89"><span class="toc-number">2.9.3.</span> <span class="toc-text">3. 时间片轮转（RR）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E4%BC%98%E5%85%88%E7%BA%A7%E8%B0%83%E5%BA%A6%EF%BC%88Priority%EF%BC%89"><span class="toc-number">2.9.4.</span> <span class="toc-text">4. 优先级调度（Priority）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E5%A4%9A%E7%BA%A7%E5%8F%8D%E9%A6%88%E9%98%9F%E5%88%97%EF%BC%88MFQ%EF%BC%89"><span class="toc-number">2.9.5.</span> <span class="toc-text">5. 多级反馈队列（MFQ）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%83%B5%E5%B0%B8%E8%BF%9B%E7%A8%8B%E4%B8%8E%E5%AD%A4%E5%84%BF%E8%BF%9B%E7%A8%8B"><span class="toc-number">2.10.</span> <span class="toc-text">僵尸进程与孤儿进程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%83%B5%E5%B0%B8%E8%BF%9B%E7%A8%8B"><span class="toc-number">2.10.1.</span> <span class="toc-text">僵尸进程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%A4%E5%84%BF%E8%BF%9B%E7%A8%8B"><span class="toc-number">2.10.2.</span> <span class="toc-text">孤儿进程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E6%A3%80%E6%B5%8B%E5%83%B5%E5%B0%B8%E8%BF%9B%E7%A8%8B"><span class="toc-number">2.10.3.</span> <span class="toc-text">如何检测僵尸进程</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%AD%BB%E9%94%81"><span class="toc-number">3.</span> <span class="toc-text">死锁</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%AD%BB%E9%94%81%EF%BC%9F"><span class="toc-number">3.1.</span> <span class="toc-text">什么是死锁？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AD%BB%E9%94%81%E7%9A%84%E5%BF%85%E8%A6%81%E6%9D%A1%E4%BB%B6"><span class="toc-number">3.2.</span> <span class="toc-text">死锁的必要条件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AD%BB%E9%94%81%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">3.3.</span> <span class="toc-text">死锁解决方案</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E9%A2%84%E9%98%B2%E6%AD%BB%E9%94%81%EF%BC%88Deadlock-Prevention%EF%BC%89"><span class="toc-number">3.3.1.</span> <span class="toc-text">1. 预防死锁（Deadlock Prevention）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E9%81%BF%E5%85%8D%E6%AD%BB%E9%94%81%EF%BC%88Deadlock-Avoidance%EF%BC%89"><span class="toc-number">3.3.2.</span> <span class="toc-text">2. 避免死锁（Deadlock Avoidance）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E6%A3%80%E6%B5%8B%E6%AD%BB%E9%94%81%EF%BC%88Deadlock-Detection%EF%BC%89"><span class="toc-number">3.3.3.</span> <span class="toc-text">3. 检测死锁（Deadlock Detection）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E8%A7%A3%E9%99%A4%E6%AD%BB%E9%94%81%EF%BC%88Deadlock-Recovery%EF%BC%89"><span class="toc-number">3.3.4.</span> <span class="toc-text">4. 解除死锁（Deadlock Recovery）</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/11/03/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/" title="数据库优化-分库分表"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pic1.zhimg.com/v2-b76d79b11c3e8dd25f3c6abae8889a88_720w.jpg?source=172ae18b" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="数据库优化-分库分表"/></a><div class="content"><a class="title" href="/2024/11/03/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/" title="数据库优化-分库分表">数据库优化-分库分表</a><time datetime="2024-11-03T08:20:54.000Z" title="发表于 2024-11-03 16:20:54">2024-11-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/11/03/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96-%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB%E4%B8%8E%E5%86%B7%E7%83%AD%E5%88%86%E7%A6%BB/" title="数据库优化-读写分离与冷热分离"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaoyanfufu-io.oss-cn-guangzhou.aliyuncs.com/blog/202411041125092.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="数据库优化-读写分离与冷热分离"/></a><div class="content"><a class="title" href="/2024/11/03/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96-%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB%E4%B8%8E%E5%86%B7%E7%83%AD%E5%88%86%E7%A6%BB/" title="数据库优化-读写分离与冷热分离">数据库优化-读写分离与冷热分离</a><time datetime="2024-11-03T08:18:25.000Z" title="发表于 2024-11-03 16:18:25">2024-11-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/10/28/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/" title="操作系统-进程管理"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaoyanfufu-io.oss-cn-guangzhou.aliyuncs.com/blog/202410282316960.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="操作系统-进程管理"/></a><div class="content"><a class="title" href="/2024/10/28/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/" title="操作系统-进程管理">操作系统-进程管理</a><time datetime="2024-10-28T14:52:35.000Z" title="发表于 2024-10-28 22:52:35">2024-10-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/10/27/%E5%88%86%E5%B8%83%E5%BC%8F-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/" title="分布式-分布式事务"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaoyanfufu-io.oss-cn-guangzhou.aliyuncs.com/blog/202410281041645.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="分布式-分布式事务"/></a><div class="content"><a class="title" href="/2024/10/27/%E5%88%86%E5%B8%83%E5%BC%8F-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/" title="分布式-分布式事务">分布式-分布式事务</a><time datetime="2024-10-27T13:08:20.000Z" title="发表于 2024-10-27 21:08:20">2024-10-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/10/21/%E5%88%86%E5%B8%83%E5%BC%8F-%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86%EF%BC%88%E4%B8%8B%EF%BC%89/" title="分布式-服务治理（下）"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaoyanfufu-io.oss-cn-guangzhou.aliyuncs.com/blog/202410272103963.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="分布式-服务治理（下）"/></a><div class="content"><a class="title" href="/2024/10/21/%E5%88%86%E5%B8%83%E5%BC%8F-%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86%EF%BC%88%E4%B8%8B%EF%BC%89/" title="分布式-服务治理（下）">分布式-服务治理（下）</a><time datetime="2024-10-21T07:24:49.000Z" title="发表于 2024-10-21 15:24:49">2024-10-21</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2024 By <a class="footer-bar-link" href="/" title="xiaoyan" target="_blank">xiaoyan</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">45</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">66</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">18</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/?id=12613265870&amp;server=netease"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/AOP/" style="font-size: 0.88rem;">AOP<sup>1</sup></a><a href="/tags/Bean/" style="font-size: 0.88rem;">Bean<sup>1</sup></a><a href="/tags/DDD/" style="font-size: 0.88rem;">DDD<sup>1</sup></a><a href="/tags/IoC/" style="font-size: 0.88rem;">IoC<sup>1</sup></a><a href="/tags/Java8%E6%96%B0%E7%89%B9%E6%80%A7/" style="font-size: 0.88rem;">Java8新特性<sup>1</sup></a><a href="/tags/Java%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/" style="font-size: 0.88rem;">Java基本概念<sup>1</sup></a><a href="/tags/List/" style="font-size: 0.88rem;">List<sup>1</sup></a><a href="/tags/Map/" style="font-size: 0.88rem;">Map<sup>2</sup></a><a href="/tags/MyBatis/" style="font-size: 0.88rem;">MyBatis<sup>1</sup></a><a href="/tags/MySQL%E5%9F%BA%E7%A1%80/" style="font-size: 0.88rem;">MySQL基础<sup>1</sup></a><a href="/tags/Object/" style="font-size: 0.88rem;">Object<sup>1</sup></a><a href="/tags/SQL%E8%B0%83%E4%BC%98/" style="font-size: 0.88rem;">SQL调优<sup>1</sup></a><a href="/tags/Set/" style="font-size: 0.88rem;">Set<sup>1</sup></a><a href="/tags/SpringBoot/" style="font-size: 0.88rem;">SpringBoot<sup>1</sup></a><a href="/tags/SpringCloud/" style="font-size: 0.88rem;">SpringCloud<sup>1</sup></a><a href="/tags/%E4%BA%8B%E5%8A%A1/" style="font-size: 0.88rem;">事务<sup>2</sup></a><a href="/tags/%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B/" style="font-size: 0.88rem;">内存模型<sup>1</sup></a><a href="/tags/%E5%8F%8D%E5%B0%84/" style="font-size: 0.88rem;">反射<sup>1</sup></a><a href="/tags/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/" style="font-size: 0.88rem;">垃圾回收<sup>1</sup></a><a href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" style="font-size: 0.88rem;">多线程<sup>1</sup></a><a href="/tags/%E5%AF%B9%E8%B1%A1/" style="font-size: 0.88rem;">对象<sup>1</sup></a><a href="/tags/%E5%B9%B6%E5%8F%91%E5%AE%89%E5%85%A8/" style="font-size: 0.88rem;">并发安全<sup>1</sup></a><a href="/tags/%E5%BA%8F%E5%88%97%E5%8C%96/" style="font-size: 0.88rem;">序列化<sup>1</sup></a><a href="/tags/%E5%BC%82%E5%B8%B8/" style="font-size: 0.88rem;">异常<sup>1</sup></a><a href="/tags/%E6%8B%B7%E8%B4%9D/" style="font-size: 0.88rem;">拷贝<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" style="font-size: 0.88rem;">数据类型<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 0.88rem;">数据结构<sup>1</sup></a><a href="/tags/%E6%97%A5%E5%BF%97/" style="font-size: 0.88rem;">日志<sup>2</sup></a><a href="/tags/%E6%9F%A5%E8%AF%A2/" style="font-size: 0.88rem;">查询<sup>1</sup></a><a href="/tags/%E6%B3%9B%E5%9E%8B/" style="font-size: 0.88rem;">泛型<sup>1</sup></a><a href="/tags/%E6%B3%A8%E8%A7%A3/" style="font-size: 0.88rem;">注解<sup>1</sup></a><a href="/tags/%E7%AD%96%E7%95%A5/" style="font-size: 0.88rem;">策略<sup>1</sup></a><a href="/tags/%E7%B1%BB%E5%88%9D%E5%A7%8B%E5%8C%96/" style="font-size: 0.88rem;">类初始化<sup>1</sup></a><a href="/tags/%E7%B1%BB%E5%8A%A0%E8%BD%BD/" style="font-size: 0.88rem;">类加载<sup>1</sup></a><a href="/tags/%E7%B4%A2%E5%BC%95/" style="font-size: 0.88rem;">索引<sup>2</sup></a><a href="/tags/%E7%BA%BF%E7%A8%8B%E6%A8%A1%E5%9E%8B/" style="font-size: 0.88rem;">线程模型<sup>1</sup></a><a href="/tags/%E7%BA%BF%E7%A8%8B%E6%B1%A0/" style="font-size: 0.88rem;">线程池<sup>1</sup></a><a href="/tags/%E9%94%81/" style="font-size: 0.88rem;">锁<sup>2</sup></a><a href="/tags/%E9%9B%86%E7%BE%A4/" style="font-size: 0.88rem;">集群<sup>1</sup></a><a href="/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" style="font-size: 0.88rem;">面向对象<sup>1</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>
<!DOCTYPE html><html lang="zn-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>MySQL-SQL基础 | XIAOYAN</title><meta name="keywords" content="MySQL基础"><meta name="author" content="xiaoyan"><meta name="copyright" content="xiaoyan"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="MySQL-SQL基础"><meta name="application-name" content="MySQL-SQL基础"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="MySQL-SQL基础"><meta property="og:url" content="http://example.com/2024/09/15/MySQL-SQL%E5%9F%BA%E7%A1%80/index.html"><meta property="og:site_name" content="XIAOYAN"><meta property="og:description" content="在数据库管理中，SQL（Structured Query Language）是操作关系型数据库的核心工具。本文将深入探讨MySQL中的SQL基础知识，从数据库类型选择、设计范式、连接查询、数据插入、字符串类型、外键约束、关键字使用、内置函数、查询执行顺序、请求执行过程到存储引擎等多个方面进行详细解析"><meta property="og:locale" content="zn-CN"><meta property="og:image" content="http://example.com/2024/09/15/MySQL-SQL%E5%9F%BA%E7%A1%80/cover.png"><meta property="article:author" content="xiaoyan"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://example.com/2024/09/15/MySQL-SQL%E5%9F%BA%E7%A1%80/cover.png"><meta name="description" content="在数据库管理中，SQL（Structured Query Language）是操作关系型数据库的核心工具。本文将深入探讨MySQL中的SQL基础知识，从数据库类型选择、设计范式、连接查询、数据插入、字符串类型、外键约束、关键字使用、内置函数、查询执行顺序、请求执行过程到存储引擎等多个方面进行详细解析"><link rel="shortcut icon" href="/images/favicon.ico"><link rel="canonical" href="http://example.com/2024/09/15/MySQL-SQL%E5%9F%BA%E7%A1%80/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2024/07/27/125766904/ba62475f396df9de3316a08ed9e65d86_5680958632268053399..png"},
  postHeadAiDescription: undefined,
  diytitle: undefined,
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: undefined,
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: xiaoyan","link":"链接: ","source":"来源: XIAOYAN","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'XIAOYAN',
  title: 'MySQL-SQL基础',
  postAI: '',
  pageFillDescription: 'SQL与NoSQL数据库, 概述, SQL数据库, NoSQL数据库, 选择数据库的考量因素, ACID与BASE, 扩展性, 数据库设计三大范式, 第一范式（1NF）, 举例说明, 不满足1NF的表结构, 满足1NF的表结构, 第二范式（2NF）, 举例说明, 不满足2NF的表结构, 满足2NF的表结构, 第三范式（3NF）, 举例说明, 不满足3NF的表结构, 满足3NF的表结构, 数据库连接查询, 1. 内连接（Inner Join）, 2. 左外连接（Left Outer Join）, 3. 右外连接（Right Outer Join）, 4. 全外连接（Full Outer Join）, MySQL如何避免插入重复数据, 方式一：使用UNIQUE约束, 方式二：使用 INSERT ... ON DUPLICATE KEY UPDATE, 方式三：使用 INSERT IGNORE, MySQL中的字符串类型, CHAR, VARCHAR, TEXT, 外键约束, MySQL关键字：IN 和 EXISTS, IN 关键字, EXISTS 关键字, 区别与适用场景, IN 适用场景, EXISTS 适用场景, MySQL基本函数, 字符串函数, CONCAT(str1 str2 ...), LENGTH(str), SUBSTRING(str start length), REPLACE(str from_str to_str), 数值函数, ABS(num), POWER(num n), 日期函数, NOW(), CURDATE(), 聚合函数, COUNT(column), SUM(column), AVG(column), MAX(column), MIN(column), SQL查询执行顺序, SQL请求执行过程详解, MySQL存储引擎, InnoDB, MyISAM, Memory, 数据文件, 联合索引, 最左匹配原则, 索引区分度的重要性, 索引失效的情况在数据库管理中是操作关系型数据库的核心工具本文将深入探讨中的基础知识从数据库类型选择设计范式连接查询数据插入字符串类型外键约束关键字使用内置函数查询执行顺序请求执行过程到存储引擎等多个方面进行详细解析与数据库概述数据库代表关系型数据库管理系统常见的代表包括和关系型数据库以结构化方式存储数据数据逻辑通过二维表即行和列来表示每一列代表数据的属性每一行则代表一个数据实体数据库代表非关系型数据库主要代表有和数据库不使用传统的二维表结构而是采用如文档键值对列族图等多种数据模型来存储数据选择数据库的考量因素与关系型数据库通常支持特性原子性一致性隔离性持久性确保数据的强一致性和事务的完整性而数据库通常采用模型基本可用性软状态最终一致性提供更高的灵活性和可扩展性但可能在一致性方面有所妥协选择数据库时需根据具体应用场景来决定例如银行系统需要严格遵守特性以防止资金重复使用而社交软件则可以容忍一定程度的延迟和数据不一致扩展性数据库由于其非关系型数据结构数据之间通常不存在强关联因此更容易实现水平扩展例如提供了主从复制哨兵模式和切片集群等扩展机制相比之下数据库中的数据可能存在复杂的关联关系扩展时需要解决分布式事务等复杂问题数据库设计三大范式第一范式第一范式要求数据库表中的每一列都必须是不可再分的原子项这意味着每一列中的数据项必须是单一的不可分割的值举例说明假设有一张表存储用户信息其中包含联系方式列该列包含电话和电子邮件为了满足应将联系方式拆分为电话和电子邮件两列不满足的表结构用户用户名联系方式张三李四满足的表结构用户用户名电话电子邮件张三李四第二范式第二范式在满足的基础上要求非主属性必须完全依赖于候选码即主键换句话说非主属性不能部分依赖于主键的一部分举例说明假设有一张订单表主键为订单和产品如果表中有一列产品名称它只依赖于产品而不依赖于订单则该表不满足应将产品名称移到另一张产品表中不满足的表结构订单产品产品名称数量苹果香蕉苹果满足的表结构订单表订单产品数量产品表产品产品名称苹果香蕉第三范式第三范式在满足的基础上要求非主属性不依赖于其他的非主属性即消除传递依赖举例说明假设有一张员工表包含员工员工姓名部门和部门名称如果部门名称依赖于部门而部门依赖于员工则存在传递依赖不满足应将部门名称移到另一张部门表中不满足的表结构员工员工姓名部门部门名称张三研发部李四销售部王五研发部满足的表结构员工表员工员工姓名部门张三李四王五部门表部门部门名称研发部销售部数据库连接查询在数据库查询中连接操作用于将两个或多个表中的数据组合在一起常见的连接类型包括内连接左外连接右外连接和全外连接以下是每种连接类型的详细说明及其语法示例内连接内连接返回两个表中具有匹配关系的行只有当两个表中的记录在连接条件上匹配时才会返回结果示例解释假设有两个表订单表和客户表我们希望查询所有有订单的客户信息左外连接左外连接返回左表中的所有行即使右表中没有匹配的行对于右表中没有匹配的行结果集中对应的数据为示例解释假设我们希望查询所有客户及其订单信息包括那些没有订单的客户右外连接右外连接与左外连接相似返回右表中的所有行即使左表中没有匹配的行对于左表中没有匹配的行结果集中对应的数据为示例解释假设我们希望查询所有订单及其对应的客户信息包括那些没有客户的订单全外连接全外连接返回两个表中的所有行包括那些在另一个表中没有匹配的行对于没有匹配的行结果集中对应的数据为示例解释假设我们希望查询所有客户和订单的信息包括那些没有订单的客户和没有客户的订单如何避免插入重复数据在中有多种方法可以避免插入重复数据以下是三种常见的方法及其详细说明方式一使用约束约束用于确保表中某一列或一组列的值是唯一的如果在插入数据时违反了约束将拒绝插入该数据创建表时添加约束如果尝试插入重复的将返回错误方式二使用语句在插入数据时如果遇到重复键值如约束或可以选择更新原有记录为新插入的记录插入或更新数据如果为的记录已经存在则更新其和字段方式三使用语句在插入数据时如果遇到重复键值如约束或将忽略该插入操作不会抛出错误如果为的记录已经存在则忽略该插入操作不会抛出错误中的字符串类型在中字符串类型用于存储文本数据常见的字符串类型包括和每种类型都有其特定的用途和存储特性是一种固定长度的字符串类型在定义时需要指定长度存储时会在末尾填充空格以达到指定的长度特点固定长度无论实际存储的字符串长度如何都会占用指定长度的存储空间存储效率对于长度固定的字符串如国家代码性别等类型可以提高存储效率是一种可变长度的字符串类型在定义时需要指定最大长度存储时根据实际长度占用存储空间特点可变长度实际存储的字符串长度决定了占用的存储空间节省存储空间灵活性适用于长度不固定的字符串如用户名地址等用于存储超长文本数据类型有多种子类型包括和分别用于存储不同大小的文本特点大容量存储适用于存储大段文本如文章内容日志等存储限制最大存储字节约最大存储字节约最大存储字节约适用于固定长度的字符串存储效率高适用于长度不固定的字符串节省存储空间适用于存储超长文本有多种子类型满足不同存储需求根据具体需求选择合适的字符串类型可以优化数据库的存储和查询性能外键约束外键约束是关系型数据库中用于维护表与表之间关系的一种机制它确保数据的完整性和一致性防止在关联表中插入无效数据作用维护数据完整性外键约束确保在子表中插入或更新的记录在父表中存在对应的记录如果父表中不存在对应的记录数据库将拒绝插入或更新操作防止无效数据外键约束防止在子表中插入或更新无效数据从而保持数据的正确性和一致性级联操作外键约束可以配置级联操作如级联删除或级联更新以确保在父表中的记录被删除或更新时子表中的相关记录也相应地被删除或更新假设有两个表订单表和客户表我们希望在表中定义一个外键约束确保每个订单都关联到一个有效的客户关键字和在中和是两个常用的关键字用于在查询中进行条件判断它们各自有不同的用途和特点关键字关键字用于检查左边的表达式是否存在于右边的列表或子查询中如果存在则返回否则返回假设我们有一个表我们希望查询所有订单为或的订单或者使用子查询关键字关键字用于检查子查询是否至少返回一行数据它不关心子查询返回的具体数据只关注是否有返回数据如果有返回数据则返回否则返回假设我们有一个表和一个表我们希望查询所有有订单的客户区别与适用场景适用场景简单列表匹配当需要检查某个值是否存在于一个固定的列表中时非常适用子查询结果匹配当需要检查某个值是否存在于子查询的结果集中时也很适用适用场景存在性检查当只需要检查是否存在满足条件的记录而不关心具体返回的数据时非常适用性能优化在某些情况下的性能可能优于特别是在子查询返回大量数据时基本函数提供了丰富的内置函数用于处理字符串数值日期和聚合数据以下是一些常用的函数及其说明字符串函数连接多个字符串返回拼接结果返回返回字符串的长度字符数返回从指定位置开始截取指定长度的字符串返回将字符串中的指定字符替换为另一个字符返回数值函数返回数值的绝对值返回返回数值的次幂返回日期函数返回当前日期和时间返回当前日期和时间例如返回当前日期返回当前日期例如聚合函数计算指定列中的非值的个数返回订单表中列的非值个数计算指定列的总和返回产品表中列的总和计算指定列的平均值返回产品表中列的平均值返回指定列的最大值返回产品表中列的最大值返回指定列的最小值返回产品表中列的最小值查询执行顺序所有的查询语句都是从开始执行在执行过程中每个步骤都会生成一个虚拟表这个虚拟表将作为下一个执行步骤的输入最后一个步骤产生的虚拟表即为输出结果执行顺序如下查询语句执行顺序注释选择要查询的列去重聚合函数或表达式指定数据来源的左表指定连接类型并连接右表指定连接条件指定筛选条件指定分组列可选使用或进行多维分析指定分组后的筛选条件指定排序方式指定返回结果的数量限制请求执行过程详解连接管理连接器客户端通过连接器与服务器建立连接连接器负责验证客户端的身份和权限并维护连接状态查询缓存缓存查询在及之前版本中查询缓存功能默认关闭而在中已被移除如果查询缓存功能开启且命中缓存服务器将直接返回缓存结果从而提高查询效率语法解析解析器解析器负责对语句进行词法和语法分析词法分析确保语句中的关键词和标识符正确无误语法分析则验证语句的结构是否符合语法规则解析完成后生成一棵语法树预处理预处理阶段预处理器对语法树进行进一步处理检查表和字段是否存在并验证语句的语义正确性此阶段还会处理语句中的占位符确保查询的完整性和一致性查询优化优化器优化器是执行过程中的核心组件负责选择最优的执行计划优化器会评估多种可能的执行路径并根据成本模型选择查询成本最小的执行计划优化过程包括但不限于索引选择表连接顺序优化子查询优化等执行引擎执行阶段执行引擎根据优化器生成的执行计划从存储引擎中读取数据执行过程中数据可能被缓存以提高后续查询的效率最终执行引擎将结果集返回给客户端存储引擎默认引擎是的默认存储引擎适用于高并发场景事务支持提供原子性一致性隔离性持久性事务特性确保数据的一致性和完整性锁机制支持行级锁减少锁冲突提高并发性能外键约束支持外键约束确保表之间的数据完整性存储优化具有较低的存储和内存消耗适用于大量读操作的场景性能特点不支持事务没有行级锁和外键约束因此在高并发写操作场景下性能较差适用场景适合读密集型应用如数据仓库日志记录等内存存储引擎将数据存储在内存中适用于需要快速读取的场景性能优势由于数据存储在内存中读取速度极快适合临时数据存储和高频读取操作数据持久性不支持事务行级锁和外键索引数据在服务器重启或崩溃时会丢失因此不适合需要持久化的数据存储通过选择合适的存储引擎可以根据应用的具体需求优化数据库性能和数据管理策略适用于需要高并发和事务支持的场景适合读密集型应用而引擎则适用于需要快速读取的临时数据存储数据文件在中我们可以创建一个测试数据库和一张测试表在数据库的存储路径下可以看到以下三个文件该文件记录了当前数据库的默认字符集和校验规则此文件存储了表的结构信息包括字段定义索引等主要用于描述表的结构所有的元数据和实际数据都存储在这个文件中包括表的数据索引等联合索引联合索引是由多个字段共同组成的索引例如索引可以基于字段和创建联合索引的构建遵循最左匹配原则即首先按照联合索引中的第一个字段进行分组排序然后在此基础上按第二个字段分组排序依此类推最左匹配原则最左匹配原则意味着查询必须从联合索引的最左边的字段开始匹配例如如果联合索引是基于字段和创建的那么查询条件中必须包含字段才能利用该索引如果查询条件只包含字段和则无法利用该联合索引因为往后的索引是全局无序的而只是相对上一个字段局部有序索引区分度的重要性在构建联合索引时优先选择区分度高的字段作为前缀区分度的计算公式为区分度不同值的数量总记录数区分度越高索引的选择性越好查询效率也越高例如使用性别作为联合索引的首个字段由于其区分度极低接近于即使通过索引找到了结果由于是非聚簇索引仍需执行回表操作增加次数因此不建议使用索引失效的情况从索引的物理存储特性来看以下行为可能导致索引失效模糊查询使用通配符开头的模糊查询如通常会导致索引失效因为数据库无法利用索引来快速定位匹配的记录范围查询在联合索引中范围查询如等可能会导致后续字段的索引失效例如如果查询条件是那么字段的索引可能无法被有效利用函数操作对索引字段进行函数操作如会导致索引失效因为数据库无法直接使用索引进行比较通过合理设计和使用联合索引可以显著提高查询性能减少数据库的操作',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-11-04 11:40:02',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="/images/star.png"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">XIAOYAN</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/?id=12613265870&amp;server=netease"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/AOP/" style="font-size: 1.05rem;">AOP<sup>1</sup></a><a href="/tags/Bean/" style="font-size: 1.05rem;">Bean<sup>1</sup></a><a href="/tags/DDD/" style="font-size: 1.05rem;">DDD<sup>1</sup></a><a href="/tags/IoC/" style="font-size: 1.05rem;">IoC<sup>1</sup></a><a href="/tags/Java8%E6%96%B0%E7%89%B9%E6%80%A7/" style="font-size: 1.05rem;">Java8新特性<sup>1</sup></a><a href="/tags/Java%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/" style="font-size: 1.05rem;">Java基本概念<sup>1</sup></a><a href="/tags/List/" style="font-size: 1.05rem;">List<sup>1</sup></a><a href="/tags/Map/" style="font-size: 1.05rem;">Map<sup>2</sup></a><a href="/tags/MyBatis/" style="font-size: 1.05rem;">MyBatis<sup>1</sup></a><a href="/tags/MySQL%E5%9F%BA%E7%A1%80/" style="font-size: 1.05rem;">MySQL基础<sup>1</sup></a><a href="/tags/Object/" style="font-size: 1.05rem;">Object<sup>1</sup></a><a href="/tags/SQL%E8%B0%83%E4%BC%98/" style="font-size: 1.05rem;">SQL调优<sup>1</sup></a><a href="/tags/Set/" style="font-size: 1.05rem;">Set<sup>1</sup></a><a href="/tags/SpringBoot/" style="font-size: 1.05rem;">SpringBoot<sup>1</sup></a><a href="/tags/SpringCloud/" style="font-size: 1.05rem;">SpringCloud<sup>1</sup></a><a href="/tags/%E4%BA%8B%E5%8A%A1/" style="font-size: 1.05rem;">事务<sup>2</sup></a><a href="/tags/%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B/" style="font-size: 1.05rem;">内存模型<sup>1</sup></a><a href="/tags/%E5%8F%8D%E5%B0%84/" style="font-size: 1.05rem;">反射<sup>1</sup></a><a href="/tags/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/" style="font-size: 1.05rem;">垃圾回收<sup>1</sup></a><a href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" style="font-size: 1.05rem;">多线程<sup>1</sup></a><a href="/tags/%E5%AF%B9%E8%B1%A1/" style="font-size: 1.05rem;">对象<sup>1</sup></a><a href="/tags/%E5%B9%B6%E5%8F%91%E5%AE%89%E5%85%A8/" style="font-size: 1.05rem;">并发安全<sup>1</sup></a><a href="/tags/%E5%BA%8F%E5%88%97%E5%8C%96/" style="font-size: 1.05rem;">序列化<sup>1</sup></a><a href="/tags/%E5%BC%82%E5%B8%B8/" style="font-size: 1.05rem;">异常<sup>1</sup></a><a href="/tags/%E6%8B%B7%E8%B4%9D/" style="font-size: 1.05rem;">拷贝<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" style="font-size: 1.05rem;">数据类型<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 1.05rem;">数据结构<sup>1</sup></a><a href="/tags/%E6%97%A5%E5%BF%97/" style="font-size: 1.05rem;">日志<sup>2</sup></a><a href="/tags/%E6%9F%A5%E8%AF%A2/" style="font-size: 1.05rem;">查询<sup>1</sup></a><a href="/tags/%E6%B3%9B%E5%9E%8B/" style="font-size: 1.05rem;">泛型<sup>1</sup></a><a href="/tags/%E6%B3%A8%E8%A7%A3/" style="font-size: 1.05rem;">注解<sup>1</sup></a><a href="/tags/%E7%AD%96%E7%95%A5/" style="font-size: 1.05rem;">策略<sup>1</sup></a><a href="/tags/%E7%B1%BB%E5%88%9D%E5%A7%8B%E5%8C%96/" style="font-size: 1.05rem;">类初始化<sup>1</sup></a><a href="/tags/%E7%B1%BB%E5%8A%A0%E8%BD%BD/" style="font-size: 1.05rem;">类加载<sup>1</sup></a><a href="/tags/%E7%B4%A2%E5%BC%95/" style="font-size: 1.05rem;">索引<sup>2</sup></a><a href="/tags/%E7%BA%BF%E7%A8%8B%E6%A8%A1%E5%9E%8B/" style="font-size: 1.05rem;">线程模型<sup>1</sup></a><a href="/tags/%E7%BA%BF%E7%A8%8B%E6%B1%A0/" style="font-size: 1.05rem;">线程池<sup>1</sup></a><a href="/tags/%E9%94%81/" style="font-size: 1.05rem;">锁<sup>2</sup></a><a href="/tags/%E9%9B%86%E7%BE%A4/" style="font-size: 1.05rem;">集群<sup>1</sup></a><a href="/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" style="font-size: 1.05rem;">面向对象<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/11/"><span class="card-archive-list-date">November 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/10/"><span class="card-archive-list-date">October 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">13</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/09/"><span class="card-archive-list-date">September 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">25</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/07/"><span class="card-archive-list-date">July 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">4</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93-%E7%BC%93%E5%AD%98/" itemprop="url">数据库&amp;缓存</a><i class="anzhiyufont anzhiyu-icon-angle-right post-meta-separator"></i><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93-%E7%BC%93%E5%AD%98/MySQL/" itemprop="url">MySQL</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/MySQL%E5%9F%BA%E7%A1%80/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>MySQL基础</span></a></span></div></div><h1 class="post-title" itemprop="name headline">MySQL-SQL基础</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2024-09-14T21:20:00.000Z" title="发表于 2024-09-15 05:20:00">2024-09-15</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2024-11-04T03:40:02.428Z" title="更新于 2024-11-04 11:40:02">2024-11-04</time></span></div><div class="meta-secondline"><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为桂林"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>桂林</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src="/2024/09/15/MySQL-SQL%E5%9F%BA%E7%A1%80/cover.png"></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="http://example.com/2024/09/15/MySQL-SQL%E5%9F%BA%E7%A1%80/"><header><a class="post-meta-categories" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93-%E7%BC%93%E5%AD%98/" itemprop="url">数据库&amp;缓存</a><a class="post-meta-categories" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93-%E7%BC%93%E5%AD%98/MySQL/" itemprop="url">MySQL</a><a href="/tags/MySQL%E5%9F%BA%E7%A1%80/" tabindex="-1" itemprop="url">MySQL基础</a><h1 id="CrawlerTitle" itemprop="name headline">MySQL-SQL基础</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">xiaoyan</span><time itemprop="dateCreated datePublished" datetime="2024-09-14T21:20:00.000Z" title="发表于 2024-09-15 05:20:00">2024-09-15</time><time itemprop="dateCreated datePublished" datetime="2024-11-04T03:40:02.428Z" title="更新于 2024-11-04 11:40:02">2024-11-04</time></header><p>在数据库管理中，SQL（Structured Query Language）是操作关系型数据库的核心工具。本文将深入探讨MySQL中的SQL基础知识，从数据库类型选择、设计范式、连接查询、数据插入、字符串类型、外键约束、关键字使用、内置函数、查询执行顺序、请求执行过程到存储引擎等多个方面进行详细解析。</p>
<span id="more"></span>

<h1 id="SQL与NoSQL数据库"><a href="#SQL与NoSQL数据库" class="headerlink" title="SQL与NoSQL数据库"></a>SQL与NoSQL数据库</h1><h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><h3 id="SQL数据库"><a href="#SQL数据库" class="headerlink" title="SQL数据库"></a>SQL数据库</h3><p>SQL（Structured Query Language）代表关系型数据库管理系统（RDBMS），常见的代表包括SQL Server、Oracle、MySQL和PostgreSQL。关系型数据库以结构化方式存储数据，数据逻辑通过二维表（即行和列）来表示。每一列代表数据的属性，每一行则代表一个数据实体。</p>
<h3 id="NoSQL数据库"><a href="#NoSQL数据库" class="headerlink" title="NoSQL数据库"></a>NoSQL数据库</h3><p>NoSQL（Not Only SQL）代表非关系型数据库，主要代表有MongoDB和Redis。NoSQL数据库不使用传统的二维表结构，而是采用如JSON文档、键值对、列族、图等多种数据模型来存储数据。</p>
<h2 id="选择数据库的考量因素"><a href="#选择数据库的考量因素" class="headerlink" title="选择数据库的考量因素"></a>选择数据库的考量因素</h2><h3 id="ACID与BASE"><a href="#ACID与BASE" class="headerlink" title="ACID与BASE"></a>ACID与BASE</h3><p>关系型数据库通常支持ACID特性（原子性、一致性、隔离性、持久性），确保数据的强一致性和事务的完整性。而NoSQL数据库通常采用BASE模型（基本可用性、软状态、最终一致性），提供更高的灵活性和可扩展性，但可能在一致性方面有所妥协。</p>
<p>选择数据库时需根据具体应用场景来决定。例如，银行系统需要严格遵守ACID特性以防止资金重复使用，而社交软件则可以容忍一定程度的延迟和数据不一致。</p>
<h3 id="扩展性"><a href="#扩展性" class="headerlink" title="扩展性"></a>扩展性</h3><p>NoSQL数据库由于其非关系型数据结构，数据之间通常不存在强关联，因此更容易实现水平扩展。例如，Redis提供了主从复制、哨兵模式和切片集群等扩展机制。</p>
<p>相比之下，SQL数据库中的数据可能存在复杂的关联关系，扩展时需要解决分布式事务等复杂问题。</p>
<h1 id="数据库设计三大范式"><a href="#数据库设计三大范式" class="headerlink" title="数据库设计三大范式"></a>数据库设计三大范式</h1><h2 id="第一范式（1NF）"><a href="#第一范式（1NF）" class="headerlink" title="第一范式（1NF）"></a>第一范式（1NF）</h2><p>第一范式要求数据库表中的每一列都必须是不可再分的原子项。这意味着每一列中的数据项必须是单一的、不可分割的值。</p>
<h3 id="举例说明"><a href="#举例说明" class="headerlink" title="举例说明"></a>举例说明</h3><p>假设有一张表存储用户信息，其中包含“联系方式”列，该列包含电话和电子邮件。为了满足1NF，应将“联系方式”拆分为“电话”和“电子邮件”两列。</p>
<h4 id="不满足1NF的表结构"><a href="#不满足1NF的表结构" class="headerlink" title="不满足1NF的表结构"></a>不满足1NF的表结构</h4><table>
<thead>
<tr>
<th>用户ID</th>
<th>用户名</th>
<th>联系方式</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>张三</td>
<td>123-4567,<a href="mailto:&#x7a;&#104;&#x61;&#x6e;&#103;&#115;&#x61;&#110;&#64;&#x65;&#x78;&#x61;&#x6d;&#x70;&#x6c;&#x65;&#x2e;&#x63;&#111;&#x6d;">&#x7a;&#104;&#x61;&#x6e;&#103;&#115;&#x61;&#110;&#64;&#x65;&#x78;&#x61;&#x6d;&#x70;&#x6c;&#x65;&#x2e;&#x63;&#111;&#x6d;</a></td>
</tr>
<tr>
<td>2</td>
<td>李四</td>
<td>890-1234,<a href="mailto:&#108;&#105;&#x73;&#x69;&#x40;&#101;&#120;&#97;&#x6d;&#112;&#x6c;&#x65;&#x2e;&#99;&#111;&#109;">&#108;&#105;&#x73;&#x69;&#x40;&#101;&#120;&#97;&#x6d;&#112;&#x6c;&#x65;&#x2e;&#99;&#111;&#109;</a></td>
</tr>
</tbody></table>
<h4 id="满足1NF的表结构"><a href="#满足1NF的表结构" class="headerlink" title="满足1NF的表结构"></a>满足1NF的表结构</h4><table>
<thead>
<tr>
<th>用户ID</th>
<th>用户名</th>
<th>电话</th>
<th>电子邮件</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>张三</td>
<td>123-4567</td>
<td><a href="mailto:&#x7a;&#x68;&#97;&#110;&#103;&#115;&#97;&#110;&#x40;&#101;&#x78;&#x61;&#x6d;&#x70;&#x6c;&#x65;&#x2e;&#x63;&#x6f;&#109;">&#x7a;&#x68;&#97;&#110;&#103;&#115;&#97;&#110;&#x40;&#101;&#x78;&#x61;&#x6d;&#x70;&#x6c;&#x65;&#x2e;&#x63;&#x6f;&#109;</a></td>
</tr>
<tr>
<td>2</td>
<td>李四</td>
<td>890-1234</td>
<td><a href="mailto:&#x6c;&#x69;&#115;&#x69;&#x40;&#101;&#x78;&#x61;&#109;&#112;&#108;&#101;&#x2e;&#x63;&#111;&#109;">&#x6c;&#x69;&#115;&#x69;&#x40;&#101;&#x78;&#x61;&#109;&#112;&#108;&#101;&#x2e;&#x63;&#111;&#109;</a></td>
</tr>
</tbody></table>
<h2 id="第二范式（2NF）"><a href="#第二范式（2NF）" class="headerlink" title="第二范式（2NF）"></a>第二范式（2NF）</h2><p>第二范式在满足1NF的基础上，要求非主属性必须完全依赖于候选码（即主键）。换句话说，非主属性不能部分依赖于主键的一部分。</p>
<h3 id="举例说明-1"><a href="#举例说明-1" class="headerlink" title="举例说明"></a>举例说明</h3><p>假设有一张订单表，主键为“订单ID”和“产品ID”。如果表中有一列“产品名称”，它只依赖于“产品ID”，而不依赖于“订单ID”，则该表不满足2NF。应将“产品名称”移到另一张产品表中。</p>
<h4 id="不满足2NF的表结构"><a href="#不满足2NF的表结构" class="headerlink" title="不满足2NF的表结构"></a>不满足2NF的表结构</h4><table>
<thead>
<tr>
<th>订单ID</th>
<th>产品ID</th>
<th>产品名称</th>
<th>数量</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>101</td>
<td>苹果</td>
<td>5</td>
</tr>
<tr>
<td>2</td>
<td>102</td>
<td>香蕉</td>
<td>3</td>
</tr>
<tr>
<td>3</td>
<td>101</td>
<td>苹果</td>
<td>2</td>
</tr>
</tbody></table>
<h4 id="满足2NF的表结构"><a href="#满足2NF的表结构" class="headerlink" title="满足2NF的表结构"></a>满足2NF的表结构</h4><p><strong>订单表</strong></p>
<table>
<thead>
<tr>
<th>订单ID</th>
<th>产品ID</th>
<th>数量</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>101</td>
<td>5</td>
</tr>
<tr>
<td>2</td>
<td>102</td>
<td>3</td>
</tr>
<tr>
<td>3</td>
<td>101</td>
<td>2</td>
</tr>
</tbody></table>
<p><strong>产品表</strong></p>
<table>
<thead>
<tr>
<th>产品ID</th>
<th>产品名称</th>
</tr>
</thead>
<tbody><tr>
<td>101</td>
<td>苹果</td>
</tr>
<tr>
<td>102</td>
<td>香蕉</td>
</tr>
</tbody></table>
<h2 id="第三范式（3NF）"><a href="#第三范式（3NF）" class="headerlink" title="第三范式（3NF）"></a>第三范式（3NF）</h2><p>第三范式在满足2NF的基础上，要求非主属性不依赖于其他的非主属性（即消除传递依赖）。</p>
<h3 id="举例说明-2"><a href="#举例说明-2" class="headerlink" title="举例说明"></a>举例说明</h3><p>假设有一张员工表，包含“员工ID”、“员工姓名”、“部门ID”和“部门名称”。如果“部门名称”依赖于“部门ID”，而“部门ID”依赖于“员工ID”，则存在传递依赖，不满足3NF。应将“部门名称”移到另一张部门表中。</p>
<h4 id="不满足3NF的表结构"><a href="#不满足3NF的表结构" class="headerlink" title="不满足3NF的表结构"></a>不满足3NF的表结构</h4><table>
<thead>
<tr>
<th>员工ID</th>
<th>员工姓名</th>
<th>部门ID</th>
<th>部门名称</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>张三</td>
<td>D01</td>
<td>研发部</td>
</tr>
<tr>
<td>2</td>
<td>李四</td>
<td>D02</td>
<td>销售部</td>
</tr>
<tr>
<td>3</td>
<td>王五</td>
<td>D01</td>
<td>研发部</td>
</tr>
</tbody></table>
<h4 id="满足3NF的表结构"><a href="#满足3NF的表结构" class="headerlink" title="满足3NF的表结构"></a>满足3NF的表结构</h4><p><strong>员工表</strong></p>
<table>
<thead>
<tr>
<th>员工ID</th>
<th>员工姓名</th>
<th>部门ID</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>张三</td>
<td>D01</td>
</tr>
<tr>
<td>2</td>
<td>李四</td>
<td>D02</td>
</tr>
<tr>
<td>3</td>
<td>王五</td>
<td>D01</td>
</tr>
</tbody></table>
<p><strong>部门表</strong></p>
<table>
<thead>
<tr>
<th>部门ID</th>
<th>部门名称</th>
</tr>
</thead>
<tbody><tr>
<td>D01</td>
<td>研发部</td>
</tr>
<tr>
<td>D02</td>
<td>销售部</td>
</tr>
</tbody></table>
<h1 id="数据库连接查询"><a href="#数据库连接查询" class="headerlink" title="数据库连接查询"></a>数据库连接查询</h1><p>在数据库查询中，连接（Join）操作用于将两个或多个表中的数据组合在一起。常见的连接类型包括内连接、左外连接、右外连接和全外连接。以下是每种连接类型的详细说明及其SQL语法示例。</p>
<h2 id="1-内连接（Inner-Join）"><a href="#1-内连接（Inner-Join）" class="headerlink" title="1. 内连接（Inner Join）"></a>1. 内连接（Inner Join）</h2><p>内连接返回两个表中具有匹配关系的行。只有当两个表中的记录在连接条件上匹配时，才会返回结果。</p>
<p><strong>示例解释</strong></p>
<p>假设有两个表：<code>Orders</code>（订单表）和<code>Customers</code>（客户表），我们希望查询所有有订单的客户信息。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Orders.OrderID, Customers.CustomerName</span><br><span class="line"><span class="keyword">FROM</span> Orders</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> Customers</span><br><span class="line"><span class="keyword">ON</span> Orders.CustomerID <span class="operator">=</span> Customers.CustomerID;</span><br></pre></td></tr></table></figure>

<h2 id="2-左外连接（Left-Outer-Join）"><a href="#2-左外连接（Left-Outer-Join）" class="headerlink" title="2. 左外连接（Left Outer Join）"></a>2. 左外连接（Left Outer Join）</h2><p>左外连接返回左表中的所有行，即使右表中没有匹配的行。对于右表中没有匹配的行，结果集中对应的数据为<code>NULL</code>。</p>
<p><strong>示例解释</strong></p>
<p>假设我们希望查询所有客户及其订单信息，包括那些没有订单的客户。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Customers.CustomerName, Orders.OrderID</span><br><span class="line"><span class="keyword">FROM</span> Customers</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">JOIN</span> Orders</span><br><span class="line"><span class="keyword">ON</span> Customers.CustomerID <span class="operator">=</span> Orders.CustomerID;</span><br></pre></td></tr></table></figure>

<h2 id="3-右外连接（Right-Outer-Join）"><a href="#3-右外连接（Right-Outer-Join）" class="headerlink" title="3. 右外连接（Right Outer Join）"></a>3. 右外连接（Right Outer Join）</h2><p>右外连接与左外连接相似，返回右表中的所有行，即使左表中没有匹配的行。对于左表中没有匹配的行，结果集中对应的数据为<code>NULL</code>。</p>
<p><strong>示例解释</strong></p>
<p>假设我们希望查询所有订单及其对应的客户信息，包括那些没有客户的订单。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Orders.OrderID, Customers.CustomerName</span><br><span class="line"><span class="keyword">FROM</span> Orders</span><br><span class="line"><span class="keyword">RIGHT</span> <span class="keyword">JOIN</span> Customers</span><br><span class="line"><span class="keyword">ON</span> Orders.CustomerID <span class="operator">=</span> Customers.CustomerID;</span><br></pre></td></tr></table></figure>

<h2 id="4-全外连接（Full-Outer-Join）"><a href="#4-全外连接（Full-Outer-Join）" class="headerlink" title="4. 全外连接（Full Outer Join）"></a>4. 全外连接（Full Outer Join）</h2><p>全外连接返回两个表中的所有行，包括那些在另一个表中没有匹配的行。对于没有匹配的行，结果集中对应的数据为<code>NULL</code>。</p>
<p><strong>示例解释</strong></p>
<p>假设我们希望查询所有客户和订单的信息，包括那些没有订单的客户和没有客户的订单。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> Customers.CustomerName, Orders.OrderID</span><br><span class="line"><span class="keyword">FROM</span> Customers</span><br><span class="line"><span class="keyword">FULL</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> Orders</span><br><span class="line"><span class="keyword">ON</span> Customers.CustomerID <span class="operator">=</span> Orders.CustomerID;</span><br></pre></td></tr></table></figure>



<h1 id="MySQL如何避免插入重复数据"><a href="#MySQL如何避免插入重复数据" class="headerlink" title="MySQL如何避免插入重复数据"></a>MySQL如何避免插入重复数据</h1><p>在MySQL中，有多种方法可以避免插入重复数据。以下是三种常见的方法及其详细说明。</p>
<h2 id="方式一：使用UNIQUE约束"><a href="#方式一：使用UNIQUE约束" class="headerlink" title="方式一：使用UNIQUE约束"></a>方式一：使用UNIQUE约束</h2><p>UNIQUE约束用于确保表中某一列或一组列的值是唯一的。如果在插入数据时违反了UNIQUE约束，MySQL将拒绝插入该数据。</p>
<p><strong>创建表时添加UNIQUE约束</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Users (</span><br><span class="line">    id <span class="type">INT</span> AUTO_INCREMENT <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    email <span class="type">VARCHAR</span>(<span class="number">255</span>) <span class="keyword">UNIQUE</span>,</span><br><span class="line">    name <span class="type">VARCHAR</span>(<span class="number">255</span>)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<p>如果尝试插入重复的<code>email</code>，MySQL将返回错误。</p>
<h2 id="方式二：使用-INSERT-ON-DUPLICATE-KEY-UPDATE"><a href="#方式二：使用-INSERT-ON-DUPLICATE-KEY-UPDATE" class="headerlink" title="方式二：使用 INSERT ... ON DUPLICATE KEY UPDATE"></a>方式二：使用 <code>INSERT ... ON DUPLICATE KEY UPDATE</code></h2><p><code>INSERT ... ON DUPLICATE KEY UPDATE</code>语句在插入数据时，如果遇到重复键值（如UNIQUE约束或PRIMARY KEY），可以选择更新原有记录为新插入的记录。</p>
<p><strong>插入或更新数据</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> Products (product_id, product_name, price)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;Product A&#x27;</span>, <span class="number">10.99</span>)</span><br><span class="line"><span class="keyword">ON</span> DUPLICATE KEY <span class="keyword">UPDATE</span> product_name <span class="operator">=</span> <span class="keyword">VALUES</span>(product_name), price <span class="operator">=</span> <span class="keyword">VALUES</span>(price);</span><br></pre></td></tr></table></figure>

<p>如果<code>product_id</code>为1的记录已经存在，则更新其<code>product_name</code>和<code>price</code>字段。</p>
<h2 id="方式三：使用-INSERT-IGNORE"><a href="#方式三：使用-INSERT-IGNORE" class="headerlink" title="方式三：使用 INSERT IGNORE"></a>方式三：使用 <code>INSERT IGNORE</code></h2><p><code>INSERT IGNORE</code>语句在插入数据时，如果遇到重复键值（如UNIQUE约束或PRIMARY KEY），将忽略该插入操作，不会抛出错误。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> IGNORE <span class="keyword">INTO</span> Customers (customer_id, customer_name)</span><br><span class="line"><span class="keyword">VALUES</span> (<span class="number">1</span>, <span class="string">&#x27;Customer A&#x27;</span>);</span><br></pre></td></tr></table></figure>

<p>如果<code>customer_id</code>为1的记录已经存在，则忽略该插入操作，不会抛出错误。</p>
<h1 id="MySQL中的字符串类型"><a href="#MySQL中的字符串类型" class="headerlink" title="MySQL中的字符串类型"></a>MySQL中的字符串类型</h1><p>在MySQL中，字符串类型用于存储文本数据。常见的字符串类型包括<code>CHAR</code>、<code>VARCHAR</code>和<code>TEXT</code>。每种类型都有其特定的用途和存储特性。</p>
<h2 id="CHAR"><a href="#CHAR" class="headerlink" title="CHAR"></a><code>CHAR</code></h2><p><code>CHAR</code>是一种固定长度的字符串类型。在定义时需要指定长度，存储时会在末尾填充空格以达到指定的长度。</p>
<p><strong>特点</strong></p>
<ul>
<li><strong>固定长度</strong>：无论实际存储的字符串长度如何，都会占用指定长度的存储空间。</li>
<li><strong>存储效率</strong>：对于长度固定的字符串（如国家代码、性别等），<code>CHAR</code>类型可以提高存储效率。</li>
</ul>
<h2 id="VARCHAR"><a href="#VARCHAR" class="headerlink" title="VARCHAR"></a><code>VARCHAR</code></h2><p><code>VARCHAR</code>是一种可变长度的字符串类型。在定义时需要指定最大长度，存储时根据实际长度占用存储空间。</p>
<p><strong>特点</strong></p>
<ul>
<li><strong>可变长度</strong>：实际存储的字符串长度决定了占用的存储空间，节省存储空间。</li>
<li><strong>灵活性</strong>：适用于长度不固定的字符串（如用户名、地址等）。</li>
</ul>
<h2 id="TEXT"><a href="#TEXT" class="headerlink" title="TEXT"></a><code>TEXT</code></h2><p><code>TEXT</code>用于存储超长文本数据。<code>TEXT</code>类型有多种子类型，包括<code>TEXT</code>、<code>MEDIUMTEXT</code>和<code>LONGTEXT</code>，分别用于存储不同大小的文本。</p>
<p><strong>特点</strong></p>
<ul>
<li><p><strong>大容量存储</strong>：适用于存储大段文本（如文章内容、日志等）。</p>
</li>
<li><p><strong>存储限制</strong>：</p>
<ul>
<li><code>TEXT</code>：最大存储65,535字节（约64KB）。</li>
<li><code>MEDIUMTEXT</code>：最大存储16,777,215字节（约16MB）。</li>
<li><code>LONGTEXT</code>：最大存储4,294,967,295字节（约4GB）。</li>
</ul>
</li>
<li><p>**<code>CHAR</code>**：适用于固定长度的字符串，存储效率高。</p>
</li>
<li><p>**<code>VARCHAR</code>**：适用于长度不固定的字符串，节省存储空间。</p>
</li>
<li><p>**<code>TEXT</code>**：适用于存储超长文本，有多种子类型满足不同存储需求。</p>
</li>
</ul>
<p>根据具体需求选择合适的字符串类型，可以优化数据库的存储和查询性能。</p>
<h1 id="外键约束"><a href="#外键约束" class="headerlink" title="外键约束"></a>外键约束</h1><p>外键约束（Foreign Key Constraint）是关系型数据库中用于维护表与表之间关系的一种机制。它确保数据的完整性和一致性，防止在关联表中插入无效数据。</p>
<p><strong>作用</strong></p>
<ol>
<li><strong>维护数据完整性</strong>：外键约束确保在子表中插入或更新的记录在父表中存在对应的记录。如果父表中不存在对应的记录，数据库将拒绝插入或更新操作。</li>
<li><strong>防止无效数据</strong>：外键约束防止在子表中插入或更新无效数据，从而保持数据的正确性和一致性。</li>
<li><strong>级联操作</strong>：外键约束可以配置级联操作，如级联删除（CASCADE DELETE）或级联更新（CASCADE UPDATE），以确保在父表中的记录被删除或更新时，子表中的相关记录也相应地被删除或更新。</li>
</ol>
<p>假设有两个表：<code>Orders</code>（订单表）和<code>Customers</code>（客户表），我们希望在<code>Orders</code>表中定义一个外键约束，确保每个订单都关联到一个有效的客户。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Customers (</span><br><span class="line">    CustomerID <span class="type">INT</span> AUTO_INCREMENT <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    CustomerName <span class="type">VARCHAR</span>(<span class="number">255</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> Orders (</span><br><span class="line">    OrderID <span class="type">INT</span> AUTO_INCREMENT <span class="keyword">PRIMARY</span> KEY,</span><br><span class="line">    OrderDate <span class="type">DATE</span>,</span><br><span class="line">    CustomerID <span class="type">INT</span>,</span><br><span class="line">    <span class="keyword">FOREIGN</span> KEY (CustomerID) <span class="keyword">REFERENCES</span> Customers(CustomerID)</span><br><span class="line">);</span><br></pre></td></tr></table></figure>



<h1 id="MySQL关键字：IN-和-EXISTS"><a href="#MySQL关键字：IN-和-EXISTS" class="headerlink" title="MySQL关键字：IN 和 EXISTS"></a>MySQL关键字：<code>IN</code> 和 <code>EXISTS</code></h1><p>在MySQL中，<code>IN</code>和<code>EXISTS</code>是两个常用的关键字，用于在查询中进行条件判断。它们各自有不同的用途和特点。</p>
<h2 id="IN-关键字"><a href="#IN-关键字" class="headerlink" title="IN 关键字"></a><code>IN</code> 关键字</h2><p><code>IN</code>关键字用于检查左边的表达式是否存在于右边的列表或子查询中。如果存在，则返回<code>true</code>，否则返回<code>false</code>。</p>
<p>假设我们有一个<code>Orders</code>表，我们希望查询所有订单ID为1、2或3的订单。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> Orders</span><br><span class="line"><span class="keyword">WHERE</span> OrderID <span class="keyword">IN</span> (<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>);</span><br></pre></td></tr></table></figure>

<p>或者使用子查询：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> Orders</span><br><span class="line"><span class="keyword">WHERE</span> OrderID <span class="keyword">IN</span> (<span class="keyword">SELECT</span> OrderID <span class="keyword">FROM</span> Orders <span class="keyword">WHERE</span> OrderDate <span class="operator">=</span> <span class="string">&#x27;2023-10-01&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="EXISTS-关键字"><a href="#EXISTS-关键字" class="headerlink" title="EXISTS 关键字"></a><code>EXISTS</code> 关键字</h2><p><code>EXISTS</code>关键字用于检查子查询是否至少返回一行数据。它不关心子查询返回的具体数据，只关注是否有返回数据。如果有返回数据，则返回<code>true</code>，否则返回<code>false</code>。</p>
<p>假设我们有一个<code>Customers</code>表和一个<code>Orders</code>表，我们希望查询所有有订单的客户。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">FROM</span> Customers c</span><br><span class="line"><span class="keyword">WHERE</span> <span class="keyword">EXISTS</span> (<span class="keyword">SELECT</span> <span class="number">1</span> <span class="keyword">FROM</span> Orders o <span class="keyword">WHERE</span> o.CustomerID <span class="operator">=</span> c.CustomerID);</span><br></pre></td></tr></table></figure>

<h2 id="区别与适用场景"><a href="#区别与适用场景" class="headerlink" title="区别与适用场景"></a>区别与适用场景</h2><h3 id="IN-适用场景"><a href="#IN-适用场景" class="headerlink" title="IN 适用场景"></a><code>IN</code> 适用场景</h3><ul>
<li><strong>简单列表匹配</strong>：当需要检查某个值是否存在于一个固定的列表中时，<code>IN</code>非常适用。</li>
<li><strong>子查询结果匹配</strong>：当需要检查某个值是否存在于子查询的结果集中时，<code>IN</code>也很适用。</li>
</ul>
<h3 id="EXISTS-适用场景"><a href="#EXISTS-适用场景" class="headerlink" title="EXISTS 适用场景"></a><code>EXISTS</code> 适用场景</h3><ul>
<li><strong>存在性检查</strong>：当只需要检查是否存在满足条件的记录，而不关心具体返回的数据时，<code>EXISTS</code>非常适用。</li>
<li><strong>性能优化</strong>：在某些情况下，<code>EXISTS</code>的性能可能优于<code>IN</code>，特别是在子查询返回大量数据时。</li>
</ul>
<h1 id="MySQL基本函数"><a href="#MySQL基本函数" class="headerlink" title="MySQL基本函数"></a>MySQL基本函数</h1><p>MySQL提供了丰富的内置函数，用于处理字符串、数值、日期和聚合数据。以下是一些常用的MySQL函数及其说明。</p>
<h2 id="字符串函数"><a href="#字符串函数" class="headerlink" title="字符串函数"></a>字符串函数</h2><h3 id="CONCAT-str1-str2"><a href="#CONCAT-str1-str2" class="headerlink" title="CONCAT(str1, str2, ...)"></a><code>CONCAT(str1, str2, ...)</code></h3><p>连接多个字符串，返回拼接结果。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> CONCAT(<span class="string">&#x27;Hello&#x27;</span>, <span class="string">&#x27; &#x27;</span>, <span class="string">&#x27;World&#x27;</span>);  <span class="comment">-- 返回 &#x27;Hello World&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="LENGTH-str"><a href="#LENGTH-str" class="headerlink" title="LENGTH(str)"></a><code>LENGTH(str)</code></h3><p>返回字符串的长度（字符数）。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> LENGTH(<span class="string">&#x27;Hello World&#x27;</span>);  <span class="comment">-- 返回 11</span></span><br></pre></td></tr></table></figure>

<h3 id="SUBSTRING-str-start-length"><a href="#SUBSTRING-str-start-length" class="headerlink" title="SUBSTRING(str, start, length)"></a><code>SUBSTRING(str, start, length)</code></h3><p>从指定位置开始，截取指定长度的字符串。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUBSTRING</span>(<span class="string">&#x27;Hello World&#x27;</span>, <span class="number">7</span>, <span class="number">5</span>);  <span class="comment">-- 返回 &#x27;World&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="REPLACE-str-from-str-to-str"><a href="#REPLACE-str-from-str-to-str" class="headerlink" title="REPLACE(str, from_str, to_str)"></a><code>REPLACE(str, from_str, to_str)</code></h3><p>将字符串中的指定字符替换为另一个字符。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> REPLACE(<span class="string">&#x27;Hello World&#x27;</span>, <span class="string">&#x27;o&#x27;</span>, <span class="string">&#x27;a&#x27;</span>);  <span class="comment">-- 返回 &#x27;Hella Warld&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="数值函数"><a href="#数值函数" class="headerlink" title="数值函数"></a>数值函数</h2><h3 id="ABS-num"><a href="#ABS-num" class="headerlink" title="ABS(num)"></a><code>ABS(num)</code></h3><p>返回数值的绝对值。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">ABS</span>(<span class="number">-10</span>);  <span class="comment">-- 返回 10</span></span><br></pre></td></tr></table></figure>

<h3 id="POWER-num-n"><a href="#POWER-num-n" class="headerlink" title="POWER(num, n)"></a><code>POWER(num, n)</code></h3><p>返回数值的n次幂。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">POWER</span>(<span class="number">2</span>, <span class="number">3</span>);  <span class="comment">-- 返回 8</span></span><br></pre></td></tr></table></figure>

<h2 id="日期函数"><a href="#日期函数" class="headerlink" title="日期函数"></a>日期函数</h2><h3 id="NOW"><a href="#NOW" class="headerlink" title="NOW()"></a><code>NOW()</code></h3><p>返回当前日期和时间。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> NOW();  <span class="comment">-- 返回当前日期和时间，例如 &#x27;2023-10-01 12:34:56&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="CURDATE"><a href="#CURDATE" class="headerlink" title="CURDATE()"></a><code>CURDATE()</code></h3><p>返回当前日期。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> CURDATE();  <span class="comment">-- 返回当前日期，例如 &#x27;2023-10-01&#x27;</span></span><br></pre></td></tr></table></figure>

<h2 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h2><h3 id="COUNT-column"><a href="#COUNT-column" class="headerlink" title="COUNT(column)"></a><code>COUNT(column)</code></h3><p>计算指定列中的非NULL值的个数。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(OrderID) <span class="keyword">FROM</span> Orders;  <span class="comment">-- 返回订单表中OrderID列的非NULL值个数</span></span><br></pre></td></tr></table></figure>

<h3 id="SUM-column"><a href="#SUM-column" class="headerlink" title="SUM(column)"></a><code>SUM(column)</code></h3><p>计算指定列的总和。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">SUM</span>(Price) <span class="keyword">FROM</span> Products;  <span class="comment">-- 返回产品表中Price列的总和</span></span><br></pre></td></tr></table></figure>

<h3 id="AVG-column"><a href="#AVG-column" class="headerlink" title="AVG(column)"></a><code>AVG(column)</code></h3><p>计算指定列的平均值。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">AVG</span>(Price) <span class="keyword">FROM</span> Products;  <span class="comment">-- 返回产品表中Price列的平均值</span></span><br></pre></td></tr></table></figure>

<h3 id="MAX-column"><a href="#MAX-column" class="headerlink" title="MAX(column)"></a><code>MAX(column)</code></h3><p>返回指定列的最大值。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MAX</span>(Price) <span class="keyword">FROM</span> Products;  <span class="comment">-- 返回产品表中Price列的最大值</span></span><br></pre></td></tr></table></figure>

<h3 id="MIN-column"><a href="#MIN-column" class="headerlink" title="MIN(column)"></a><code>MIN(column)</code></h3><p>返回指定列的最小值。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">MIN</span>(Price) <span class="keyword">FROM</span> Products;  <span class="comment">-- 返回产品表中Price列的最小值</span></span><br></pre></td></tr></table></figure>

<h1 id="SQL查询执行顺序"><a href="#SQL查询执行顺序" class="headerlink" title="SQL查询执行顺序"></a>SQL查询执行顺序</h1><p>所有的查询语句都是从FROM开始执行，在执行过程中，每个步骤都会生成一个虚拟表，这个虚拟表将作为下一个执行步骤的输入，最后一个步骤产生的虚拟表即为输出结果。执行顺序如下：</p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaoyanfufu-io.oss-cn-guangzhou.aliyuncs.com/blog/202409231055933.png" alt="SQL查询语句执行顺序" style="zoom:80%;">

<p>sql查询语句执行顺序注释：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- (9) 选择要查询的列</span></span><br><span class="line"><span class="keyword">SELECT</span></span><br><span class="line"><span class="comment">-- (10) 去重</span></span><br><span class="line"><span class="keyword">DISTINCT</span> <span class="operator">&lt;</span><span class="keyword">column</span><span class="operator">&gt;</span></span><br><span class="line"><span class="comment">-- (6) 聚合函数或表达式</span></span><br><span class="line">AGG FUNC <span class="operator">&lt;</span><span class="keyword">column</span><span class="operator">&gt;</span> <span class="keyword">or</span></span><br><span class="line"><span class="operator">&lt;</span>expression<span class="operator">&gt;</span></span><br><span class="line"><span class="comment">-- (1) 指定数据来源的左表</span></span><br><span class="line"><span class="keyword">FROM</span> <span class="operator">&lt;</span><span class="keyword">left</span> <span class="keyword">table</span><span class="operator">&gt;</span></span><br><span class="line"><span class="comment">-- (3) 指定连接类型并连接右表</span></span><br><span class="line"><span class="operator">&lt;</span>join_type<span class="operator">&gt;</span> <span class="keyword">JOIN</span> <span class="operator">&lt;</span><span class="keyword">right</span> <span class="keyword">table</span><span class="operator">&gt;</span></span><br><span class="line"><span class="comment">-- (2) 指定连接条件</span></span><br><span class="line"><span class="keyword">ON</span> <span class="operator">&lt;</span>join_condition<span class="operator">&gt;</span></span><br><span class="line"><span class="comment">-- (4) 指定筛选条件</span></span><br><span class="line"><span class="keyword">WHERE</span> <span class="operator">&lt;</span><span class="keyword">where</span> <span class="keyword">condition</span><span class="operator">&gt;</span></span><br><span class="line"><span class="comment">-- (5) 指定分组列</span></span><br><span class="line"><span class="keyword">GROUP</span> <span class="keyword">BY</span> <span class="operator">&lt;</span><span class="keyword">group</span> <span class="keyword">by</span> list<span class="operator">&gt;</span></span><br><span class="line"><span class="comment">-- (7) 可选：使用 CUBE 或 ROLLUP 进行多维分析</span></span><br><span class="line"><span class="keyword">WITH</span> &#123;<span class="keyword">CUBE</span> <span class="operator">|</span> <span class="keyword">ROLLUP</span>&#125;</span><br><span class="line"><span class="comment">-- (8) 指定分组后的筛选条件</span></span><br><span class="line"><span class="keyword">HAVING</span> <span class="operator">&lt;</span>having_condition<span class="operator">&gt;</span></span><br><span class="line"><span class="comment">-- (11) 指定排序方式</span></span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="operator">&lt;</span><span class="keyword">order</span> <span class="keyword">by</span> list<span class="operator">&gt;</span></span><br><span class="line"><span class="comment">-- (12) 指定返回结果的数量限制</span></span><br><span class="line">LIMIT <span class="operator">&lt;</span>limit number<span class="operator">&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="SQL请求执行过程详解"><a href="#SQL请求执行过程详解" class="headerlink" title="SQL请求执行过程详解"></a>SQL请求执行过程详解</h1><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaoyanfufu-io.oss-cn-guangzhou.aliyuncs.com/blog/202409231743173.png" alt="SQL请求执行过程" style="zoom:80%;">

<ol>
<li><strong>连接管理</strong></li>
</ol>
<p><strong>连接器</strong>：客户端通过连接器与MySQL服务器建立连接。连接器负责验证客户端的身份和权限，并维护连接状态。</p>
<ol start="2">
<li><strong>查询缓存</strong></li>
</ol>
<p><strong>缓存查询</strong>：在MySQL 5.7及之前版本中，查询缓存功能默认关闭，而在MySQL 8.0中已被移除。如果查询缓存功能开启且命中缓存，服务器将直接返回缓存结果，从而提高查询效率。</p>
<ol start="3">
<li><strong>语法解析</strong></li>
</ol>
<p><strong>解析器</strong>：解析器负责对SQL语句进行词法和语法分析。词法分析确保SQL语句中的关键词和标识符正确无误，语法分析则验证SQL语句的结构是否符合语法规则。解析完成后，生成一棵语法树（AST）。</p>
<ol start="4">
<li><strong>预处理</strong></li>
</ol>
<p><strong>预处理阶段</strong>：预处理器对语法树进行进一步处理，检查表和字段是否存在，并验证SQL语句的语义正确性。此阶段还会处理SQL语句中的占位符，确保查询的完整性和一致性。</p>
<ol start="5">
<li><strong>查询优化</strong></li>
</ol>
<p><strong>优化器</strong>：优化器是SQL执行过程中的核心组件，负责选择最优的执行计划。优化器会评估多种可能的执行路径，并根据成本模型选择查询成本最小的执行计划。优化过程包括但不限于索引选择、表连接顺序优化、子查询优化等。</p>
<ol start="6">
<li><strong>执行引擎</strong></li>
</ol>
<p><strong>执行阶段</strong>：执行引擎根据优化器生成的执行计划，从存储引擎中读取数据。执行过程中，数据可能被缓存以提高后续查询的效率。最终，执行引擎将结果集返回给客户端。</p>
<h1 id="MySQL存储引擎"><a href="#MySQL存储引擎" class="headerlink" title="MySQL存储引擎"></a>MySQL存储引擎</h1><h2 id="InnoDB"><a href="#InnoDB" class="headerlink" title="InnoDB"></a>InnoDB</h2><ul>
<li><strong>默认引擎</strong>：InnoDB是MySQL的<strong>默认存储引擎</strong>，适用于高并发场景。</li>
<li><strong>事务支持</strong>：提供<code>ACID</code>（原子性、一致性、隔离性、持久性）事务特性，确保数据的一致性和完整性。</li>
<li><strong>锁机制</strong>：支持行级锁，减少锁冲突，提高并发性能。</li>
<li><strong>外键约束</strong>：支持外键约束，确保表之间的数据完整性。</li>
</ul>
<h2 id="MyISAM"><a href="#MyISAM" class="headerlink" title="MyISAM"></a>MyISAM</h2><ul>
<li><strong>存储优化</strong>：MyISAM具有较低的存储和内存消耗，适用于大量读操作的场景。</li>
<li><strong>性能特点</strong>：不支持事务，没有行级锁和外键约束，因此在高并发写操作场景下性能较差。</li>
<li><strong>适用场景</strong>：适合读密集型应用，如数据仓库、日志记录等。</li>
</ul>
<h2 id="Memory"><a href="#Memory" class="headerlink" title="Memory"></a>Memory</h2><ul>
<li><strong>内存存储</strong>：Memory引擎将数据存储在内存中，适用于需要快速读取的场景。</li>
<li><strong>性能优势</strong>：由于数据存储在内存中，读取速度极快，适合临时数据存储和高频读取操作。</li>
<li><strong>数据持久性</strong>：不支持事务、行级锁和外键索引。数据在服务器重启或崩溃时会丢失，因此不适合需要持久化的数据存储。</li>
</ul>
<p>通过选择合适的存储引擎，可以根据应用的具体需求优化数据库性能和数据管理策略。InnoDB适用于需要高并发和事务支持的场景，MyISAM适合读密集型应用，而Memory引擎则适用于需要快速读取的临时数据存储。</p>
<h1 id="数据文件"><a href="#数据文件" class="headerlink" title="数据文件"></a>数据文件</h1><p>在MySQL中，我们可以创建一个测试数据库<code>test_db</code>和一张测试表<code>test_order</code>。在数据库的存储路径下，可以看到以下三个文件：</p>
<ol>
<li><strong>db.opt</strong>：该文件记录了当前数据库的默认字符集和校验规则。</li>
<li><strong>test_order.frm</strong>：此文件存储了表的结构信息，包括字段定义、索引等，主要用于描述表的结构。</li>
<li><strong>test_order.idb</strong>：所有的元数据和实际数据都存储在这个文件中，包括表的数据、索引等。</li>
</ol>
<h1 id="联合索引"><a href="#联合索引" class="headerlink" title="联合索引"></a>联合索引</h1><p>联合索引是由多个字段共同组成的索引。例如，索引可以基于字段A、B和C创建。联合索引的构建遵循<strong>最左匹配原则</strong>，即首先按照联合索引中的第一个字段进行分组排序，然后在此基础上按第二个字段分组排序，依此类推。</p>
<h2 id="最左匹配原则"><a href="#最左匹配原则" class="headerlink" title="最左匹配原则"></a>最左匹配原则</h2><p>最左匹配原则意味着查询必须从联合索引的最左边的字段开始匹配。例如，如果联合索引是基于字段A、B和C创建的，那么查询条件中必须包含字段A，才能利用该索引。如果查询条件只包含字段B和C，则无法利用该联合索引，因为往后的索引是<strong>全局无序</strong>的，而只是相<strong>对上一个字段局部有序</strong>。</p>
<h2 id="索引区分度的重要性"><a href="#索引区分度的重要性" class="headerlink" title="索引区分度的重要性"></a>索引区分度的重要性</h2><p>在构建联合索引时，优先选择区分度高的字段作为前缀。区分度的计算公式为：<code>区分度 = (不同值的数量) / (总记录数)</code>。区分度越高，索引的选择性越好，查询效率也越高。例如，使用性别作为联合索引的首个字段，由于其区分度极低（接近于0），即使通过索引找到了结果，由于是非聚簇索引，仍需执行回表操作，增加IO次数，因此不建议使用。</p>
<h2 id="索引失效的情况"><a href="#索引失效的情况" class="headerlink" title="索引失效的情况"></a>索引失效的情况</h2><p>从索引的物理存储特性来看，以下行为可能导致索引失效：</p>
<ul>
<li><strong>模糊查询</strong>：使用通配符开头的模糊查询（如<code>LIKE &#39;%keyword&#39;</code>）通常会导致索引失效，因为数据库无法利用索引来快速定位匹配的记录。</li>
<li><strong>范围查询</strong>：在联合索引中，范围查询（如<code>&gt;</code>、<code>&lt;</code>、<code>BETWEEN</code>等）可能会导致后续字段的索引失效。例如，如果查询条件是<code>A &gt; 10 AND B = 5</code>，那么字段B的索引可能无法被有效利用。</li>
<li><strong>函数操作</strong>：对索引字段进行函数操作（如<code>LOWER(column)</code>）会导致索引失效，因为数据库无法直接使用索引进行比较。</li>
</ul>
<p>通过合理设计和使用联合索引，可以显著提高查询性能，减少数据库的I&#x2F;O操作。</p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/images/user.jpg" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/images/user.jpg" title="头像" alt="头像"></a><div class="post-copyright__author_name">xiaoyan</div><div class="post-copyright__author_desc">无限进步。</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="http://example.com/2024/09/15/MySQL-SQL%E5%9F%BA%E7%A1%80/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('http://example.com/2024/09/15/MySQL-SQL%E5%9F%BA%E7%A1%80/')">MySQL-SQL基础</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="http://example.com/2024/09/15/MySQL-SQL%E5%9F%BA%E7%A1%80/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=MySQL-SQL基础&amp;url=http://example.com/2024/09/15/MySQL-SQL%E5%9F%BA%E7%A1%80/&amp;pic=/2024/09/15/MySQL-SQL%E5%9F%BA%E7%A1%80/cover.png" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">XIAOYAN</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__category-list"><a class="post-meta__box__categoryes" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93-%E7%BC%93%E5%AD%98/"><span class="categoryes-punctuation"> <i class="anzhiyufont anzhiyu-icon-inbox"></i></span>数据库&amp;缓存<span class="categoryesPageCount">12</span></a><a class="post-meta__box__categoryes" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93-%E7%BC%93%E5%AD%98/MySQL/"><span class="categoryes-punctuation"> <i class="anzhiyufont anzhiyu-icon-inbox"></i></span>MySQL<span class="categoryesPageCount">5</span></a></div><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/MySQL%E5%9F%BA%E7%A1%80/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>MySQL基础<span class="tagsPageCount">1</span></a></div></div><div class="post_share"><div class="social-share" data-image="https://pic1.zhimg.com/v2-b76d79b11c3e8dd25f3c6abae8889a88_720w.jpg?source=172ae18b" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/09/10/Java%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B-%E7%BA%BF%E7%A8%8B%E6%B1%A0%E7%AF%87/"><img class="prev-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/09/10/Java%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B-%E7%BA%BF%E7%A8%8B%E6%B1%A0%E7%AF%87/cover.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Java并发编程-线程池篇</div></div></a></div><div class="next-post pull-right"><a href="/2024/09/15/MySQL-%E7%B4%A2%E5%BC%95%E4%B8%8E%E6%9F%A5%E8%AF%A2/"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/2024/09/15/MySQL-%E7%B4%A2%E5%BC%95%E4%B8%8E%E6%9F%A5%E8%AF%A2/cover.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">MySQL-索引与查询</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/images/user.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__description">是一只时时翻垃圾吃的宅子。</div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">xiaoyan</h1><div class="author-info__desc">无限进步。</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/xiaoyanfufu" target="_blank" title="Github"><i class="anzhiyufont anzhiyu-icon-github"></i></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/483597064" target="_blank" title="BiliBili"><i class="anzhiyufont anzhiyu-icon-bilibili"></i></a></div></div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://bu.dusays.com/2023/05/13/645fa415e8694.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#SQL%E4%B8%8ENoSQL%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.</span> <span class="toc-text">SQL与NoSQL数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">1.1.</span> <span class="toc-text">概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#SQL%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.1.1.</span> <span class="toc-text">SQL数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#NoSQL%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.1.2.</span> <span class="toc-text">NoSQL数据库</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%89%E6%8B%A9%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E8%80%83%E9%87%8F%E5%9B%A0%E7%B4%A0"><span class="toc-number">1.2.</span> <span class="toc-text">选择数据库的考量因素</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ACID%E4%B8%8EBASE"><span class="toc-number">1.2.1.</span> <span class="toc-text">ACID与BASE</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%A9%E5%B1%95%E6%80%A7"><span class="toc-number">1.2.2.</span> <span class="toc-text">扩展性</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1%E4%B8%89%E5%A4%A7%E8%8C%83%E5%BC%8F"><span class="toc-number">2.</span> <span class="toc-text">数据库设计三大范式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E8%8C%83%E5%BC%8F%EF%BC%881NF%EF%BC%89"><span class="toc-number">2.1.</span> <span class="toc-text">第一范式（1NF）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BE%E4%BE%8B%E8%AF%B4%E6%98%8E"><span class="toc-number">2.1.1.</span> <span class="toc-text">举例说明</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8D%E6%BB%A1%E8%B6%B31NF%E7%9A%84%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="toc-number">2.1.1.1.</span> <span class="toc-text">不满足1NF的表结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BB%A1%E8%B6%B31NF%E7%9A%84%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="toc-number">2.1.1.2.</span> <span class="toc-text">满足1NF的表结构</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E8%8C%83%E5%BC%8F%EF%BC%882NF%EF%BC%89"><span class="toc-number">2.2.</span> <span class="toc-text">第二范式（2NF）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BE%E4%BE%8B%E8%AF%B4%E6%98%8E-1"><span class="toc-number">2.2.1.</span> <span class="toc-text">举例说明</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8D%E6%BB%A1%E8%B6%B32NF%E7%9A%84%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="toc-number">2.2.1.1.</span> <span class="toc-text">不满足2NF的表结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BB%A1%E8%B6%B32NF%E7%9A%84%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="toc-number">2.2.1.2.</span> <span class="toc-text">满足2NF的表结构</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E8%8C%83%E5%BC%8F%EF%BC%883NF%EF%BC%89"><span class="toc-number">2.3.</span> <span class="toc-text">第三范式（3NF）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BE%E4%BE%8B%E8%AF%B4%E6%98%8E-2"><span class="toc-number">2.3.1.</span> <span class="toc-text">举例说明</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%8D%E6%BB%A1%E8%B6%B33NF%E7%9A%84%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="toc-number">2.3.1.1.</span> <span class="toc-text">不满足3NF的表结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%BB%A1%E8%B6%B33NF%E7%9A%84%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="toc-number">2.3.1.2.</span> <span class="toc-text">满足3NF的表结构</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-number">3.</span> <span class="toc-text">数据库连接查询</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E5%86%85%E8%BF%9E%E6%8E%A5%EF%BC%88Inner-Join%EF%BC%89"><span class="toc-number">3.1.</span> <span class="toc-text">1. 内连接（Inner Join）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E5%B7%A6%E5%A4%96%E8%BF%9E%E6%8E%A5%EF%BC%88Left-Outer-Join%EF%BC%89"><span class="toc-number">3.2.</span> <span class="toc-text">2. 左外连接（Left Outer Join）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-%E5%8F%B3%E5%A4%96%E8%BF%9E%E6%8E%A5%EF%BC%88Right-Outer-Join%EF%BC%89"><span class="toc-number">3.3.</span> <span class="toc-text">3. 右外连接（Right Outer Join）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-%E5%85%A8%E5%A4%96%E8%BF%9E%E6%8E%A5%EF%BC%88Full-Outer-Join%EF%BC%89"><span class="toc-number">3.4.</span> <span class="toc-text">4. 全外连接（Full Outer Join）</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#MySQL%E5%A6%82%E4%BD%95%E9%81%BF%E5%85%8D%E6%8F%92%E5%85%A5%E9%87%8D%E5%A4%8D%E6%95%B0%E6%8D%AE"><span class="toc-number">4.</span> <span class="toc-text">MySQL如何避免插入重复数据</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B9%E5%BC%8F%E4%B8%80%EF%BC%9A%E4%BD%BF%E7%94%A8UNIQUE%E7%BA%A6%E6%9D%9F"><span class="toc-number">4.1.</span> <span class="toc-text">方式一：使用UNIQUE约束</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B9%E5%BC%8F%E4%BA%8C%EF%BC%9A%E4%BD%BF%E7%94%A8-INSERT-ON-DUPLICATE-KEY-UPDATE"><span class="toc-number">4.2.</span> <span class="toc-text">方式二：使用 INSERT ... ON DUPLICATE KEY UPDATE</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B9%E5%BC%8F%E4%B8%89%EF%BC%9A%E4%BD%BF%E7%94%A8-INSERT-IGNORE"><span class="toc-number">4.3.</span> <span class="toc-text">方式三：使用 INSERT IGNORE</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#MySQL%E4%B8%AD%E7%9A%84%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B1%BB%E5%9E%8B"><span class="toc-number">5.</span> <span class="toc-text">MySQL中的字符串类型</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#CHAR"><span class="toc-number">5.1.</span> <span class="toc-text">CHAR</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#VARCHAR"><span class="toc-number">5.2.</span> <span class="toc-text">VARCHAR</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#TEXT"><span class="toc-number">5.3.</span> <span class="toc-text">TEXT</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-number">6.</span> <span class="toc-text">外键约束</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#MySQL%E5%85%B3%E9%94%AE%E5%AD%97%EF%BC%9AIN-%E5%92%8C-EXISTS"><span class="toc-number">7.</span> <span class="toc-text">MySQL关键字：IN 和 EXISTS</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#IN-%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">7.1.</span> <span class="toc-text">IN 关键字</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#EXISTS-%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">7.2.</span> <span class="toc-text">EXISTS 关键字</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8C%BA%E5%88%AB%E4%B8%8E%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">7.3.</span> <span class="toc-text">区别与适用场景</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#IN-%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">7.3.1.</span> <span class="toc-text">IN 适用场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EXISTS-%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">7.3.2.</span> <span class="toc-text">EXISTS 适用场景</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#MySQL%E5%9F%BA%E6%9C%AC%E5%87%BD%E6%95%B0"><span class="toc-number">8.</span> <span class="toc-text">MySQL基本函数</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%87%BD%E6%95%B0"><span class="toc-number">8.1.</span> <span class="toc-text">字符串函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#CONCAT-str1-str2"><span class="toc-number">8.1.1.</span> <span class="toc-text">CONCAT(str1, str2, ...)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LENGTH-str"><span class="toc-number">8.1.2.</span> <span class="toc-text">LENGTH(str)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SUBSTRING-str-start-length"><span class="toc-number">8.1.3.</span> <span class="toc-text">SUBSTRING(str, start, length)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#REPLACE-str-from-str-to-str"><span class="toc-number">8.1.4.</span> <span class="toc-text">REPLACE(str, from_str, to_str)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E5%80%BC%E5%87%BD%E6%95%B0"><span class="toc-number">8.2.</span> <span class="toc-text">数值函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ABS-num"><span class="toc-number">8.2.1.</span> <span class="toc-text">ABS(num)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#POWER-num-n"><span class="toc-number">8.2.2.</span> <span class="toc-text">POWER(num, n)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%97%A5%E6%9C%9F%E5%87%BD%E6%95%B0"><span class="toc-number">8.3.</span> <span class="toc-text">日期函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#NOW"><span class="toc-number">8.3.1.</span> <span class="toc-text">NOW()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#CURDATE"><span class="toc-number">8.3.2.</span> <span class="toc-text">CURDATE()</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%81%9A%E5%90%88%E5%87%BD%E6%95%B0"><span class="toc-number">8.4.</span> <span class="toc-text">聚合函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#COUNT-column"><span class="toc-number">8.4.1.</span> <span class="toc-text">COUNT(column)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SUM-column"><span class="toc-number">8.4.2.</span> <span class="toc-text">SUM(column)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AVG-column"><span class="toc-number">8.4.3.</span> <span class="toc-text">AVG(column)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MAX-column"><span class="toc-number">8.4.4.</span> <span class="toc-text">MAX(column)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MIN-column"><span class="toc-number">8.4.5.</span> <span class="toc-text">MIN(column)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SQL%E6%9F%A5%E8%AF%A2%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F"><span class="toc-number">9.</span> <span class="toc-text">SQL查询执行顺序</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SQL%E8%AF%B7%E6%B1%82%E6%89%A7%E8%A1%8C%E8%BF%87%E7%A8%8B%E8%AF%A6%E8%A7%A3"><span class="toc-number">10.</span> <span class="toc-text">SQL请求执行过程详解</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#MySQL%E5%AD%98%E5%82%A8%E5%BC%95%E6%93%8E"><span class="toc-number">11.</span> <span class="toc-text">MySQL存储引擎</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#InnoDB"><span class="toc-number">11.1.</span> <span class="toc-text">InnoDB</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MyISAM"><span class="toc-number">11.2.</span> <span class="toc-text">MyISAM</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Memory"><span class="toc-number">11.3.</span> <span class="toc-text">Memory</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%96%87%E4%BB%B6"><span class="toc-number">12.</span> <span class="toc-text">数据文件</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%81%94%E5%90%88%E7%B4%A2%E5%BC%95"><span class="toc-number">13.</span> <span class="toc-text">联合索引</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9C%80%E5%B7%A6%E5%8C%B9%E9%85%8D%E5%8E%9F%E5%88%99"><span class="toc-number">13.1.</span> <span class="toc-text">最左匹配原则</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E5%8C%BA%E5%88%86%E5%BA%A6%E7%9A%84%E9%87%8D%E8%A6%81%E6%80%A7"><span class="toc-number">13.2.</span> <span class="toc-text">索引区分度的重要性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E5%A4%B1%E6%95%88%E7%9A%84%E6%83%85%E5%86%B5"><span class="toc-number">13.3.</span> <span class="toc-text">索引失效的情况</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/11/03/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/" title="数据库优化-分库分表"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://pic1.zhimg.com/v2-b76d79b11c3e8dd25f3c6abae8889a88_720w.jpg?source=172ae18b" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="数据库优化-分库分表"/></a><div class="content"><a class="title" href="/2024/11/03/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96-%E5%88%86%E5%BA%93%E5%88%86%E8%A1%A8/" title="数据库优化-分库分表">数据库优化-分库分表</a><time datetime="2024-11-03T08:20:54.000Z" title="发表于 2024-11-03 16:20:54">2024-11-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/11/03/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96-%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB%E4%B8%8E%E5%86%B7%E7%83%AD%E5%88%86%E7%A6%BB/" title="数据库优化-读写分离与冷热分离"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaoyanfufu-io.oss-cn-guangzhou.aliyuncs.com/blog/202411041125092.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="数据库优化-读写分离与冷热分离"/></a><div class="content"><a class="title" href="/2024/11/03/%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96-%E8%AF%BB%E5%86%99%E5%88%86%E7%A6%BB%E4%B8%8E%E5%86%B7%E7%83%AD%E5%88%86%E7%A6%BB/" title="数据库优化-读写分离与冷热分离">数据库优化-读写分离与冷热分离</a><time datetime="2024-11-03T08:18:25.000Z" title="发表于 2024-11-03 16:18:25">2024-11-03</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/10/28/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/" title="操作系统-进程管理"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaoyanfufu-io.oss-cn-guangzhou.aliyuncs.com/blog/202410282316960.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="操作系统-进程管理"/></a><div class="content"><a class="title" href="/2024/10/28/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F-%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/" title="操作系统-进程管理">操作系统-进程管理</a><time datetime="2024-10-28T14:52:35.000Z" title="发表于 2024-10-28 22:52:35">2024-10-28</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/10/27/%E5%88%86%E5%B8%83%E5%BC%8F-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/" title="分布式-分布式事务"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaoyanfufu-io.oss-cn-guangzhou.aliyuncs.com/blog/202410281041645.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="分布式-分布式事务"/></a><div class="content"><a class="title" href="/2024/10/27/%E5%88%86%E5%B8%83%E5%BC%8F-%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1/" title="分布式-分布式事务">分布式-分布式事务</a><time datetime="2024-10-27T13:08:20.000Z" title="发表于 2024-10-27 21:08:20">2024-10-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/10/21/%E5%88%86%E5%B8%83%E5%BC%8F-%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86%EF%BC%88%E4%B8%8B%EF%BC%89/" title="分布式-服务治理（下）"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://xiaoyanfufu-io.oss-cn-guangzhou.aliyuncs.com/blog/202410272103963.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="分布式-服务治理（下）"/></a><div class="content"><a class="title" href="/2024/10/21/%E5%88%86%E5%B8%83%E5%BC%8F-%E6%9C%8D%E5%8A%A1%E6%B2%BB%E7%90%86%EF%BC%88%E4%B8%8B%EF%BC%89/" title="分布式-服务治理（下）">分布式-服务治理（下）</a><time datetime="2024-10-21T07:24:49.000Z" title="发表于 2024-10-21 15:24:49">2024-10-21</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2024 By <a class="footer-bar-link" href="/" title="xiaoyan" target="_blank">xiaoyan</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">44</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">65</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">17</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/archives/"><i class="anzhiyufont anzhiyu-icon-box-archive faa-tada" style="font-size: 0.9em;"></i><span> 隧道</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 我的</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/music/?id=12613265870&amp;server=netease"><i class="anzhiyufont anzhiyu-icon-music faa-tada" style="font-size: 0.9em;"></i><span> 音乐馆</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/AOP/" style="font-size: 0.88rem;">AOP<sup>1</sup></a><a href="/tags/Bean/" style="font-size: 0.88rem;">Bean<sup>1</sup></a><a href="/tags/DDD/" style="font-size: 0.88rem;">DDD<sup>1</sup></a><a href="/tags/IoC/" style="font-size: 0.88rem;">IoC<sup>1</sup></a><a href="/tags/Java8%E6%96%B0%E7%89%B9%E6%80%A7/" style="font-size: 0.88rem;">Java8新特性<sup>1</sup></a><a href="/tags/Java%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/" style="font-size: 0.88rem;">Java基本概念<sup>1</sup></a><a href="/tags/List/" style="font-size: 0.88rem;">List<sup>1</sup></a><a href="/tags/Map/" style="font-size: 0.88rem;">Map<sup>2</sup></a><a href="/tags/MyBatis/" style="font-size: 0.88rem;">MyBatis<sup>1</sup></a><a href="/tags/MySQL%E5%9F%BA%E7%A1%80/" style="font-size: 0.88rem;">MySQL基础<sup>1</sup></a><a href="/tags/Object/" style="font-size: 0.88rem;">Object<sup>1</sup></a><a href="/tags/SQL%E8%B0%83%E4%BC%98/" style="font-size: 0.88rem;">SQL调优<sup>1</sup></a><a href="/tags/Set/" style="font-size: 0.88rem;">Set<sup>1</sup></a><a href="/tags/SpringBoot/" style="font-size: 0.88rem;">SpringBoot<sup>1</sup></a><a href="/tags/SpringCloud/" style="font-size: 0.88rem;">SpringCloud<sup>1</sup></a><a href="/tags/%E4%BA%8B%E5%8A%A1/" style="font-size: 0.88rem;">事务<sup>2</sup></a><a href="/tags/%E5%86%85%E5%AD%98%E6%A8%A1%E5%9E%8B/" style="font-size: 0.88rem;">内存模型<sup>1</sup></a><a href="/tags/%E5%8F%8D%E5%B0%84/" style="font-size: 0.88rem;">反射<sup>1</sup></a><a href="/tags/%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6/" style="font-size: 0.88rem;">垃圾回收<sup>1</sup></a><a href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" style="font-size: 0.88rem;">多线程<sup>1</sup></a><a href="/tags/%E5%AF%B9%E8%B1%A1/" style="font-size: 0.88rem;">对象<sup>1</sup></a><a href="/tags/%E5%B9%B6%E5%8F%91%E5%AE%89%E5%85%A8/" style="font-size: 0.88rem;">并发安全<sup>1</sup></a><a href="/tags/%E5%BA%8F%E5%88%97%E5%8C%96/" style="font-size: 0.88rem;">序列化<sup>1</sup></a><a href="/tags/%E5%BC%82%E5%B8%B8/" style="font-size: 0.88rem;">异常<sup>1</sup></a><a href="/tags/%E6%8B%B7%E8%B4%9D/" style="font-size: 0.88rem;">拷贝<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B/" style="font-size: 0.88rem;">数据类型<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" style="font-size: 0.88rem;">数据结构<sup>1</sup></a><a href="/tags/%E6%97%A5%E5%BF%97/" style="font-size: 0.88rem;">日志<sup>2</sup></a><a href="/tags/%E6%9F%A5%E8%AF%A2/" style="font-size: 0.88rem;">查询<sup>1</sup></a><a href="/tags/%E6%B3%9B%E5%9E%8B/" style="font-size: 0.88rem;">泛型<sup>1</sup></a><a href="/tags/%E6%B3%A8%E8%A7%A3/" style="font-size: 0.88rem;">注解<sup>1</sup></a><a href="/tags/%E7%AD%96%E7%95%A5/" style="font-size: 0.88rem;">策略<sup>1</sup></a><a href="/tags/%E7%B1%BB%E5%88%9D%E5%A7%8B%E5%8C%96/" style="font-size: 0.88rem;">类初始化<sup>1</sup></a><a href="/tags/%E7%B1%BB%E5%8A%A0%E8%BD%BD/" style="font-size: 0.88rem;">类加载<sup>1</sup></a><a href="/tags/%E7%B4%A2%E5%BC%95/" style="font-size: 0.88rem;">索引<sup>2</sup></a><a href="/tags/%E7%BA%BF%E7%A8%8B%E6%A8%A1%E5%9E%8B/" style="font-size: 0.88rem;">线程模型<sup>1</sup></a><a href="/tags/%E7%BA%BF%E7%A8%8B%E6%B1%A0/" style="font-size: 0.88rem;">线程池<sup>1</sup></a><a href="/tags/%E9%94%81/" style="font-size: 0.88rem;">锁<sup>2</sup></a><a href="/tags/%E9%9B%86%E7%BE%A4/" style="font-size: 0.88rem;">集群<sup>1</sup></a><a href="/tags/%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/" style="font-size: 0.88rem;">面向对象<sup>1</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>